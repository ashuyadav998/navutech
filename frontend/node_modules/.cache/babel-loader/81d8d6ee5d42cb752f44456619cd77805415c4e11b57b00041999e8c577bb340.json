{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{FaTruck,FaBox,FaCheckCircle,FaClock,FaMapMarkerAlt,FaExternalLinkAlt}from'react-icons/fa';import'../styles/Tracking.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';const TrackingView=_ref=>{var _tracking$events;let{orderId}=_ref;const[tracking,setTracking]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchTracking=async()=>{try{const token=localStorage.getItem('token');const res=await axios.get(\"\".concat(API_URL,\"/tracking/order/\").concat(orderId),{headers:{Authorization:\"Bearer \".concat(token)}});setTracking(res.data);}catch(err){setTracking(null);}finally{setLoading(false);}};if(orderId)fetchTracking();},[orderId]);if(loading)return/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"Cargando seguimiento...\"});if(!tracking)return/*#__PURE__*/_jsx(\"p\",{className:\"no-tracking\",children:\"El pedido se est\\xE1 preparando para el env\\xEDo.\"});const steps=['pendiente','en_preparacion','enviado','en_reparto','entregado'];const currentIdx=steps.indexOf(tracking.currentStatus);return/*#__PURE__*/_jsxs(\"div\",{className:\"tracking-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tracking-header\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"ID Seguimiento: \",/*#__PURE__*/_jsx(\"strong\",{children:tracking.trackingNumber})]}),/*#__PURE__*/_jsx(\"span\",{className:\"carrier-tag\",children:tracking.carrier})]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar-container\",children:steps.map((step,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"progress-step \".concat(i<=currentIdx?'completed':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-circle\",children:i+1}),/*#__PURE__*/_jsx(\"span\",{className:\"step-label\",children:step.replace('_',' ')})]},step))}),/*#__PURE__*/_jsxs(\"div\",{className:\"latest-event\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(FaMapMarkerAlt,{}),\" \\xDAltimo estado: \",tracking.currentStatus.toUpperCase()]}),/*#__PURE__*/_jsx(\"p\",{children:(_tracking$events=tracking.events[tracking.events.length-1])===null||_tracking$events===void 0?void 0:_tracking$events.description}),tracking.estimatedDelivery&&/*#__PURE__*/_jsxs(\"small\",{children:[\"Estimado: \",new Date(tracking.estimatedDelivery).toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(\"a\",{href:\"https://google.com/search?q=tracking+\".concat(tracking.trackingNumber),target:\"_blank\",className:\"btn-external\",children:[/*#__PURE__*/_jsx(FaExternalLinkAlt,{}),\" Rastrear en web oficial\"]})]});};export default TrackingView;","map":{"version":3,"names":["React","useState","useEffect","axios","FaTruck","FaBox","FaCheckCircle","FaClock","FaMapMarkerAlt","FaExternalLinkAlt","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","TrackingView","_ref","_tracking$events","orderId","tracking","setTracking","loading","setLoading","fetchTracking","token","localStorage","getItem","res","get","concat","headers","Authorization","data","err","className","children","steps","currentIdx","indexOf","currentStatus","trackingNumber","carrier","map","step","i","replace","toUpperCase","events","length","description","estimatedDelivery","Date","toLocaleDateString","href","target"],"sources":["C:/Users/ashu_/Documents/ecommerce-sim/frontend/src/components/TrackingView.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { FaTruck, FaBox, FaCheckCircle, FaClock, FaMapMarkerAlt, FaExternalLinkAlt } from 'react-icons/fa';\r\nimport '../styles/Tracking.css';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nconst TrackingView = ({ orderId }) => {\r\n  const [tracking, setTracking] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchTracking = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const res = await axios.get(`${API_URL}/tracking/order/${orderId}`, {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        setTracking(res.data);\r\n      } catch (err) {\r\n        setTracking(null);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    if (orderId) fetchTracking();\r\n  }, [orderId]);\r\n\r\n  if (loading) return <p className=\"loading-text\">Cargando seguimiento...</p>;\r\n  if (!tracking) return <p className=\"no-tracking\">El pedido se está preparando para el envío.</p>;\r\n\r\n  const steps = ['pendiente', 'en_preparacion', 'enviado', 'en_reparto', 'entregado'];\r\n  const currentIdx = steps.indexOf(tracking.currentStatus);\r\n\r\n  return (\r\n    <div className=\"tracking-container\">\r\n      <div className=\"tracking-header\">\r\n        <span>ID Seguimiento: <strong>{tracking.trackingNumber}</strong></span>\r\n        <span className=\"carrier-tag\">{tracking.carrier}</span>\r\n      </div>\r\n\r\n      <div className=\"progress-bar-container\">\r\n        {steps.map((step, i) => (\r\n          <div key={step} className={`progress-step ${i <= currentIdx ? 'completed' : ''}`}>\r\n            <div className=\"step-circle\">{i + 1}</div>\r\n            <span className=\"step-label\">{step.replace('_', ' ')}</span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"latest-event\">\r\n        <h4><FaMapMarkerAlt /> Último estado: {tracking.currentStatus.toUpperCase()}</h4>\r\n        <p>{tracking.events[tracking.events.length - 1]?.description}</p>\r\n        {tracking.estimatedDelivery && (\r\n          <small>Estimado: {new Date(tracking.estimatedDelivery).toLocaleDateString()}</small>\r\n        )}\r\n      </div>\r\n\r\n      <a \r\n        href={`https://google.com/search?q=tracking+${tracking.trackingNumber}`} \r\n        target=\"_blank\" \r\n        className=\"btn-external\"\r\n      >\r\n        <FaExternalLinkAlt /> Rastrear en web oficial\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TrackingView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}