{"ast":null,"code":"import _objectSpread from\"C:/Users/ashu_/Documents/ecommerce-sim/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import axios from'axios';import{FaEdit}from'react-icons/fa';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';const ProfileTab=_ref=>{var _user$address,_user$address2,_user$address3,_user$address4;let{user,login}=_ref;const[editing,setEditing]=useState(false);const[formData,setFormData]=useState({name:(user===null||user===void 0?void 0:user.name)||'',phone:(user===null||user===void 0?void 0:user.phone)||'',street:(user===null||user===void 0?void 0:(_user$address=user.address)===null||_user$address===void 0?void 0:_user$address.street)||'',city:(user===null||user===void 0?void 0:(_user$address2=user.address)===null||_user$address2===void 0?void 0:_user$address2.city)||'',postalCode:(user===null||user===void 0?void 0:(_user$address3=user.address)===null||_user$address3===void 0?void 0:_user$address3.postalCode)||'',country:(user===null||user===void 0?void 0:(_user$address4=user.address)===null||_user$address4===void 0?void 0:_user$address4.country)||'España'});const handleSave=async()=>{try{const token=localStorage.getItem('token');const response=await axios.put(\"\".concat(API_URL,\"/auth/profile\"),{name:formData.name,phone:formData.phone,address:{street:formData.street,city:formData.city,postalCode:formData.postalCode,country:formData.country}},{headers:{Authorization:\"Bearer \".concat(token)}});login(_objectSpread(_objectSpread({},user),response.data),token);setEditing(false);alert('Perfil actualizado');}catch(err){alert('Error al guardar');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-tab\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tab-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Mis Datos\"}),!editing?/*#__PURE__*/_jsxs(\"button\",{className:\"btn-edit\",onClick:()=>setEditing(true),children:[/*#__PURE__*/_jsx(FaEdit,{}),\" Editar\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"edit-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-save\",onClick:handleSave,children:\"Guardar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel\",onClick:()=>setEditing(false),children:\"Cancelar\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:formData.name,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value})),disabled:!editing,placeholder:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{name:\"phone\",value:formData.phone,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{phone:e.target.value})),disabled:!editing,placeholder:\"Tel\\xE9fono\"})]})})]});};export default ProfileTab;","map":{"version":3,"names":["React","useState","axios","FaEdit","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","ProfileTab","_ref","_user$address","_user$address2","_user$address3","_user$address4","user","login","editing","setEditing","formData","setFormData","name","phone","street","address","city","postalCode","country","handleSave","token","localStorage","getItem","response","put","concat","headers","Authorization","_objectSpread","data","alert","err","className","children","onClick","value","onChange","e","target","disabled","placeholder"],"sources":["C:/Users/ashu_/Documents/ecommerce-sim/frontend/src/components/profile/ProfileTab.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { FaEdit } from 'react-icons/fa';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nconst ProfileTab = ({ user, login }) => {\r\n  const [editing, setEditing] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    name: user?.name || '',\r\n    phone: user?.phone || '',\r\n    street: user?.address?.street || '',\r\n    city: user?.address?.city || '',\r\n    postalCode: user?.address?.postalCode || '',\r\n    country: user?.address?.country || 'España'\r\n  });\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await axios.put(`${API_URL}/auth/profile`, {\r\n        name: formData.name, phone: formData.phone,\r\n        address: { street: formData.street, city: formData.city, postalCode: formData.postalCode, country: formData.country }\r\n      }, { headers: { Authorization: `Bearer ${token}` } });\r\n      login({ ...user, ...response.data }, token);\r\n      setEditing(false);\r\n      alert('Perfil actualizado');\r\n    } catch (err) { alert('Error al guardar'); }\r\n  };\r\n\r\n  return (\r\n    <div className=\"profile-tab\">\r\n      <div className=\"tab-header\">\r\n        <h2>Mis Datos</h2>\r\n        {!editing ? <button className=\"btn-edit\" onClick={() => setEditing(true)}><FaEdit /> Editar</button> : \r\n        <div className=\"edit-actions\">\r\n          <button className=\"btn-save\" onClick={handleSave}>Guardar</button>\r\n          <button className=\"btn-cancel\" onClick={() => setEditing(false)}>Cancelar</button>\r\n        </div>}\r\n      </div>\r\n      <div className=\"profile-form\">\r\n        <div className=\"form-grid\">\r\n           <input name=\"name\" value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} disabled={!editing} placeholder=\"Nombre\" />\r\n           <input name=\"phone\" value={formData.phone} onChange={e => setFormData({...formData, phone: e.target.value})} disabled={!editing} placeholder=\"Teléfono\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileTab;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}