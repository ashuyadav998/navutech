{"ast":null,"code":"import _objectSpread from\"C:/Users/ashu_/Documents/ecommerce-sim/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{FaEye,FaEdit,FaPhone,FaTruck,FaFilePdf,FaSync,FaPrint,FaCheckCircle}from'react-icons/fa';import axios from'axios';import'../../styles/AdminOrders.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminOrders=()=>{var _selectedOrder$shippi,_selectedOrder$shippi2,_selectedOrder$shippi3,_selectedOrder$shippi4,_selectedOrder$items,_selectedOrder$items2;const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[refreshing,setRefreshing]=useState(false);const[selectedOrder,setSelectedOrder]=useState(null);const[showDetailModal,setShowDetailModal]=useState(false);const[statusUpdate,setStatusUpdate]=useState({orderStatus:'',paymentStatus:''});const[error,setError]=useState(null);// Refs para controlar notificaciones y evitar bucles\nconst notifiedOrders=useRef(new Set());const isFirstLoad=useRef(true);const API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';// 1. CARGA Y REFRESCO AUTOM√ÅTICO (Sin bloquear la pantalla)\nuseEffect(()=>{loadOrders(true);// Carga inicial con spinner\nconst interval=setInterval(()=>loadOrders(false),30000);// Refrescos silenciosos\nreturn()=>clearInterval(interval);},[]);// 2. MONITOR DE IMPRESI√ìN (Solo para pedidos nuevos reales)\nuseEffect(()=>{const pendingToPrint=orders.find(o=>o.needsPrinting===true&&o.orderStatus==='procesando'&&!notifiedOrders.current.has(o._id));if(pendingToPrint){notifiedOrders.current.add(pendingToPrint._id);// No avisar si es la primera vez que cargamos la p√°gina (evita spam de pedidos viejos)\nif(!isFirstLoad.current){handleAutoPrintPrompt(pendingToPrint);}}},[orders]);const loadOrders=async function(){let initial=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;try{if(initial)setLoading(true);setRefreshing(true);setError(null);const token=localStorage.getItem('token');if(!token){setError('No est√°s autenticado. Por favor, inicia sesi√≥n.');setLoading(false);return;}const response=await axios.get(\"\".concat(API_URL,\"/orders\"),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});const ordersData=Array.isArray(response.data)?response.data:[];setOrders(ordersData);// Si es la carga inicial, marcamos los actuales como \"ya vistos\"\nif(initial){ordersData.forEach(o=>notifiedOrders.current.add(o._id));isFirstLoad.current=false;}}catch(error){var _error$response,_error$response$data;console.error('‚ùå Error al cargar pedidos:',error);if(initial)setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Error al cargar los pedidos');}finally{setLoading(false);setRefreshing(false);}};// --- FUNCIONES DE ETIQUETA ---\nconst handleAutoPrintPrompt=order=>{const audio=new Audio('https://assets.mixkit.co/active_storage/sfx/2358/2358-preview.mp3');audio.play().catch(()=>{});setTimeout(()=>{if(window.confirm(\"\\uD83D\\uDCE6 \\xA1PEDIDO NUEVO! #\".concat(order._id.slice(-6).toUpperCase(),\"\\n\\xBFDeseas imprimir la etiqueta de preparaci\\xF3n ahora?\"))){var _order$tracking;const tId=((_order$tracking=order.tracking)===null||_order$tracking===void 0?void 0:_order$tracking._id)||order.tracking;if(tId){downloadLabel(tId);markAsPrinted(order._id);}}},1000);};const downloadLabel=trackingId=>{const token=localStorage.getItem('token');// ‚≠ê CORRECCI√ìN: Enviamos token por URL para evitar el error de autenticaci√≥n en la pesta√±a nueva\nwindow.open(\"\".concat(API_URL,\"/tracking/label/\").concat(trackingId,\"?token=\").concat(token),'_blank');};const markAsPrinted=async orderId=>{try{const token=localStorage.getItem('token');await axios.put(\"\".concat(API_URL,\"/orders/\").concat(orderId,\"/printed\"),{},{headers:{Authorization:\"Bearer \".concat(token)}});// Actualizaci√≥n local r√°pida para no esperar al servidor\nsetOrders(prev=>prev.map(o=>o._id===orderId?_objectSpread(_objectSpread({},o),{},{needsPrinting:false}):o));}catch(err){console.error(\"Error al marcar como impreso\",err);}};const handleCreateTracking=async orderId=>{const carrier=prompt(\"Introduce el transportista:\",\"SimShip Express\");if(!carrier)return;try{const token=localStorage.getItem('token');await axios.post(\"\".concat(API_URL,\"/tracking/create\"),{orderId,carrier},{headers:{Authorization:\"Bearer \".concat(token)}});alert(\"‚úÖ Tracking generado.\");loadOrders(false);}catch(err){alert(\"Error al generar tracking\");}};// --- FORMATEO Y ESTILOS ---\nconst formatPrice=price=>{return new Intl.NumberFormat('es-ES',{style:'currency',currency:'EUR'}).format(price);};const getStatusBadge=status=>{const statusMap={pendiente:'badge-warning',procesando:'badge-info',enviado:'badge-primary',entregado:'badge-success',cancelado:'badge-danger',pagado:'badge-success',fallido:'badge-danger'};return statusMap[status]||'badge-secondary';};const getStatusLabel=status=>{const labels={pendiente:'Pendiente',procesando:'Procesando',enviado:'Enviado',entregado:'Entregado',cancelado:'Cancelado',pagado:'Pagado',fallido:'Fallido'};return labels[status]||status;};// --- MANEJO DEL MODAL ---\nconst openDetailModal=order=>{setSelectedOrder(order);setStatusUpdate({orderStatus:order.orderStatus,paymentStatus:order.paymentStatus});setShowDetailModal(true);};const closeDetailModal=()=>{setShowDetailModal(false);setSelectedOrder(null);};const handleStatusChange=e=>{setStatusUpdate(_objectSpread(_objectSpread({},statusUpdate),{},{[e.target.name]:e.target.value}));};const updateOrderStatus=async()=>{try{const token=localStorage.getItem('token');await axios.put(\"\".concat(API_URL,\"/orders/\").concat(selectedOrder._id,\"/status\"),statusUpdate,{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});alert('Estado actualizado correctamente');closeDetailModal();loadOrders(false);}catch(error){var _error$response2,_error$response2$data;alert(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Error al actualizar');}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"admin-orders\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-large\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Cargando pedidos...\"})]})});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"admin-orders\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>loadOrders(true),children:\"\\uD83D\\uDD04 Reintentar\"})]})});return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-orders\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Gesti\\xF3n de Pedidos \",refreshing&&/*#__PURE__*/_jsx(\"small\",{style:{fontSize:'12px',marginLeft:'10px'},children:\"\\uD83D\\uDD04 Actualizando...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"orders-stats\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-item\",children:[\"Total: \",/*#__PURE__*/_jsx(\"strong\",{children:orders.length})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-item\",children:[\"Pendientes: \",/*#__PURE__*/_jsx(\"strong\",{children:orders.filter(o=>o.orderStatus==='pendiente').length})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>loadOrders(true),children:\"\\uD83D\\uDD04 Actualizar\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID Pedido\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cliente\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Estado Pago\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Estado Pedido\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Log\\xEDstica / Etiqueta\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(order=>{var _order$user;return/*#__PURE__*/_jsxs(\"tr\",{className:order.needsPrinting?'row-urgent':'',children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"#\",order._id.slice(-8)]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"customer-cell\",children:[/*#__PURE__*/_jsx(\"strong\",{children:((_order$user=order.user)===null||_order$user===void 0?void 0:_order$user.name)||'Usuario'}),/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(FaPhone,{}),\" \",order.phone||'S/T']})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:formatPrice(order.totalAmount)})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(getStatusBadge(order.paymentStatus)),children:getStatusLabel(order.paymentStatus)})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(getStatusBadge(order.orderStatus)),children:getStatusLabel(order.orderStatus)})}),/*#__PURE__*/_jsx(\"td\",{children:!order.tracking?/*#__PURE__*/_jsxs(\"button\",{className:\"btn-table btn-generate\",onClick:()=>handleCreateTracking(order._id),children:[/*#__PURE__*/_jsx(FaTruck,{}),\" Generar Env\\xEDo\"]}):/*#__PURE__*/_jsxs(\"button\",{className:\"btn-table btn-pdf\",onClick:()=>downloadLabel(order.tracking._id||order.tracking),children:[/*#__PURE__*/_jsx(FaPrint,{}),\" Imprimir Etiqueta\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"action-buttons\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-icon btn-view\",onClick:()=>openDetailModal(order),title:\"Ver detalles\",children:/*#__PURE__*/_jsx(FaEye,{})})})})]},order._id);})})]})}),showDetailModal&&selectedOrder&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:closeDetailModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content large\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Detalle del Pedido #\",selectedOrder._id.slice(-8)]}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:closeDetailModal,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-detail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section label-highlight\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDDA8\\uFE0F Documentaci\\xF3n de Env\\xEDo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"label-status-container\",children:[selectedOrder.needsPrinting?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:\"\\u26A0\\uFE0F Etiqueta pendiente de impresi\\xF3n.\"}):/*#__PURE__*/_jsxs(\"p\",{className:\"text-success\",children:[/*#__PURE__*/_jsx(FaCheckCircle,{}),\" Etiqueta procesada correctamente.\"]}),selectedOrder.tracking&&/*#__PURE__*/_jsxs(\"button\",{className:\"btn-print-modal\",onClick:()=>downloadLabel(selectedOrder.tracking._id||selectedOrder.tracking),children:[/*#__PURE__*/_jsx(FaFilePdf,{}),\" DESCARGAR ETIQUETA T\\xC9RMICA\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCCD Direcci\\xF3n de Env\\xEDo\"}),/*#__PURE__*/_jsx(\"div\",{className:\"address-box\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:(_selectedOrder$shippi=selectedOrder.shippingAddress)===null||_selectedOrder$shippi===void 0?void 0:_selectedOrder$shippi.street}),/*#__PURE__*/_jsx(\"br\",{}),(_selectedOrder$shippi2=selectedOrder.shippingAddress)===null||_selectedOrder$shippi2===void 0?void 0:_selectedOrder$shippi2.city,\", \",(_selectedOrder$shippi3=selectedOrder.shippingAddress)===null||_selectedOrder$shippi3===void 0?void 0:_selectedOrder$shippi3.postalCode,/*#__PURE__*/_jsx(\"br\",{}),(_selectedOrder$shippi4=selectedOrder.shippingAddress)===null||_selectedOrder$shippi4===void 0?void 0:_selectedOrder$shippi4.country]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\uD83D\\uDCE6 Productos (\",((_selectedOrder$items=selectedOrder.items)===null||_selectedOrder$items===void 0?void 0:_selectedOrder$items.length)||0,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"order-items\",children:(_selectedOrder$items2=selectedOrder.items)===null||_selectedOrder$items2===void 0?void 0:_selectedOrder$items2.map((item,index)=>{var _item$product;return/*#__PURE__*/_jsxs(\"div\",{className:\"order-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-details\",children:[/*#__PURE__*/_jsx(\"strong\",{children:((_item$product=item.product)===null||_item$product===void 0?void 0:_item$product.name)||'Producto'}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Cantidad: \",item.quantity]})]}),/*#__PURE__*/_jsx(\"strong\",{children:formatPrice(item.price*item.quantity)})]},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u2699\\uFE0F Actualizar Estado\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-update-form\",children:[/*#__PURE__*/_jsxs(\"select\",{name:\"orderStatus\",value:statusUpdate.orderStatus,onChange:handleStatusChange,className:\"form-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"pendiente\",children:\"Pendiente\"}),/*#__PURE__*/_jsx(\"option\",{value:\"procesando\",children:\"Procesando\"}),/*#__PURE__*/_jsx(\"option\",{value:\"enviado\",children:\"Enviado\"}),/*#__PURE__*/_jsx(\"option\",{value:\"entregado\",children:\"Entregado\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelado\",children:\"Cancelado\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:updateOrderStatus,children:[/*#__PURE__*/_jsx(FaEdit,{}),\" Guardar Cambios\"]})]})]})]})]})})]});};export default AdminOrders;","map":{"version":3,"names":["React","useState","useEffect","useRef","FaEye","FaEdit","FaPhone","FaTruck","FaFilePdf","FaSync","FaPrint","FaCheckCircle","axios","jsx","_jsx","jsxs","_jsxs","AdminOrders","_selectedOrder$shippi","_selectedOrder$shippi2","_selectedOrder$shippi3","_selectedOrder$shippi4","_selectedOrder$items","_selectedOrder$items2","orders","setOrders","loading","setLoading","refreshing","setRefreshing","selectedOrder","setSelectedOrder","showDetailModal","setShowDetailModal","statusUpdate","setStatusUpdate","orderStatus","paymentStatus","error","setError","notifiedOrders","Set","isFirstLoad","API_URL","process","env","REACT_APP_API_URL","loadOrders","interval","setInterval","clearInterval","pendingToPrint","find","o","needsPrinting","current","has","_id","add","handleAutoPrintPrompt","initial","arguments","length","undefined","token","localStorage","getItem","response","get","concat","headers","ordersData","Array","isArray","data","forEach","_error$response","_error$response$data","console","message","order","audio","Audio","play","catch","setTimeout","window","confirm","slice","toUpperCase","_order$tracking","tId","tracking","downloadLabel","markAsPrinted","trackingId","open","orderId","put","Authorization","prev","map","_objectSpread","err","handleCreateTracking","carrier","prompt","post","alert","formatPrice","price","Intl","NumberFormat","style","currency","format","getStatusBadge","status","statusMap","pendiente","procesando","enviado","entregado","cancelado","pagado","fallido","getStatusLabel","labels","openDetailModal","closeDetailModal","handleStatusChange","e","target","name","value","updateOrderStatus","_error$response2","_error$response2$data","className","children","onClick","fontSize","marginLeft","filter","_order$user","user","phone","totalAmount","title","stopPropagation","shippingAddress","street","city","postalCode","country","items","item","index","_item$product","product","quantity","onChange"],"sources":["C:/Users/ashu_/Documents/ecommerce-sim/frontend/src/pages/admin/AdminOrders.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { FaEye, FaEdit, FaPhone, FaTruck, FaFilePdf, FaSync, FaPrint, FaCheckCircle } from 'react-icons/fa';\nimport axios from 'axios';\nimport '../../styles/AdminOrders.css';\n\nconst AdminOrders = () => {\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [selectedOrder, setSelectedOrder] = useState(null);\n  const [showDetailModal, setShowDetailModal] = useState(false);\n  const [statusUpdate, setStatusUpdate] = useState({\n    orderStatus: '',\n    paymentStatus: ''\n  });\n  const [error, setError] = useState(null);\n\n  // Refs para controlar notificaciones y evitar bucles\n  const notifiedOrders = useRef(new Set());\n  const isFirstLoad = useRef(true);\n\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n  // 1. CARGA Y REFRESCO AUTOM√ÅTICO (Sin bloquear la pantalla)\n  useEffect(() => {\n    loadOrders(true); // Carga inicial con spinner\n    const interval = setInterval(() => loadOrders(false), 30000); // Refrescos silenciosos\n    return () => clearInterval(interval);\n  }, []);\n\n  // 2. MONITOR DE IMPRESI√ìN (Solo para pedidos nuevos reales)\n  useEffect(() => {\n    const pendingToPrint = orders.find(o => \n      o.needsPrinting === true && \n      o.orderStatus === 'procesando' &&\n      !notifiedOrders.current.has(o._id)\n    );\n\n    if (pendingToPrint) {\n      notifiedOrders.current.add(pendingToPrint._id);\n      // No avisar si es la primera vez que cargamos la p√°gina (evita spam de pedidos viejos)\n      if (!isFirstLoad.current) {\n        handleAutoPrintPrompt(pendingToPrint);\n      }\n    }\n  }, [orders]);\n\n  const loadOrders = async (initial = false) => {\n    try {\n      if (initial) setLoading(true);\n      setRefreshing(true);\n      setError(null);\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        setError('No est√°s autenticado. Por favor, inicia sesi√≥n.');\n        setLoading(false);\n        return;\n      }\n\n      const response = await axios.get(`${API_URL}/orders`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      const ordersData = Array.isArray(response.data) ? response.data : [];\n      setOrders(ordersData);\n\n      // Si es la carga inicial, marcamos los actuales como \"ya vistos\"\n      if (initial) {\n        ordersData.forEach(o => notifiedOrders.current.add(o._id));\n        isFirstLoad.current = false;\n      }\n    } catch (error) {\n      console.error('‚ùå Error al cargar pedidos:', error);\n      if (initial) setError(error.response?.data?.message || 'Error al cargar los pedidos');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  // --- FUNCIONES DE ETIQUETA ---\n  const handleAutoPrintPrompt = (order) => {\n    const audio = new Audio('https://assets.mixkit.co/active_storage/sfx/2358/2358-preview.mp3');\n    audio.play().catch(() => {});\n\n    setTimeout(() => {\n      if (window.confirm(`üì¶ ¬°PEDIDO NUEVO! #${order._id.slice(-6).toUpperCase()}\\n¬øDeseas imprimir la etiqueta de preparaci√≥n ahora?`)) {\n        const tId = order.tracking?._id || order.tracking;\n        if (tId) {\n          downloadLabel(tId);\n          markAsPrinted(order._id);\n        }\n      }\n    }, 1000);\n  };\n\n  const downloadLabel = (trackingId) => {\n    const token = localStorage.getItem('token');\n    // ‚≠ê CORRECCI√ìN: Enviamos token por URL para evitar el error de autenticaci√≥n en la pesta√±a nueva\n    window.open(`${API_URL}/tracking/label/${trackingId}?token=${token}`, '_blank');\n  };\n\n  const markAsPrinted = async (orderId) => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.put(`${API_URL}/orders/${orderId}/printed`, {}, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      // Actualizaci√≥n local r√°pida para no esperar al servidor\n      setOrders(prev => prev.map(o => o._id === orderId ? { ...o, needsPrinting: false } : o));\n    } catch (err) {\n      console.error(\"Error al marcar como impreso\", err);\n    }\n  };\n\n  const handleCreateTracking = async (orderId) => {\n    const carrier = prompt(\"Introduce el transportista:\", \"SimShip Express\");\n    if (!carrier) return;\n    try {\n      const token = localStorage.getItem('token');\n      await axios.post(`${API_URL}/tracking/create`, { orderId, carrier }, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      alert(\"‚úÖ Tracking generado.\");\n      loadOrders(false);\n    } catch (err) {\n      alert(\"Error al generar tracking\");\n    }\n  };\n\n  // --- FORMATEO Y ESTILOS ---\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR' }).format(price);\n  };\n\n  const getStatusBadge = (status) => {\n    const statusMap = {\n      pendiente: 'badge-warning', procesando: 'badge-info', enviado: 'badge-primary',\n      entregado: 'badge-success', cancelado: 'badge-danger', pagado: 'badge-success', fallido: 'badge-danger'\n    };\n    return statusMap[status] || 'badge-secondary';\n  };\n\n  const getStatusLabel = (status) => {\n    const labels = { pendiente: 'Pendiente', procesando: 'Procesando', enviado: 'Enviado', entregado: 'Entregado', cancelado: 'Cancelado', pagado: 'Pagado', fallido: 'Fallido' };\n    return labels[status] || status;\n  };\n\n  // --- MANEJO DEL MODAL ---\n  const openDetailModal = (order) => {\n    setSelectedOrder(order);\n    setStatusUpdate({ orderStatus: order.orderStatus, paymentStatus: order.paymentStatus });\n    setShowDetailModal(true);\n  };\n\n  const closeDetailModal = () => {\n    setShowDetailModal(false);\n    setSelectedOrder(null);\n  };\n\n  const handleStatusChange = (e) => {\n    setStatusUpdate({ ...statusUpdate, [e.target.name]: e.target.value });\n  };\n\n  const updateOrderStatus = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.put(`${API_URL}/orders/${selectedOrder._id}/status`, statusUpdate, {\n        headers: { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json' }\n      });\n      alert('Estado actualizado correctamente');\n      closeDetailModal();\n      loadOrders(false);\n    } catch (error) {\n      alert(error.response?.data?.message || 'Error al actualizar');\n    }\n  };\n\n  if (loading) return <div className=\"admin-orders\"><div className=\"loading-container\"><div className=\"spinner-large\"></div><p>Cargando pedidos...</p></div></div>;\n\n  if (error) return <div className=\"admin-orders\"><div className=\"error-container\"><h3>Error</h3><p>{error}</p><button className=\"btn btn-primary\" onClick={() => loadOrders(true)}>üîÑ Reintentar</button></div></div>;\n\n  return (\n    <div className=\"admin-orders\">\n      <div className=\"page-header\">\n        <h2>Gesti√≥n de Pedidos {refreshing && <small style={{fontSize: '12px', marginLeft: '10px'}}>üîÑ Actualizando...</small>}</h2>\n        <div className=\"orders-stats\">\n          <span className=\"stat-item\">Total: <strong>{orders.length}</strong></span>\n          <span className=\"stat-item\">Pendientes: <strong>{orders.filter(o => o.orderStatus === 'pendiente').length}</strong></span>\n        </div>\n        <button className=\"btn btn-secondary\" onClick={() => loadOrders(true)}>üîÑ Actualizar</button>\n      </div>\n\n      <div className=\"table-responsive\">\n        <table className=\"admin-table\">\n          <thead>\n            <tr>\n              <th>ID Pedido</th>\n              <th>Cliente</th>\n              <th>Total</th>\n              <th>Estado Pago</th>\n              <th>Estado Pedido</th>\n              <th>Log√≠stica / Etiqueta</th>\n              <th>Acciones</th>\n            </tr>\n          </thead>\n          <tbody>\n            {orders.map(order => (\n              <tr key={order._id} className={order.needsPrinting ? 'row-urgent' : ''}>\n                <td><strong>#{order._id.slice(-8)}</strong></td>\n                <td>\n                  <div className=\"customer-cell\">\n                    <strong>{order.user?.name || 'Usuario'}</strong>\n                    <small><FaPhone /> {order.phone || 'S/T'}</small>\n                  </div>\n                </td>\n                <td><strong>{formatPrice(order.totalAmount)}</strong></td>\n                <td><span className={`badge ${getStatusBadge(order.paymentStatus)}`}>{getStatusLabel(order.paymentStatus)}</span></td>\n                <td><span className={`badge ${getStatusBadge(order.orderStatus)}`}>{getStatusLabel(order.orderStatus)}</span></td>\n                \n                <td>\n                  {!order.tracking ? (\n                    <button className=\"btn-table btn-generate\" onClick={() => handleCreateTracking(order._id)}>\n                      <FaTruck /> Generar Env√≠o\n                    </button>\n                  ) : (\n                    <button className=\"btn-table btn-pdf\" onClick={() => downloadLabel(order.tracking._id || order.tracking)}>\n                      <FaPrint /> Imprimir Etiqueta\n                    </button>\n                  )}\n                </td>\n\n                <td>\n                  <div className=\"action-buttons\">\n                    <button className=\"btn-icon btn-view\" onClick={() => openDetailModal(order)} title=\"Ver detalles\">\n                      <FaEye />\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {showDetailModal && selectedOrder && (\n        <div className=\"modal-overlay\" onClick={closeDetailModal}>\n          <div className=\"modal-content large\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h3>Detalle del Pedido #{selectedOrder._id.slice(-8)}</h3>\n              <button className=\"modal-close\" onClick={closeDetailModal}>√ó</button>\n            </div>\n\n            <div className=\"order-detail\">\n              <div className=\"detail-section label-highlight\">\n                <h4>üñ®Ô∏è Documentaci√≥n de Env√≠o</h4>\n                <div className=\"label-status-container\">\n                  {selectedOrder.needsPrinting ? (\n                    <p className=\"text-danger\">‚ö†Ô∏è Etiqueta pendiente de impresi√≥n.</p>\n                  ) : (\n                    <p className=\"text-success\"><FaCheckCircle /> Etiqueta procesada correctamente.</p>\n                  )}\n                  {selectedOrder.tracking && (\n                    <button className=\"btn-print-modal\" onClick={() => downloadLabel(selectedOrder.tracking._id || selectedOrder.tracking)}>\n                      <FaFilePdf /> DESCARGAR ETIQUETA T√âRMICA\n                    </button>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"detail-section\">\n                <h4>üìç Direcci√≥n de Env√≠o</h4>\n                <div className=\"address-box\">\n                  <p>\n                    <strong>{selectedOrder.shippingAddress?.street}</strong><br />\n                    {selectedOrder.shippingAddress?.city}, {selectedOrder.shippingAddress?.postalCode}<br />\n                    {selectedOrder.shippingAddress?.country}\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"detail-section\">\n                <h4>üì¶ Productos ({selectedOrder.items?.length || 0})</h4>\n                <div className=\"order-items\">\n                  {selectedOrder.items?.map((item, index) => (\n                    <div key={index} className=\"order-item\">\n                      <div className=\"item-details\">\n                        <strong>{item.product?.name || 'Producto'}</strong>\n                        <span>Cantidad: {item.quantity}</span>\n                      </div>\n                      <strong>{formatPrice(item.price * item.quantity)}</strong>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"detail-section\">\n                <h4>‚öôÔ∏è Actualizar Estado</h4>\n                <div className=\"status-update-form\">\n                  <select name=\"orderStatus\" value={statusUpdate.orderStatus} onChange={handleStatusChange} className=\"form-select\">\n                    <option value=\"pendiente\">Pendiente</option>\n                    <option value=\"procesando\">Procesando</option>\n                    <option value=\"enviado\">Enviado</option>\n                    <option value=\"entregado\">Entregado</option>\n                    <option value=\"cancelado\">Cancelado</option>\n                  </select>\n                  <button className=\"btn btn-primary\" onClick={updateOrderStatus}><FaEdit /> Guardar Cambios</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdminOrders;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}