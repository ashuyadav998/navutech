{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import axios from'axios';import{io}from'socket.io-client';import'../../styles/AdminChat.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';const SOCKET_URL=API_URL.replace('/api','');let socket=null;const AdminChat=()=>{var _selectedChat$user,_selectedChat$user2,_selectedChat$message,_selectedChat$message2;// ‚úÖ SEPARAR LOS CHATS POR ESTADO\nconst[openChats,setOpenChats]=useState([]);const[closedChats,setClosedChats]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedChat,setSelectedChat]=useState(null);const[message,setMessage]=useState('');const[view,setView]=useState('open');// 'open' o 'closed'\nconst[connected,setConnected]=useState(false);const messagesEndRef=useRef(null);const getToken=()=>{return localStorage.getItem('token')||sessionStorage.getItem('token');};useEffect(()=>{scrollToBottom();},[selectedChat===null||selectedChat===void 0?void 0:selectedChat.messages]);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};useEffect(()=>{const token=getToken();if(!token){setError('No hay sesi√≥n activa');setLoading(false);return;}initializeSocket(token);loadAllChats();// ‚úÖ Cargar TODOS los chats al inicio\n// ‚úÖ Recargar cada 5 segundos\nconst interval=setInterval(loadAllChats,5000);return()=>{clearInterval(interval);};},[]);// ‚úÖ Solo una vez al montar\nconst initializeSocket=token=>{if(socket)return;console.log('üîå [ADMIN] Conectando socket...');socket=io(SOCKET_URL,{transports:['websocket','polling'],reconnection:true,reconnectionAttempts:5,reconnectionDelay:1000});socket.on('connect',()=>{console.log('‚úÖ [ADMIN] Socket conectado:',socket.id);setConnected(true);socket.emit('authenticate',token);});socket.on('disconnect',()=>{console.log('‚ùå [ADMIN] Socket desconectado');setConnected(false);});socket.on('authenticated',data=>{console.log('‚úÖ [ADMIN] Autenticado:',data);});// ‚úÖ NUEVO MENSAJE DE USUARIO\nsocket.on('new_user_message',data=>{console.log('üì® [ADMIN] Nuevo mensaje de usuario:',data);const chat=(data===null||data===void 0?void 0:data.chat)||data;if(chat!==null&&chat!==void 0&&chat._id){handleChatUpdate(chat);}});// ‚úÖ MENSAJE ENVIADO POR ADMIN\nsocket.on('message_sent',data=>{console.log('‚úÖ [ADMIN] Mensaje enviado:',data);if(data!==null&&data!==void 0&&data.success&&data!==null&&data!==void 0&&data.chat){handleChatUpdate(data.chat);}});// ‚úÖ CHAT ACTUALIZADO\nsocket.on('chat_updated',data=>{console.log('üîÑ [ADMIN] Chat actualizado:',data);const chat=(data===null||data===void 0?void 0:data.chat)||data;if(chat!==null&&chat!==void 0&&chat._id){handleChatUpdate(chat);}});// ‚úÖ CHAT CERRADO\nsocket.on('chat_closed',data=>{console.log('üîí [ADMIN] Chat cerrado:',data);const chat=(data===null||data===void 0?void 0:data.chat)||data;if(chat!==null&&chat!==void 0&&chat._id){handleChatClosed(chat);}});socket.on('message_error',data=>{console.error('‚ùå [ADMIN] Error:',data);alert('Error: '+((data===null||data===void 0?void 0:data.message)||'Error desconocido'));});};// ‚úÖ MANEJAR ACTUALIZACI√ìN DE CHAT\nconst handleChatUpdate=updatedChat=>{if(!(updatedChat!==null&&updatedChat!==void 0&&updatedChat._id))return;console.log(\"\\uD83D\\uDD04 Actualizando chat \".concat(updatedChat._id,\", status: \").concat(updatedChat.status));if(updatedChat.status==='open'){// Actualizar en chats abiertos\nsetOpenChats(prev=>{const exists=prev.find(c=>c._id===updatedChat._id);if(exists){return prev.map(c=>c._id===updatedChat._id?updatedChat:c);}else{return[updatedChat,...prev];}});// Quitar de cerrados si estaba ah√≠\nsetClosedChats(prev=>prev.filter(c=>c._id!==updatedChat._id));}else if(updatedChat.status==='closed'){// Mover a cerrados\nsetClosedChats(prev=>{const exists=prev.find(c=>c._id===updatedChat._id);if(exists){return prev.map(c=>c._id===updatedChat._id?updatedChat:c);}else{return[updatedChat,...prev];}});// Quitar de abiertos\nsetOpenChats(prev=>prev.filter(c=>c._id!==updatedChat._id));}// Actualizar chat seleccionado si es el mismo\nsetSelectedChat(prev=>{if((prev===null||prev===void 0?void 0:prev._id)===updatedChat._id){return updatedChat;}return prev;});};// ‚úÖ MANEJAR CIERRE DE CHAT\nconst handleChatClosed=closedChat=>{if(!(closedChat!==null&&closedChat!==void 0&&closedChat._id))return;console.log(\"\\uD83D\\uDD12 Cerrando chat \".concat(closedChat._id));// Mover de abiertos a cerrados\nsetOpenChats(prev=>prev.filter(c=>c._id!==closedChat._id));setClosedChats(prev=>{const exists=prev.find(c=>c._id===closedChat._id);if(!exists){return[closedChat,...prev];}return prev.map(c=>c._id===closedChat._id?closedChat:c);});// Deseleccionar si es el chat actual\nsetSelectedChat(prev=>{if((prev===null||prev===void 0?void 0:prev._id)===closedChat._id){alert('‚úÖ Chat finalizado correctamente');return null;}return prev;});};// ‚úÖ CARGAR TODOS LOS CHATS (abiertos Y cerrados)\nconst loadAllChats=async()=>{try{const token=getToken();if(!token){setError('No hay sesi√≥n activa');setLoading(false);return;}console.log('üì• [ADMIN] Cargando TODOS los chats...');// Cargar sin filtro para obtener todos\nconst response=await axios.get(\"\".concat(API_URL,\"/chat/admin/chats\"),{headers:{'Authorization':\"Bearer \".concat(token)}});const allChats=Array.isArray(response.data)?response.data:[];// ‚úÖ SEPARAR POR ESTADO\nconst open=allChats.filter(c=>c.status==='open');const closed=allChats.filter(c=>c.status==='closed');console.log(\"\\u2705 [ADMIN] Chats cargados:\",{total:allChats.length,abiertos:open.length,cerrados:closed.length});setOpenChats(open);setClosedChats(closed);setError(null);}catch(err){var _err$response;console.error('‚ùå [ADMIN] Error al cargar chats:',err);setError('Error al cargar chats');if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401){alert('Sesi√≥n expirada');window.location.href='/login';}}finally{setLoading(false);}};const sendMessage=e=>{e.preventDefault();if(!message.trim()||!selectedChat||!connected)return;console.log('üì§ [ADMIN] Enviando mensaje...');socket.emit('admin_send_message',{chatId:selectedChat._id,text:message});setMessage('');};const closeChat=async chatId=>{if(!window.confirm('¬øFinalizar esta conversaci√≥n?'))return;try{const token=getToken();console.log('üîí [ADMIN] Cerrando chat:',chatId);await axios.put(\"\".concat(API_URL,\"/chat/admin/close-chat/\").concat(chatId),{},{headers:{'Authorization':\"Bearer \".concat(token)}});console.log('‚úÖ [ADMIN] Chat cerrado correctamente');// ‚úÖ Recargar para sincronizar\nawait loadAllChats();}catch(err){var _err$response2;console.error('‚ùå [ADMIN] Error al cerrar chat:',err);alert('Error al cerrar chat');if(((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status)===401){window.location.href='/login';}}};// ‚úÖ OBTENER CHATS SEG√öN LA VISTA ACTUAL\nconst currentChats=view==='open'?openChats:closedChats;return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-chat-container\",style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px',background:'white',padding:'20px',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.1)'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{margin:'0 0 5px 0'},children:\"\\uD83D\\uDCAC Panel de Soporte\"}),/*#__PURE__*/_jsxs(\"small\",{style:{color:'#666'},children:[\"Abiertos: \",openChats.length,\" \\u2022 Cerrados: \",closedChats.length,\" \\u2022 Total: \",openChats.length+closedChats.length]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px',padding:'10px 20px',background:connected?'#d4edda':'#f8d7da',borderRadius:'25px',fontSize:'14px',fontWeight:'600'},children:[/*#__PURE__*/_jsx(\"span\",{style:{width:'12px',height:'12px',borderRadius:'50%',background:connected?'#28a745':'#dc3545',display:'inline-block',animation:connected?'pulse 2s infinite':'none'}}),connected?'Conectado':'Desconectado']})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginBottom:'20px'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setView('open');setSelectedChat(null);},style:{padding:'12px 24px',borderRadius:'25px',border:'none',background:view==='open'?'linear-gradient(135deg, #667eea 0%, #764ba2 100%)':'#e9ecef',color:view==='open'?'white':'#495057',cursor:'pointer',fontWeight:'bold',fontSize:'15px',transition:'all 0.3s',boxShadow:view==='open'?'0 4px 12px rgba(102,126,234,0.4)':'none'},children:[\"\\uD83D\\uDD25 Chats Activos \",/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'8px',padding:'2px 8px',background:'rgba(255,255,255,0.3)',borderRadius:'12px',fontSize:'13px'},children:openChats.length})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setView('closed');setSelectedChat(null);},style:{padding:'12px 24px',borderRadius:'25px',border:'none',background:view==='closed'?'#2c3e50':'#e9ecef',color:view==='closed'?'white':'#495057',cursor:'pointer',fontWeight:'bold',fontSize:'15px',transition:'all 0.3s',boxShadow:view==='closed'?'0 4px 12px rgba(44,62,80,0.4)':'none'},children:[\"\\uD83D\\uDCC1 Historial \",/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'8px',padding:'2px 8px',background:'rgba(255,255,255,0.3)',borderRadius:'12px',fontSize:'13px'},children:closedChats.length})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#f8d7da',color:'#721c24',padding:'15px 20px',borderRadius:'8px',marginBottom:'20px',border:'1px solid #f5c6cb'},children:[\"\\u26A0\\uFE0F \",error]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'350px 1fr',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',border:'1px solid #dee2e6',height:'70vh',overflowY:'auto',boxShadow:'0 2px 8px rgba(0,0,0,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'15px 20px',borderBottom:'1px solid #dee2e6',background:'#f8f9fa',position:'sticky',top:0,zIndex:10},children:/*#__PURE__*/_jsxs(\"strong\",{style:{fontSize:'15px',color:'#495057'},children:[view==='open'?'üî• En curso':'üìÅ Finalizados',\" (\",currentChats.length,\")\"]})}),loading?/*#__PURE__*/_jsxs(\"div\",{style:{padding:'40px 20px',textAlign:'center',color:'#adb5bd'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'40px',marginBottom:'10px'},children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Cargando...\"})]}):currentChats.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{padding:'60px 20px',textAlign:'center',color:'#adb5bd'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'15px'},children:view==='open'?'üí¨':'üì≠'}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'15px',fontWeight:'500'},children:view==='open'?'No hay chats activos':'No hay historial'}),/*#__PURE__*/_jsx(\"small\",{style:{color:'#ced4da'},children:view==='open'?'Las conversaciones aparecer√°n aqu√≠':'Los chats finalizados aparecer√°n aqu√≠'})]}):currentChats.map(chat=>{var _chat$messages,_chat$user;const lastMessage=(_chat$messages=chat.messages)===null||_chat$messages===void 0?void 0:_chat$messages[chat.messages.length-1];return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setSelectedChat(chat),style:{padding:'15px 20px',borderBottom:'1px solid #f1f3f5',cursor:'pointer',background:(selectedChat===null||selectedChat===void 0?void 0:selectedChat._id)===chat._id?'#e7f3ff':'white',borderLeft:(selectedChat===null||selectedChat===void 0?void 0:selectedChat._id)===chat._id?'4px solid #667eea':'4px solid transparent',transition:'all 0.2s'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'6px'},children:[/*#__PURE__*/_jsx(\"strong\",{style:{color:'#212529'},children:((_chat$user=chat.user)===null||_chat$user===void 0?void 0:_chat$user.name)||'Cliente'}),view==='closed'&&/*#__PURE__*/_jsx(\"span\",{style:{padding:'2px 8px',background:'#d4edda',color:'#155724',fontSize:'10px',borderRadius:'10px',fontWeight:'600'},children:\"\\u2713 CERRADO\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'13px',color:'#6c757d',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis',marginBottom:'4px'},children:(lastMessage===null||lastMessage===void 0?void 0:lastMessage.text)||'Sin mensajes'}),(lastMessage===null||lastMessage===void 0?void 0:lastMessage.timestamp)&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',color:'#adb5bd'},children:new Date(lastMessage.timestamp).toLocaleString('es-ES',{day:'2-digit',month:'2-digit',hour:'2-digit',minute:'2-digit'})})]},chat._id);})]}),/*#__PURE__*/_jsx(\"div\",{style:{background:'white',borderRadius:'12px',border:'1px solid #dee2e6',display:'flex',flexDirection:'column',height:'70vh',boxShadow:'0 2px 8px rgba(0,0,0,0.1)'},children:selectedChat?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',borderBottom:'1px solid #dee2e6',display:'flex',justifyContent:'space-between',alignItems:'center',background:'#f8f9fa'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:'0 0 4px 0',color:'#212529'},children:[((_selectedChat$user=selectedChat.user)===null||_selectedChat$user===void 0?void 0:_selectedChat$user.name)||'Cliente',selectedChat.status==='closed'&&/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'12px',fontSize:'14px',color:'#28a745',fontWeight:'normal'},children:\"\\u2713 Cerrado\"})]}),/*#__PURE__*/_jsx(\"small\",{style:{color:'#6c757d'},children:((_selectedChat$user2=selectedChat.user)===null||_selectedChat$user2===void 0?void 0:_selectedChat$user2.email)||''})]}),selectedChat.status==='open'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>closeChat(selectedChat._id),style:{background:'#dc3545',color:'white',border:'none',padding:'10px 20px',borderRadius:'8px',cursor:'pointer',fontWeight:'600',fontSize:'14px',transition:'all 0.3s',boxShadow:'0 2px 8px rgba(220,53,69,0.3)'},children:\"\\u2713 Finalizar Chat\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,padding:'20px',overflowY:'auto',background:'#f8f9fa'},children:[((_selectedChat$message=selectedChat.messages)===null||_selectedChat$message===void 0?void 0:_selectedChat$message.length)===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',color:'#adb5bd',marginTop:'50px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'10px'},children:\"\\uD83D\\uDCAC\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No hay mensajes\"})]}):(_selectedChat$message2=selectedChat.messages)===null||_selectedChat$message2===void 0?void 0:_selectedChat$message2.map((m,i)=>/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:m.sender==='admin'?'flex-end':'flex-start',marginBottom:'12px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:m.sender==='admin'?'linear-gradient(135deg, #667eea 0%, #764ba2 100%)':'white',color:m.sender==='admin'?'white':'#212529',padding:'12px 16px',borderRadius:'12px',maxWidth:'70%',boxShadow:'0 2px 5px rgba(0,0,0,0.08)',border:m.sender==='admin'?'none':'1px solid #dee2e6'},children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 0 6px 0',wordWrap:'break-word',lineHeight:'1.4'},children:m.text}),/*#__PURE__*/_jsx(\"small\",{style:{fontSize:'10px',opacity:0.7},children:new Date(m.timestamp).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})})]})},i)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),selectedChat.status==='open'?/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendMessage,style:{padding:'20px',borderTop:'1px solid #dee2e6',display:'flex',gap:'12px',background:'white'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:e=>setMessage(e.target.value),placeholder:\"Escribe tu respuesta...\",disabled:!connected,style:{flex:1,padding:'12px 16px',borderRadius:'25px',border:'2px solid #dee2e6',outline:'none',fontSize:'14px',transition:'border-color 0.2s'},onFocus:e=>e.target.style.borderColor='#667eea',onBlur:e=>e.target.style.borderColor='#dee2e6'}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!connected||!message.trim(),style:{background:connected&&message.trim()?'linear-gradient(135deg, #667eea 0%, #764ba2 100%)':'#e9ecef',color:connected&&message.trim()?'white':'#adb5bd',border:'none',padding:'12px 28px',borderRadius:'25px',cursor:connected&&message.trim()?'pointer':'not-allowed',fontWeight:'bold',fontSize:'14px',transition:'all 0.3s',boxShadow:connected&&message.trim()?'0 4px 12px rgba(102,126,234,0.3)':'none'},children:\"Enviar \\u2708\\uFE0F\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',borderTop:'1px solid #dee2e6',textAlign:'center',color:'#6c757d',background:'#f8f9fa',fontSize:'14px'},children:\"\\u2713 Esta conversaci\\xF3n est\\xE1 finalizada\"})]}):/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',height:'100%',color:'#adb5bd'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'64px',marginBottom:'20px'},children:\"\\uD83D\\uDCAC\"}),/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 8px 0',color:'#6c757d'},children:\"Selecciona una conversaci\\xF3n\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'14px'},children:\"Elige un chat de la lista para comenzar\"})]})})]})]});};export default AdminChat;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","io","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","process","env","REACT_APP_API_URL","SOCKET_URL","replace","socket","AdminChat","_selectedChat$user","_selectedChat$user2","_selectedChat$message","_selectedChat$message2","openChats","setOpenChats","closedChats","setClosedChats","loading","setLoading","error","setError","selectedChat","setSelectedChat","message","setMessage","view","setView","connected","setConnected","messagesEndRef","getToken","localStorage","getItem","sessionStorage","scrollToBottom","messages","_messagesEndRef$curre","current","scrollIntoView","behavior","token","initializeSocket","loadAllChats","interval","setInterval","clearInterval","console","log","transports","reconnection","reconnectionAttempts","reconnectionDelay","on","id","emit","data","chat","_id","handleChatUpdate","success","handleChatClosed","alert","updatedChat","concat","status","prev","exists","find","c","map","filter","closedChat","response","get","headers","allChats","Array","isArray","open","closed","total","length","abiertos","cerrados","err","_err$response","window","location","href","sendMessage","e","preventDefault","trim","chatId","text","closeChat","confirm","put","_err$response2","currentChats","className","style","padding","children","display","justifyContent","alignItems","marginBottom","background","borderRadius","boxShadow","margin","color","gap","fontSize","fontWeight","width","height","animation","onClick","border","cursor","transition","marginLeft","gridTemplateColumns","overflowY","borderBottom","position","top","zIndex","textAlign","_chat$messages","_chat$user","lastMessage","borderLeft","user","name","whiteSpace","overflow","textOverflow","timestamp","Date","toLocaleString","day","month","hour","minute","flexDirection","email","flex","marginTop","m","i","sender","maxWidth","wordWrap","lineHeight","opacity","toLocaleTimeString","ref","onSubmit","borderTop","type","value","onChange","target","placeholder","disabled","outline","onFocus","borderColor","onBlur"],"sources":["C:/Users/ashu_/Documents/ecommerce-sim/frontend/src/components/admin/AdminChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport { io } from 'socket.io-client';\r\nimport '../../styles/AdminChat.css';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\nconst SOCKET_URL = API_URL.replace('/api', '');\r\n\r\nlet socket = null;\r\n\r\nconst AdminChat = () => {\r\n  // ‚úÖ SEPARAR LOS CHATS POR ESTADO\r\n  const [openChats, setOpenChats] = useState([]);\r\n  const [closedChats, setClosedChats] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [selectedChat, setSelectedChat] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n  const [view, setView] = useState('open'); // 'open' o 'closed'\r\n  const [connected, setConnected] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  const getToken = () => {\r\n    return localStorage.getItem('token') || sessionStorage.getItem('token');\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [selectedChat?.messages]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const token = getToken();\r\n    if (!token) {\r\n      setError('No hay sesi√≥n activa');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    initializeSocket(token);\r\n    loadAllChats(); // ‚úÖ Cargar TODOS los chats al inicio\r\n\r\n    // ‚úÖ Recargar cada 5 segundos\r\n    const interval = setInterval(loadAllChats, 5000);\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, []); // ‚úÖ Solo una vez al montar\r\n\r\n  const initializeSocket = (token) => {\r\n    if (socket) return;\r\n\r\n    console.log('üîå [ADMIN] Conectando socket...');\r\n    \r\n    socket = io(SOCKET_URL, { \r\n      transports: ['websocket', 'polling'],\r\n      reconnection: true,\r\n      reconnectionAttempts: 5,\r\n      reconnectionDelay: 1000\r\n    });\r\n\r\n    socket.on('connect', () => {\r\n      console.log('‚úÖ [ADMIN] Socket conectado:', socket.id);\r\n      setConnected(true);\r\n      socket.emit('authenticate', token);\r\n    });\r\n\r\n    socket.on('disconnect', () => {\r\n      console.log('‚ùå [ADMIN] Socket desconectado');\r\n      setConnected(false);\r\n    });\r\n\r\n    socket.on('authenticated', (data) => {\r\n      console.log('‚úÖ [ADMIN] Autenticado:', data);\r\n    });\r\n\r\n    // ‚úÖ NUEVO MENSAJE DE USUARIO\r\n    socket.on('new_user_message', (data) => {\r\n      console.log('üì® [ADMIN] Nuevo mensaje de usuario:', data);\r\n      const chat = data?.chat || data;\r\n      if (chat?._id) {\r\n        handleChatUpdate(chat);\r\n      }\r\n    });\r\n\r\n    // ‚úÖ MENSAJE ENVIADO POR ADMIN\r\n    socket.on('message_sent', (data) => {\r\n      console.log('‚úÖ [ADMIN] Mensaje enviado:', data);\r\n      if (data?.success && data?.chat) {\r\n        handleChatUpdate(data.chat);\r\n      }\r\n    });\r\n\r\n    // ‚úÖ CHAT ACTUALIZADO\r\n    socket.on('chat_updated', (data) => {\r\n      console.log('üîÑ [ADMIN] Chat actualizado:', data);\r\n      const chat = data?.chat || data;\r\n      if (chat?._id) {\r\n        handleChatUpdate(chat);\r\n      }\r\n    });\r\n\r\n    // ‚úÖ CHAT CERRADO\r\n    socket.on('chat_closed', (data) => {\r\n      console.log('üîí [ADMIN] Chat cerrado:', data);\r\n      const chat = data?.chat || data;\r\n      if (chat?._id) {\r\n        handleChatClosed(chat);\r\n      }\r\n    });\r\n\r\n    socket.on('message_error', (data) => {\r\n      console.error('‚ùå [ADMIN] Error:', data);\r\n      alert('Error: ' + (data?.message || 'Error desconocido'));\r\n    });\r\n  };\r\n\r\n  // ‚úÖ MANEJAR ACTUALIZACI√ìN DE CHAT\r\n  const handleChatUpdate = (updatedChat) => {\r\n    if (!updatedChat?._id) return;\r\n\r\n    console.log(`üîÑ Actualizando chat ${updatedChat._id}, status: ${updatedChat.status}`);\r\n\r\n    if (updatedChat.status === 'open') {\r\n      // Actualizar en chats abiertos\r\n      setOpenChats(prev => {\r\n        const exists = prev.find(c => c._id === updatedChat._id);\r\n        if (exists) {\r\n          return prev.map(c => c._id === updatedChat._id ? updatedChat : c);\r\n        } else {\r\n          return [updatedChat, ...prev];\r\n        }\r\n      });\r\n      \r\n      // Quitar de cerrados si estaba ah√≠\r\n      setClosedChats(prev => prev.filter(c => c._id !== updatedChat._id));\r\n      \r\n    } else if (updatedChat.status === 'closed') {\r\n      // Mover a cerrados\r\n      setClosedChats(prev => {\r\n        const exists = prev.find(c => c._id === updatedChat._id);\r\n        if (exists) {\r\n          return prev.map(c => c._id === updatedChat._id ? updatedChat : c);\r\n        } else {\r\n          return [updatedChat, ...prev];\r\n        }\r\n      });\r\n      \r\n      // Quitar de abiertos\r\n      setOpenChats(prev => prev.filter(c => c._id !== updatedChat._id));\r\n    }\r\n\r\n    // Actualizar chat seleccionado si es el mismo\r\n    setSelectedChat(prev => {\r\n      if (prev?._id === updatedChat._id) {\r\n        return updatedChat;\r\n      }\r\n      return prev;\r\n    });\r\n  };\r\n\r\n  // ‚úÖ MANEJAR CIERRE DE CHAT\r\n  const handleChatClosed = (closedChat) => {\r\n    if (!closedChat?._id) return;\r\n\r\n    console.log(`üîí Cerrando chat ${closedChat._id}`);\r\n\r\n    // Mover de abiertos a cerrados\r\n    setOpenChats(prev => prev.filter(c => c._id !== closedChat._id));\r\n    \r\n    setClosedChats(prev => {\r\n      const exists = prev.find(c => c._id === closedChat._id);\r\n      if (!exists) {\r\n        return [closedChat, ...prev];\r\n      }\r\n      return prev.map(c => c._id === closedChat._id ? closedChat : c);\r\n    });\r\n\r\n    // Deseleccionar si es el chat actual\r\n    setSelectedChat(prev => {\r\n      if (prev?._id === closedChat._id) {\r\n        alert('‚úÖ Chat finalizado correctamente');\r\n        return null;\r\n      }\r\n      return prev;\r\n    });\r\n  };\r\n\r\n  // ‚úÖ CARGAR TODOS LOS CHATS (abiertos Y cerrados)\r\n  const loadAllChats = async () => {\r\n    try {\r\n      const token = getToken();\r\n      if (!token) {\r\n        setError('No hay sesi√≥n activa');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      console.log('üì• [ADMIN] Cargando TODOS los chats...');\r\n\r\n      // Cargar sin filtro para obtener todos\r\n      const response = await axios.get(`${API_URL}/chat/admin/chats`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      const allChats = Array.isArray(response.data) ? response.data : [];\r\n      \r\n      // ‚úÖ SEPARAR POR ESTADO\r\n      const open = allChats.filter(c => c.status === 'open');\r\n      const closed = allChats.filter(c => c.status === 'closed');\r\n      \r\n      console.log(`‚úÖ [ADMIN] Chats cargados:`, {\r\n        total: allChats.length,\r\n        abiertos: open.length,\r\n        cerrados: closed.length\r\n      });\r\n      \r\n      setOpenChats(open);\r\n      setClosedChats(closed);\r\n      setError(null);\r\n      \r\n    } catch (err) {\r\n      console.error('‚ùå [ADMIN] Error al cargar chats:', err);\r\n      setError('Error al cargar chats');\r\n      \r\n      if (err.response?.status === 401) {\r\n        alert('Sesi√≥n expirada');\r\n        window.location.href = '/login';\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!message.trim() || !selectedChat || !connected) return;\r\n\r\n    console.log('üì§ [ADMIN] Enviando mensaje...');\r\n\r\n    socket.emit('admin_send_message', {\r\n      chatId: selectedChat._id,\r\n      text: message\r\n    });\r\n\r\n    setMessage('');\r\n  };\r\n\r\n  const closeChat = async (chatId) => {\r\n    if (!window.confirm('¬øFinalizar esta conversaci√≥n?')) return;\r\n    \r\n    try {\r\n      const token = getToken();\r\n      \r\n      console.log('üîí [ADMIN] Cerrando chat:', chatId);\r\n\r\n      await axios.put(\r\n        `${API_URL}/chat/admin/close-chat/${chatId}`, \r\n        {}, \r\n        { headers: { 'Authorization': `Bearer ${token}` } }\r\n      );\r\n\r\n      console.log('‚úÖ [ADMIN] Chat cerrado correctamente');\r\n      \r\n      // ‚úÖ Recargar para sincronizar\r\n      await loadAllChats();\r\n      \r\n    } catch (err) {\r\n      console.error('‚ùå [ADMIN] Error al cerrar chat:', err);\r\n      alert('Error al cerrar chat');\r\n      \r\n      if (err.response?.status === 401) {\r\n        window.location.href = '/login';\r\n      }\r\n    }\r\n  };\r\n\r\n  // ‚úÖ OBTENER CHATS SEG√öN LA VISTA ACTUAL\r\n  const currentChats = view === 'open' ? openChats : closedChats;\r\n\r\n  return (\r\n    <div className=\"admin-chat-container\" style={{ padding: '20px' }}>\r\n      {/* HEADER */}\r\n      <div style={{ \r\n        display: 'flex', \r\n        justifyContent: 'space-between', \r\n        alignItems: 'center', \r\n        marginBottom: '20px',\r\n        background: 'white',\r\n        padding: '20px',\r\n        borderRadius: '12px',\r\n        boxShadow: '0 2px 8px rgba(0,0,0,0.1)'\r\n      }}>\r\n        <div>\r\n          <h1 style={{ margin: '0 0 5px 0' }}>üí¨ Panel de Soporte</h1>\r\n          <small style={{ color: '#666' }}>\r\n            Abiertos: {openChats.length} ‚Ä¢ Cerrados: {closedChats.length} ‚Ä¢ Total: {openChats.length + closedChats.length}\r\n          </small>\r\n        </div>\r\n        <div style={{ \r\n          display: 'flex', \r\n          alignItems: 'center', \r\n          gap: '10px',\r\n          padding: '10px 20px',\r\n          background: connected ? '#d4edda' : '#f8d7da',\r\n          borderRadius: '25px',\r\n          fontSize: '14px',\r\n          fontWeight: '600'\r\n        }}>\r\n          <span style={{ \r\n            width: '12px', \r\n            height: '12px', \r\n            borderRadius: '50%', \r\n            background: connected ? '#28a745' : '#dc3545',\r\n            display: 'inline-block',\r\n            animation: connected ? 'pulse 2s infinite' : 'none'\r\n          }}></span>\r\n          {connected ? 'Conectado' : 'Desconectado'}\r\n        </div>\r\n      </div>\r\n\r\n      {/* FILTROS */}\r\n      <div style={{ display: 'flex', gap: '10px', marginBottom: '20px' }}>\r\n        <button \r\n          onClick={() => {\r\n            setView('open');\r\n            setSelectedChat(null);\r\n          }}\r\n          style={{\r\n            padding: '12px 24px', \r\n            borderRadius: '25px', \r\n            border: 'none',\r\n            background: view === 'open' ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : '#e9ecef',\r\n            color: view === 'open' ? 'white' : '#495057',\r\n            cursor: 'pointer', \r\n            fontWeight: 'bold',\r\n            fontSize: '15px',\r\n            transition: 'all 0.3s',\r\n            boxShadow: view === 'open' ? '0 4px 12px rgba(102,126,234,0.4)' : 'none'\r\n          }}\r\n        >\r\n          üî• Chats Activos <span style={{ \r\n            marginLeft: '8px',\r\n            padding: '2px 8px',\r\n            background: 'rgba(255,255,255,0.3)',\r\n            borderRadius: '12px',\r\n            fontSize: '13px'\r\n          }}>{openChats.length}</span>\r\n        </button>\r\n        \r\n        <button \r\n          onClick={() => {\r\n            setView('closed');\r\n            setSelectedChat(null);\r\n          }}\r\n          style={{\r\n            padding: '12px 24px', \r\n            borderRadius: '25px', \r\n            border: 'none',\r\n            background: view === 'closed' ? '#2c3e50' : '#e9ecef',\r\n            color: view === 'closed' ? 'white' : '#495057',\r\n            cursor: 'pointer', \r\n            fontWeight: 'bold',\r\n            fontSize: '15px',\r\n            transition: 'all 0.3s',\r\n            boxShadow: view === 'closed' ? '0 4px 12px rgba(44,62,80,0.4)' : 'none'\r\n          }}\r\n        >\r\n          üìÅ Historial <span style={{ \r\n            marginLeft: '8px',\r\n            padding: '2px 8px',\r\n            background: 'rgba(255,255,255,0.3)',\r\n            borderRadius: '12px',\r\n            fontSize: '13px'\r\n          }}>{closedChats.length}</span>\r\n        </button>\r\n      </div>\r\n\r\n      {error && (\r\n        <div style={{ \r\n          background: '#f8d7da', \r\n          color: '#721c24', \r\n          padding: '15px 20px', \r\n          borderRadius: '8px', \r\n          marginBottom: '20px',\r\n          border: '1px solid #f5c6cb'\r\n        }}>\r\n          ‚ö†Ô∏è {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* LAYOUT */}\r\n      <div style={{ display: 'grid', gridTemplateColumns: '350px 1fr', gap: '20px' }}>\r\n        {/* LISTA DE CHATS */}\r\n        <div style={{ \r\n          background: 'white', \r\n          borderRadius: '12px', \r\n          border: '1px solid #dee2e6', \r\n          height: '70vh', \r\n          overflowY: 'auto',\r\n          boxShadow: '0 2px 8px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <div style={{ \r\n            padding: '15px 20px', \r\n            borderBottom: '1px solid #dee2e6', \r\n            background: '#f8f9fa',\r\n            position: 'sticky',\r\n            top: 0,\r\n            zIndex: 10\r\n          }}>\r\n            <strong style={{ fontSize: '15px', color: '#495057' }}>\r\n              {view === 'open' ? 'üî• En curso' : 'üìÅ Finalizados'} ({currentChats.length})\r\n            </strong>\r\n          </div>\r\n          \r\n          {loading ? (\r\n            <div style={{ padding: '40px 20px', textAlign: 'center', color: '#adb5bd' }}>\r\n              <div style={{ fontSize: '40px', marginBottom: '10px' }}>‚è≥</div>\r\n              <p>Cargando...</p>\r\n            </div>\r\n          ) : currentChats.length === 0 ? (\r\n            <div style={{ padding: '60px 20px', textAlign: 'center', color: '#adb5bd' }}>\r\n              <div style={{ fontSize: '48px', marginBottom: '15px' }}>\r\n                {view === 'open' ? 'üí¨' : 'üì≠'}\r\n              </div>\r\n              <p style={{ margin: 0, fontSize: '15px', fontWeight: '500' }}>\r\n                {view === 'open' ? 'No hay chats activos' : 'No hay historial'}\r\n              </p>\r\n              <small style={{ color: '#ced4da' }}>\r\n                {view === 'open' ? 'Las conversaciones aparecer√°n aqu√≠' : 'Los chats finalizados aparecer√°n aqu√≠'}\r\n              </small>\r\n            </div>\r\n          ) : (\r\n            currentChats.map(chat => {\r\n              const lastMessage = chat.messages?.[chat.messages.length - 1];\r\n\r\n              return (\r\n                <div \r\n                  key={chat._id}\r\n                  onClick={() => setSelectedChat(chat)}\r\n                  style={{\r\n                    padding: '15px 20px', \r\n                    borderBottom: '1px solid #f1f3f5', \r\n                    cursor: 'pointer',\r\n                    background: selectedChat?._id === chat._id ? '#e7f3ff' : 'white',\r\n                    borderLeft: selectedChat?._id === chat._id ? '4px solid #667eea' : '4px solid transparent',\r\n                    transition: 'all 0.2s'\r\n                  }}\r\n                >\r\n                  <div style={{ \r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                    marginBottom: '6px'\r\n                  }}>\r\n                    <strong style={{ color: '#212529' }}>\r\n                      {chat.user?.name || 'Cliente'}\r\n                    </strong>\r\n                    {view === 'closed' && (\r\n                      <span style={{ \r\n                        padding: '2px 8px', \r\n                        background: '#d4edda', \r\n                        color: '#155724', \r\n                        fontSize: '10px', \r\n                        borderRadius: '10px',\r\n                        fontWeight: '600'\r\n                      }}>\r\n                        ‚úì CERRADO\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  <div style={{ \r\n                    fontSize: '13px', \r\n                    color: '#6c757d', \r\n                    whiteSpace: 'nowrap', \r\n                    overflow: 'hidden', \r\n                    textOverflow: 'ellipsis',\r\n                    marginBottom: '4px'\r\n                  }}>\r\n                    {lastMessage?.text || 'Sin mensajes'}\r\n                  </div>\r\n                  {lastMessage?.timestamp && (\r\n                    <div style={{ fontSize: '11px', color: '#adb5bd' }}>\r\n                      {new Date(lastMessage.timestamp).toLocaleString('es-ES', {\r\n                        day: '2-digit',\r\n                        month: '2-digit',\r\n                        hour: '2-digit',\r\n                        minute: '2-digit'\r\n                      })}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              );\r\n            })\r\n          )}\r\n        </div>\r\n\r\n        {/* CONVERSACI√ìN */}\r\n        <div style={{ \r\n          background: 'white', \r\n          borderRadius: '12px', \r\n          border: '1px solid #dee2e6', \r\n          display: 'flex', \r\n          flexDirection: 'column', \r\n          height: '70vh',\r\n          boxShadow: '0 2px 8px rgba(0,0,0,0.1)'\r\n        }}>\r\n          {selectedChat ? (\r\n            <>\r\n              {/* Header */}\r\n              <div style={{ \r\n                padding: '20px', \r\n                borderBottom: '1px solid #dee2e6', \r\n                display: 'flex', \r\n                justifyContent: 'space-between', \r\n                alignItems: 'center',\r\n                background: '#f8f9fa'\r\n              }}>\r\n                <div>\r\n                  <h3 style={{ margin: '0 0 4px 0', color: '#212529' }}>\r\n                    {selectedChat.user?.name || 'Cliente'}\r\n                    {selectedChat.status === 'closed' && (\r\n                      <span style={{ \r\n                        marginLeft: '12px', \r\n                        fontSize: '14px', \r\n                        color: '#28a745',\r\n                        fontWeight: 'normal'\r\n                      }}>\r\n                        ‚úì Cerrado\r\n                      </span>\r\n                    )}\r\n                  </h3>\r\n                  <small style={{ color: '#6c757d' }}>{selectedChat.user?.email || ''}</small>\r\n                </div>\r\n                {selectedChat.status === 'open' && (\r\n                  <button \r\n                    onClick={() => closeChat(selectedChat._id)} \r\n                    style={{ \r\n                      background: '#dc3545', \r\n                      color: 'white', \r\n                      border: 'none', \r\n                      padding: '10px 20px', \r\n                      borderRadius: '8px', \r\n                      cursor: 'pointer', \r\n                      fontWeight: '600',\r\n                      fontSize: '14px',\r\n                      transition: 'all 0.3s',\r\n                      boxShadow: '0 2px 8px rgba(220,53,69,0.3)'\r\n                    }}\r\n                  >\r\n                    ‚úì Finalizar Chat\r\n                  </button>\r\n                )}\r\n              </div>\r\n              \r\n              {/* Mensajes */}\r\n              <div style={{ \r\n                flex: 1, \r\n                padding: '20px', \r\n                overflowY: 'auto', \r\n                background: '#f8f9fa' \r\n              }}>\r\n                {selectedChat.messages?.length === 0 ? (\r\n                  <div style={{ textAlign: 'center', color: '#adb5bd', marginTop: '50px' }}>\r\n                    <div style={{ fontSize: '48px', marginBottom: '10px' }}>üí¨</div>\r\n                    <p>No hay mensajes</p>\r\n                  </div>\r\n                ) : (\r\n                  selectedChat.messages?.map((m, i) => (\r\n                    <div \r\n                      key={i} \r\n                      style={{ \r\n                        display: 'flex', \r\n                        justifyContent: m.sender === 'admin' ? 'flex-end' : 'flex-start', \r\n                        marginBottom: '12px'\r\n                      }}\r\n                    >\r\n                      <div style={{ \r\n                        background: m.sender === 'admin' \r\n                          ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'\r\n                          : 'white', \r\n                        color: m.sender === 'admin' ? 'white' : '#212529',\r\n                        padding: '12px 16px', \r\n                        borderRadius: '12px', \r\n                        maxWidth: '70%',\r\n                        boxShadow: '0 2px 5px rgba(0,0,0,0.08)',\r\n                        border: m.sender === 'admin' ? 'none' : '1px solid #dee2e6'\r\n                      }}>\r\n                        <p style={{ margin: '0 0 6px 0', wordWrap: 'break-word', lineHeight: '1.4' }}>\r\n                          {m.text}\r\n                        </p>\r\n                        <small style={{ fontSize: '10px', opacity: 0.7 }}>\r\n                          {new Date(m.timestamp).toLocaleTimeString([], { \r\n                            hour: '2-digit', \r\n                            minute: '2-digit' \r\n                          })}\r\n                        </small>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                )}\r\n                <div ref={messagesEndRef} />\r\n              </div>\r\n\r\n              {/* Input */}\r\n              {selectedChat.status === 'open' ? (\r\n                <form \r\n                  onSubmit={sendMessage} \r\n                  style={{ \r\n                    padding: '20px', \r\n                    borderTop: '1px solid #dee2e6', \r\n                    display: 'flex', \r\n                    gap: '12px',\r\n                    background: 'white'\r\n                  }}\r\n                >\r\n                  <input \r\n                    type=\"text\" \r\n                    value={message} \r\n                    onChange={(e) => setMessage(e.target.value)}\r\n                    placeholder=\"Escribe tu respuesta...\"\r\n                    disabled={!connected}\r\n                    style={{ \r\n                      flex: 1, \r\n                      padding: '12px 16px', \r\n                      borderRadius: '25px', \r\n                      border: '2px solid #dee2e6', \r\n                      outline: 'none',\r\n                      fontSize: '14px',\r\n                      transition: 'border-color 0.2s'\r\n                    }}\r\n                    onFocus={(e) => e.target.style.borderColor = '#667eea'}\r\n                    onBlur={(e) => e.target.style.borderColor = '#dee2e6'}\r\n                  />\r\n                  <button \r\n                    type=\"submit\" \r\n                    disabled={!connected || !message.trim()}\r\n                    style={{ \r\n                      background: connected && message.trim() \r\n                        ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'\r\n                        : '#e9ecef', \r\n                      color: connected && message.trim() ? 'white' : '#adb5bd', \r\n                      border: 'none', \r\n                      padding: '12px 28px', \r\n                      borderRadius: '25px', \r\n                      cursor: connected && message.trim() ? 'pointer' : 'not-allowed', \r\n                      fontWeight: 'bold',\r\n                      fontSize: '14px',\r\n                      transition: 'all 0.3s',\r\n                      boxShadow: connected && message.trim() ? '0 4px 12px rgba(102,126,234,0.3)' : 'none'\r\n                    }}\r\n                  >\r\n                    Enviar ‚úàÔ∏è\r\n                  </button>\r\n                </form>\r\n              ) : (\r\n                <div style={{\r\n                  padding: '20px',\r\n                  borderTop: '1px solid #dee2e6',\r\n                  textAlign: 'center',\r\n                  color: '#6c757d',\r\n                  background: '#f8f9fa',\r\n                  fontSize: '14px'\r\n                }}>\r\n                  ‚úì Esta conversaci√≥n est√° finalizada\r\n                </div>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <div style={{ \r\n              display: 'flex', \r\n              flexDirection: 'column', \r\n              alignItems: 'center', \r\n              justifyContent: 'center', \r\n              height: '100%', \r\n              color: '#adb5bd' \r\n            }}>\r\n              <div style={{ fontSize: '64px', marginBottom: '20px' }}>üí¨</div>\r\n              <h3 style={{ margin: '0 0 8px 0', color: '#6c757d' }}>\r\n                Selecciona una conversaci√≥n\r\n              </h3>\r\n              <p style={{ margin: 0, fontSize: '14px' }}>\r\n                Elige un chat de la lista para comenzar\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminChat;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,EAAE,KAAQ,kBAAkB,CACrC,MAAO,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEpC,KAAM,CAAAC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,2BAA2B,CAC5E,KAAM,CAAAC,UAAU,CAAGJ,OAAO,CAACK,OAAO,CAAC,MAAM,CAAE,EAAE,CAAC,CAE9C,GAAI,CAAAC,MAAM,CAAG,IAAI,CAEjB,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,KAAAC,kBAAA,CAAAC,mBAAA,CAAAC,qBAAA,CAAAC,sBAAA,CACtB;AACA,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGxB,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACyB,WAAW,CAAEC,cAAc,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAAC2B,OAAO,CAAEC,UAAU,CAAC,CAAG5B,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC6B,KAAK,CAAEC,QAAQ,CAAC,CAAG9B,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAC+B,YAAY,CAAEC,eAAe,CAAC,CAAGhC,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACiC,OAAO,CAAEC,UAAU,CAAC,CAAGlC,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACmC,IAAI,CAAEC,OAAO,CAAC,CAAGpC,QAAQ,CAAC,MAAM,CAAC,CAAE;AAC1C,KAAM,CAACqC,SAAS,CAAEC,YAAY,CAAC,CAAGtC,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAAAuC,cAAc,CAAGrC,MAAM,CAAC,IAAI,CAAC,CAEnC,KAAM,CAAAsC,QAAQ,CAAGA,CAAA,GAAM,CACrB,MAAO,CAAAC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAIC,cAAc,CAACD,OAAO,CAAC,OAAO,CAAC,CACzE,CAAC,CAEDzC,SAAS,CAAC,IAAM,CACd2C,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,CAACb,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEc,QAAQ,CAAC,CAAC,CAE5B,KAAM,CAAAD,cAAc,CAAGA,CAAA,GAAM,KAAAE,qBAAA,CAC3B,CAAAA,qBAAA,CAAAP,cAAc,CAACQ,OAAO,UAAAD,qBAAA,iBAAtBA,qBAAA,CAAwBE,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CAChE,CAAC,CAEDhD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiD,KAAK,CAAGV,QAAQ,CAAC,CAAC,CACxB,GAAI,CAACU,KAAK,CAAE,CACVpB,QAAQ,CAAC,sBAAsB,CAAC,CAChCF,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEAuB,gBAAgB,CAACD,KAAK,CAAC,CACvBE,YAAY,CAAC,CAAC,CAAE;AAEhB;AACA,KAAM,CAAAC,QAAQ,CAAGC,WAAW,CAACF,YAAY,CAAE,IAAI,CAAC,CAEhD,MAAO,IAAM,CACXG,aAAa,CAACF,QAAQ,CAAC,CACzB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAAE;AAER,KAAM,CAAAF,gBAAgB,CAAID,KAAK,EAAK,CAClC,GAAIjC,MAAM,CAAE,OAEZuC,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAE9CxC,MAAM,CAAGb,EAAE,CAACW,UAAU,CAAE,CACtB2C,UAAU,CAAE,CAAC,WAAW,CAAE,SAAS,CAAC,CACpCC,YAAY,CAAE,IAAI,CAClBC,oBAAoB,CAAE,CAAC,CACvBC,iBAAiB,CAAE,IACrB,CAAC,CAAC,CAEF5C,MAAM,CAAC6C,EAAE,CAAC,SAAS,CAAE,IAAM,CACzBN,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAExC,MAAM,CAAC8C,EAAE,CAAC,CACrDzB,YAAY,CAAC,IAAI,CAAC,CAClBrB,MAAM,CAAC+C,IAAI,CAAC,cAAc,CAAEd,KAAK,CAAC,CACpC,CAAC,CAAC,CAEFjC,MAAM,CAAC6C,EAAE,CAAC,YAAY,CAAE,IAAM,CAC5BN,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC,CAC5CnB,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAAC,CAEFrB,MAAM,CAAC6C,EAAE,CAAC,eAAe,CAAGG,IAAI,EAAK,CACnCT,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEQ,IAAI,CAAC,CAC7C,CAAC,CAAC,CAEF;AACAhD,MAAM,CAAC6C,EAAE,CAAC,kBAAkB,CAAGG,IAAI,EAAK,CACtCT,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAEQ,IAAI,CAAC,CACzD,KAAM,CAAAC,IAAI,CAAG,CAAAD,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEC,IAAI,GAAID,IAAI,CAC/B,GAAIC,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEC,GAAG,CAAE,CACbC,gBAAgB,CAACF,IAAI,CAAC,CACxB,CACF,CAAC,CAAC,CAEF;AACAjD,MAAM,CAAC6C,EAAE,CAAC,cAAc,CAAGG,IAAI,EAAK,CAClCT,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAEQ,IAAI,CAAC,CAC/C,GAAIA,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEI,OAAO,EAAIJ,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEC,IAAI,CAAE,CAC/BE,gBAAgB,CAACH,IAAI,CAACC,IAAI,CAAC,CAC7B,CACF,CAAC,CAAC,CAEF;AACAjD,MAAM,CAAC6C,EAAE,CAAC,cAAc,CAAGG,IAAI,EAAK,CAClCT,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAEQ,IAAI,CAAC,CACjD,KAAM,CAAAC,IAAI,CAAG,CAAAD,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEC,IAAI,GAAID,IAAI,CAC/B,GAAIC,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEC,GAAG,CAAE,CACbC,gBAAgB,CAACF,IAAI,CAAC,CACxB,CACF,CAAC,CAAC,CAEF;AACAjD,MAAM,CAAC6C,EAAE,CAAC,aAAa,CAAGG,IAAI,EAAK,CACjCT,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEQ,IAAI,CAAC,CAC7C,KAAM,CAAAC,IAAI,CAAG,CAAAD,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEC,IAAI,GAAID,IAAI,CAC/B,GAAIC,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEC,GAAG,CAAE,CACbG,gBAAgB,CAACJ,IAAI,CAAC,CACxB,CACF,CAAC,CAAC,CAEFjD,MAAM,CAAC6C,EAAE,CAAC,eAAe,CAAGG,IAAI,EAAK,CACnCT,OAAO,CAAC3B,KAAK,CAAC,kBAAkB,CAAEoC,IAAI,CAAC,CACvCM,KAAK,CAAC,SAAS,EAAI,CAAAN,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEhC,OAAO,GAAI,mBAAmB,CAAC,CAAC,CAC3D,CAAC,CAAC,CACJ,CAAC,CAED;AACA,KAAM,CAAAmC,gBAAgB,CAAII,WAAW,EAAK,CACxC,GAAI,EAACA,WAAW,SAAXA,WAAW,WAAXA,WAAW,CAAEL,GAAG,EAAE,OAEvBX,OAAO,CAACC,GAAG,mCAAAgB,MAAA,CAAyBD,WAAW,CAACL,GAAG,eAAAM,MAAA,CAAaD,WAAW,CAACE,MAAM,CAAE,CAAC,CAErF,GAAIF,WAAW,CAACE,MAAM,GAAK,MAAM,CAAE,CACjC;AACAlD,YAAY,CAACmD,IAAI,EAAI,CACnB,KAAM,CAAAC,MAAM,CAAGD,IAAI,CAACE,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACX,GAAG,GAAKK,WAAW,CAACL,GAAG,CAAC,CACxD,GAAIS,MAAM,CAAE,CACV,MAAO,CAAAD,IAAI,CAACI,GAAG,CAACD,CAAC,EAAIA,CAAC,CAACX,GAAG,GAAKK,WAAW,CAACL,GAAG,CAAGK,WAAW,CAAGM,CAAC,CAAC,CACnE,CAAC,IAAM,CACL,MAAO,CAACN,WAAW,CAAE,GAAGG,IAAI,CAAC,CAC/B,CACF,CAAC,CAAC,CAEF;AACAjD,cAAc,CAACiD,IAAI,EAAIA,IAAI,CAACK,MAAM,CAACF,CAAC,EAAIA,CAAC,CAACX,GAAG,GAAKK,WAAW,CAACL,GAAG,CAAC,CAAC,CAErE,CAAC,IAAM,IAAIK,WAAW,CAACE,MAAM,GAAK,QAAQ,CAAE,CAC1C;AACAhD,cAAc,CAACiD,IAAI,EAAI,CACrB,KAAM,CAAAC,MAAM,CAAGD,IAAI,CAACE,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACX,GAAG,GAAKK,WAAW,CAACL,GAAG,CAAC,CACxD,GAAIS,MAAM,CAAE,CACV,MAAO,CAAAD,IAAI,CAACI,GAAG,CAACD,CAAC,EAAIA,CAAC,CAACX,GAAG,GAAKK,WAAW,CAACL,GAAG,CAAGK,WAAW,CAAGM,CAAC,CAAC,CACnE,CAAC,IAAM,CACL,MAAO,CAACN,WAAW,CAAE,GAAGG,IAAI,CAAC,CAC/B,CACF,CAAC,CAAC,CAEF;AACAnD,YAAY,CAACmD,IAAI,EAAIA,IAAI,CAACK,MAAM,CAACF,CAAC,EAAIA,CAAC,CAACX,GAAG,GAAKK,WAAW,CAACL,GAAG,CAAC,CAAC,CACnE,CAEA;AACAnC,eAAe,CAAC2C,IAAI,EAAI,CACtB,GAAI,CAAAA,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAER,GAAG,IAAKK,WAAW,CAACL,GAAG,CAAE,CACjC,MAAO,CAAAK,WAAW,CACpB,CACA,MAAO,CAAAG,IAAI,CACb,CAAC,CAAC,CACJ,CAAC,CAED;AACA,KAAM,CAAAL,gBAAgB,CAAIW,UAAU,EAAK,CACvC,GAAI,EAACA,UAAU,SAAVA,UAAU,WAAVA,UAAU,CAAEd,GAAG,EAAE,OAEtBX,OAAO,CAACC,GAAG,+BAAAgB,MAAA,CAAqBQ,UAAU,CAACd,GAAG,CAAE,CAAC,CAEjD;AACA3C,YAAY,CAACmD,IAAI,EAAIA,IAAI,CAACK,MAAM,CAACF,CAAC,EAAIA,CAAC,CAACX,GAAG,GAAKc,UAAU,CAACd,GAAG,CAAC,CAAC,CAEhEzC,cAAc,CAACiD,IAAI,EAAI,CACrB,KAAM,CAAAC,MAAM,CAAGD,IAAI,CAACE,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACX,GAAG,GAAKc,UAAU,CAACd,GAAG,CAAC,CACvD,GAAI,CAACS,MAAM,CAAE,CACX,MAAO,CAACK,UAAU,CAAE,GAAGN,IAAI,CAAC,CAC9B,CACA,MAAO,CAAAA,IAAI,CAACI,GAAG,CAACD,CAAC,EAAIA,CAAC,CAACX,GAAG,GAAKc,UAAU,CAACd,GAAG,CAAGc,UAAU,CAAGH,CAAC,CAAC,CACjE,CAAC,CAAC,CAEF;AACA9C,eAAe,CAAC2C,IAAI,EAAI,CACtB,GAAI,CAAAA,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAER,GAAG,IAAKc,UAAU,CAACd,GAAG,CAAE,CAChCI,KAAK,CAAC,iCAAiC,CAAC,CACxC,MAAO,KAAI,CACb,CACA,MAAO,CAAAI,IAAI,CACb,CAAC,CAAC,CACJ,CAAC,CAED;AACA,KAAM,CAAAvB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAF,KAAK,CAAGV,QAAQ,CAAC,CAAC,CACxB,GAAI,CAACU,KAAK,CAAE,CACVpB,QAAQ,CAAC,sBAAsB,CAAC,CAChCF,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA4B,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC,CAErD;AACA,KAAM,CAAAyB,QAAQ,CAAG,KAAM,CAAA/E,KAAK,CAACgF,GAAG,IAAAV,MAAA,CAAI9D,OAAO,sBAAqB,CAC9DyE,OAAO,CAAE,CAAE,eAAe,WAAAX,MAAA,CAAYvB,KAAK,CAAG,CAChD,CAAC,CAAC,CAEF,KAAM,CAAAmC,QAAQ,CAAGC,KAAK,CAACC,OAAO,CAACL,QAAQ,CAACjB,IAAI,CAAC,CAAGiB,QAAQ,CAACjB,IAAI,CAAG,EAAE,CAElE;AACA,KAAM,CAAAuB,IAAI,CAAGH,QAAQ,CAACL,MAAM,CAACF,CAAC,EAAIA,CAAC,CAACJ,MAAM,GAAK,MAAM,CAAC,CACtD,KAAM,CAAAe,MAAM,CAAGJ,QAAQ,CAACL,MAAM,CAACF,CAAC,EAAIA,CAAC,CAACJ,MAAM,GAAK,QAAQ,CAAC,CAE1DlB,OAAO,CAACC,GAAG,kCAA8B,CACvCiC,KAAK,CAAEL,QAAQ,CAACM,MAAM,CACtBC,QAAQ,CAAEJ,IAAI,CAACG,MAAM,CACrBE,QAAQ,CAAEJ,MAAM,CAACE,MACnB,CAAC,CAAC,CAEFnE,YAAY,CAACgE,IAAI,CAAC,CAClB9D,cAAc,CAAC+D,MAAM,CAAC,CACtB3D,QAAQ,CAAC,IAAI,CAAC,CAEhB,CAAE,MAAOgE,GAAG,CAAE,KAAAC,aAAA,CACZvC,OAAO,CAAC3B,KAAK,CAAC,kCAAkC,CAAEiE,GAAG,CAAC,CACtDhE,QAAQ,CAAC,uBAAuB,CAAC,CAEjC,GAAI,EAAAiE,aAAA,CAAAD,GAAG,CAACZ,QAAQ,UAAAa,aAAA,iBAAZA,aAAA,CAAcrB,MAAM,IAAK,GAAG,CAAE,CAChCH,KAAK,CAAC,iBAAiB,CAAC,CACxByB,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACjC,CACF,CAAC,OAAS,CACRtE,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAuE,WAAW,CAAIC,CAAC,EAAK,CACzBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,GAAI,CAACpE,OAAO,CAACqE,IAAI,CAAC,CAAC,EAAI,CAACvE,YAAY,EAAI,CAACM,SAAS,CAAE,OAEpDmB,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC,CAE7CxC,MAAM,CAAC+C,IAAI,CAAC,oBAAoB,CAAE,CAChCuC,MAAM,CAAExE,YAAY,CAACoC,GAAG,CACxBqC,IAAI,CAAEvE,OACR,CAAC,CAAC,CAEFC,UAAU,CAAC,EAAE,CAAC,CAChB,CAAC,CAED,KAAM,CAAAuE,SAAS,CAAG,KAAO,CAAAF,MAAM,EAAK,CAClC,GAAI,CAACP,MAAM,CAACU,OAAO,CAAC,+BAA+B,CAAC,CAAE,OAEtD,GAAI,CACF,KAAM,CAAAxD,KAAK,CAAGV,QAAQ,CAAC,CAAC,CAExBgB,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAE8C,MAAM,CAAC,CAEhD,KAAM,CAAApG,KAAK,CAACwG,GAAG,IAAAlC,MAAA,CACV9D,OAAO,4BAAA8D,MAAA,CAA0B8B,MAAM,EAC1C,CAAC,CAAC,CACF,CAAEnB,OAAO,CAAE,CAAE,eAAe,WAAAX,MAAA,CAAYvB,KAAK,CAAG,CAAE,CACpD,CAAC,CAEDM,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC,CAEnD;AACA,KAAM,CAAAL,YAAY,CAAC,CAAC,CAEtB,CAAE,MAAO0C,GAAG,CAAE,KAAAc,cAAA,CACZpD,OAAO,CAAC3B,KAAK,CAAC,iCAAiC,CAAEiE,GAAG,CAAC,CACrDvB,KAAK,CAAC,sBAAsB,CAAC,CAE7B,GAAI,EAAAqC,cAAA,CAAAd,GAAG,CAACZ,QAAQ,UAAA0B,cAAA,iBAAZA,cAAA,CAAclC,MAAM,IAAK,GAAG,CAAE,CAChCsB,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACjC,CACF,CACF,CAAC,CAED;AACA,KAAM,CAAAW,YAAY,CAAG1E,IAAI,GAAK,MAAM,CAAGZ,SAAS,CAAGE,WAAW,CAE9D,mBACEjB,KAAA,QAAKsG,SAAS,CAAC,sBAAsB,CAACC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAC,QAAA,eAE/DzG,KAAA,QAAKuG,KAAK,CAAE,CACVG,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,eAAe,CAC/BC,UAAU,CAAE,QAAQ,CACpBC,YAAY,CAAE,MAAM,CACpBC,UAAU,CAAE,OAAO,CACnBN,OAAO,CAAE,MAAM,CACfO,YAAY,CAAE,MAAM,CACpBC,SAAS,CAAE,2BACb,CAAE,CAAAP,QAAA,eACAzG,KAAA,QAAAyG,QAAA,eACE3G,IAAA,OAAIyG,KAAK,CAAE,CAAEU,MAAM,CAAE,WAAY,CAAE,CAAAR,QAAA,CAAC,+BAAmB,CAAI,CAAC,cAC5DzG,KAAA,UAAOuG,KAAK,CAAE,CAAEW,KAAK,CAAE,MAAO,CAAE,CAAAT,QAAA,EAAC,YACrB,CAAC1F,SAAS,CAACoE,MAAM,CAAC,oBAAa,CAAClE,WAAW,CAACkE,MAAM,CAAC,iBAAU,CAACpE,SAAS,CAACoE,MAAM,CAAGlE,WAAW,CAACkE,MAAM,EACxG,CAAC,EACL,CAAC,cACNnF,KAAA,QAAKuG,KAAK,CAAE,CACVG,OAAO,CAAE,MAAM,CACfE,UAAU,CAAE,QAAQ,CACpBO,GAAG,CAAE,MAAM,CACXX,OAAO,CAAE,WAAW,CACpBM,UAAU,CAAEjF,SAAS,CAAG,SAAS,CAAG,SAAS,CAC7CkF,YAAY,CAAE,MAAM,CACpBK,QAAQ,CAAE,MAAM,CAChBC,UAAU,CAAE,KACd,CAAE,CAAAZ,QAAA,eACA3G,IAAA,SAAMyG,KAAK,CAAE,CACXe,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,MAAM,CACdR,YAAY,CAAE,KAAK,CACnBD,UAAU,CAAEjF,SAAS,CAAG,SAAS,CAAG,SAAS,CAC7C6E,OAAO,CAAE,cAAc,CACvBc,SAAS,CAAE3F,SAAS,CAAG,mBAAmB,CAAG,MAC/C,CAAE,CAAO,CAAC,CACTA,SAAS,CAAG,WAAW,CAAG,cAAc,EACtC,CAAC,EACH,CAAC,cAGN7B,KAAA,QAAKuG,KAAK,CAAE,CAAEG,OAAO,CAAE,MAAM,CAAES,GAAG,CAAE,MAAM,CAAEN,YAAY,CAAE,MAAO,CAAE,CAAAJ,QAAA,eACjEzG,KAAA,WACEyH,OAAO,CAAEA,CAAA,GAAM,CACb7F,OAAO,CAAC,MAAM,CAAC,CACfJ,eAAe,CAAC,IAAI,CAAC,CACvB,CAAE,CACF+E,KAAK,CAAE,CACLC,OAAO,CAAE,WAAW,CACpBO,YAAY,CAAE,MAAM,CACpBW,MAAM,CAAE,MAAM,CACdZ,UAAU,CAAEnF,IAAI,GAAK,MAAM,CAAG,mDAAmD,CAAG,SAAS,CAC7FuF,KAAK,CAAEvF,IAAI,GAAK,MAAM,CAAG,OAAO,CAAG,SAAS,CAC5CgG,MAAM,CAAE,SAAS,CACjBN,UAAU,CAAE,MAAM,CAClBD,QAAQ,CAAE,MAAM,CAChBQ,UAAU,CAAE,UAAU,CACtBZ,SAAS,CAAErF,IAAI,GAAK,MAAM,CAAG,kCAAkC,CAAG,MACpE,CAAE,CAAA8E,QAAA,EACH,6BACkB,cAAA3G,IAAA,SAAMyG,KAAK,CAAE,CAC5BsB,UAAU,CAAE,KAAK,CACjBrB,OAAO,CAAE,SAAS,CAClBM,UAAU,CAAE,uBAAuB,CACnCC,YAAY,CAAE,MAAM,CACpBK,QAAQ,CAAE,MACZ,CAAE,CAAAX,QAAA,CAAE1F,SAAS,CAACoE,MAAM,CAAO,CAAC,EACtB,CAAC,cAETnF,KAAA,WACEyH,OAAO,CAAEA,CAAA,GAAM,CACb7F,OAAO,CAAC,QAAQ,CAAC,CACjBJ,eAAe,CAAC,IAAI,CAAC,CACvB,CAAE,CACF+E,KAAK,CAAE,CACLC,OAAO,CAAE,WAAW,CACpBO,YAAY,CAAE,MAAM,CACpBW,MAAM,CAAE,MAAM,CACdZ,UAAU,CAAEnF,IAAI,GAAK,QAAQ,CAAG,SAAS,CAAG,SAAS,CACrDuF,KAAK,CAAEvF,IAAI,GAAK,QAAQ,CAAG,OAAO,CAAG,SAAS,CAC9CgG,MAAM,CAAE,SAAS,CACjBN,UAAU,CAAE,MAAM,CAClBD,QAAQ,CAAE,MAAM,CAChBQ,UAAU,CAAE,UAAU,CACtBZ,SAAS,CAAErF,IAAI,GAAK,QAAQ,CAAG,+BAA+B,CAAG,MACnE,CAAE,CAAA8E,QAAA,EACH,yBACc,cAAA3G,IAAA,SAAMyG,KAAK,CAAE,CACxBsB,UAAU,CAAE,KAAK,CACjBrB,OAAO,CAAE,SAAS,CAClBM,UAAU,CAAE,uBAAuB,CACnCC,YAAY,CAAE,MAAM,CACpBK,QAAQ,CAAE,MACZ,CAAE,CAAAX,QAAA,CAAExF,WAAW,CAACkE,MAAM,CAAO,CAAC,EACxB,CAAC,EACN,CAAC,CAEL9D,KAAK,eACJrB,KAAA,QAAKuG,KAAK,CAAE,CACVO,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,SAAS,CAChBV,OAAO,CAAE,WAAW,CACpBO,YAAY,CAAE,KAAK,CACnBF,YAAY,CAAE,MAAM,CACpBa,MAAM,CAAE,mBACV,CAAE,CAAAjB,QAAA,EAAC,eACE,CAACpF,KAAK,EACN,CACN,cAGDrB,KAAA,QAAKuG,KAAK,CAAE,CAAEG,OAAO,CAAE,MAAM,CAAEoB,mBAAmB,CAAE,WAAW,CAAEX,GAAG,CAAE,MAAO,CAAE,CAAAV,QAAA,eAE7EzG,KAAA,QAAKuG,KAAK,CAAE,CACVO,UAAU,CAAE,OAAO,CACnBC,YAAY,CAAE,MAAM,CACpBW,MAAM,CAAE,mBAAmB,CAC3BH,MAAM,CAAE,MAAM,CACdQ,SAAS,CAAE,MAAM,CACjBf,SAAS,CAAE,2BACb,CAAE,CAAAP,QAAA,eACA3G,IAAA,QAAKyG,KAAK,CAAE,CACVC,OAAO,CAAE,WAAW,CACpBwB,YAAY,CAAE,mBAAmB,CACjClB,UAAU,CAAE,SAAS,CACrBmB,QAAQ,CAAE,QAAQ,CAClBC,GAAG,CAAE,CAAC,CACNC,MAAM,CAAE,EACV,CAAE,CAAA1B,QAAA,cACAzG,KAAA,WAAQuG,KAAK,CAAE,CAAEa,QAAQ,CAAE,MAAM,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAT,QAAA,EACnD9E,IAAI,GAAK,MAAM,CAAG,aAAa,CAAG,gBAAgB,CAAC,IAAE,CAAC0E,YAAY,CAAClB,MAAM,CAAC,GAC7E,EAAQ,CAAC,CACN,CAAC,CAELhE,OAAO,cACNnB,KAAA,QAAKuG,KAAK,CAAE,CAAEC,OAAO,CAAE,WAAW,CAAE4B,SAAS,CAAE,QAAQ,CAAElB,KAAK,CAAE,SAAU,CAAE,CAAAT,QAAA,eAC1E3G,IAAA,QAAKyG,KAAK,CAAE,CAAEa,QAAQ,CAAE,MAAM,CAAEP,YAAY,CAAE,MAAO,CAAE,CAAAJ,QAAA,CAAC,QAAC,CAAK,CAAC,cAC/D3G,IAAA,MAAA2G,QAAA,CAAG,aAAW,CAAG,CAAC,EACf,CAAC,CACJJ,YAAY,CAAClB,MAAM,GAAK,CAAC,cAC3BnF,KAAA,QAAKuG,KAAK,CAAE,CAAEC,OAAO,CAAE,WAAW,CAAE4B,SAAS,CAAE,QAAQ,CAAElB,KAAK,CAAE,SAAU,CAAE,CAAAT,QAAA,eAC1E3G,IAAA,QAAKyG,KAAK,CAAE,CAAEa,QAAQ,CAAE,MAAM,CAAEP,YAAY,CAAE,MAAO,CAAE,CAAAJ,QAAA,CACpD9E,IAAI,GAAK,MAAM,CAAG,IAAI,CAAG,IAAI,CAC3B,CAAC,cACN7B,IAAA,MAAGyG,KAAK,CAAE,CAAEU,MAAM,CAAE,CAAC,CAAEG,QAAQ,CAAE,MAAM,CAAEC,UAAU,CAAE,KAAM,CAAE,CAAAZ,QAAA,CAC1D9E,IAAI,GAAK,MAAM,CAAG,sBAAsB,CAAG,kBAAkB,CAC7D,CAAC,cACJ7B,IAAA,UAAOyG,KAAK,CAAE,CAAEW,KAAK,CAAE,SAAU,CAAE,CAAAT,QAAA,CAChC9E,IAAI,GAAK,MAAM,CAAG,oCAAoC,CAAG,uCAAuC,CAC5F,CAAC,EACL,CAAC,CAEN0E,YAAY,CAAC9B,GAAG,CAACb,IAAI,EAAI,KAAA2E,cAAA,CAAAC,UAAA,CACvB,KAAM,CAAAC,WAAW,EAAAF,cAAA,CAAG3E,IAAI,CAACrB,QAAQ,UAAAgG,cAAA,iBAAbA,cAAA,CAAgB3E,IAAI,CAACrB,QAAQ,CAAC8C,MAAM,CAAG,CAAC,CAAC,CAE7D,mBACEnF,KAAA,QAEEyH,OAAO,CAAEA,CAAA,GAAMjG,eAAe,CAACkC,IAAI,CAAE,CACrC6C,KAAK,CAAE,CACLC,OAAO,CAAE,WAAW,CACpBwB,YAAY,CAAE,mBAAmB,CACjCL,MAAM,CAAE,SAAS,CACjBb,UAAU,CAAE,CAAAvF,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEoC,GAAG,IAAKD,IAAI,CAACC,GAAG,CAAG,SAAS,CAAG,OAAO,CAChE6E,UAAU,CAAE,CAAAjH,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEoC,GAAG,IAAKD,IAAI,CAACC,GAAG,CAAG,mBAAmB,CAAG,uBAAuB,CAC1FiE,UAAU,CAAE,UACd,CAAE,CAAAnB,QAAA,eAEFzG,KAAA,QAAKuG,KAAK,CAAE,CACVG,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,eAAe,CAC/BC,UAAU,CAAE,QAAQ,CACpBC,YAAY,CAAE,KAChB,CAAE,CAAAJ,QAAA,eACA3G,IAAA,WAAQyG,KAAK,CAAE,CAAEW,KAAK,CAAE,SAAU,CAAE,CAAAT,QAAA,CACjC,EAAA6B,UAAA,CAAA5E,IAAI,CAAC+E,IAAI,UAAAH,UAAA,iBAATA,UAAA,CAAWI,IAAI,GAAI,SAAS,CACvB,CAAC,CACR/G,IAAI,GAAK,QAAQ,eAChB7B,IAAA,SAAMyG,KAAK,CAAE,CACXC,OAAO,CAAE,SAAS,CAClBM,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,SAAS,CAChBE,QAAQ,CAAE,MAAM,CAChBL,YAAY,CAAE,MAAM,CACpBM,UAAU,CAAE,KACd,CAAE,CAAAZ,QAAA,CAAC,gBAEH,CAAM,CACP,EACE,CAAC,cACN3G,IAAA,QAAKyG,KAAK,CAAE,CACVa,QAAQ,CAAE,MAAM,CAChBF,KAAK,CAAE,SAAS,CAChByB,UAAU,CAAE,QAAQ,CACpBC,QAAQ,CAAE,QAAQ,CAClBC,YAAY,CAAE,UAAU,CACxBhC,YAAY,CAAE,KAChB,CAAE,CAAAJ,QAAA,CACC,CAAA8B,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEvC,IAAI,GAAI,cAAc,CACjC,CAAC,CACL,CAAAuC,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEO,SAAS,gBACrBhJ,IAAA,QAAKyG,KAAK,CAAE,CAAEa,QAAQ,CAAE,MAAM,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAT,QAAA,CAChD,GAAI,CAAAsC,IAAI,CAACR,WAAW,CAACO,SAAS,CAAC,CAACE,cAAc,CAAC,OAAO,CAAE,CACvDC,GAAG,CAAE,SAAS,CACdC,KAAK,CAAE,SAAS,CAChBC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SACV,CAAC,CAAC,CACC,CACN,GApDI1F,IAAI,CAACC,GAqDP,CAAC,CAEV,CAAC,CACF,EACE,CAAC,cAGN7D,IAAA,QAAKyG,KAAK,CAAE,CACVO,UAAU,CAAE,OAAO,CACnBC,YAAY,CAAE,MAAM,CACpBW,MAAM,CAAE,mBAAmB,CAC3BhB,OAAO,CAAE,MAAM,CACf2C,aAAa,CAAE,QAAQ,CACvB9B,MAAM,CAAE,MAAM,CACdP,SAAS,CAAE,2BACb,CAAE,CAAAP,QAAA,CACClF,YAAY,cACXvB,KAAA,CAAAE,SAAA,EAAAuG,QAAA,eAEEzG,KAAA,QAAKuG,KAAK,CAAE,CACVC,OAAO,CAAE,MAAM,CACfwB,YAAY,CAAE,mBAAmB,CACjCtB,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,eAAe,CAC/BC,UAAU,CAAE,QAAQ,CACpBE,UAAU,CAAE,SACd,CAAE,CAAAL,QAAA,eACAzG,KAAA,QAAAyG,QAAA,eACEzG,KAAA,OAAIuG,KAAK,CAAE,CAAEU,MAAM,CAAE,WAAW,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAT,QAAA,EAClD,EAAA9F,kBAAA,CAAAY,YAAY,CAACkH,IAAI,UAAA9H,kBAAA,iBAAjBA,kBAAA,CAAmB+H,IAAI,GAAI,SAAS,CACpCnH,YAAY,CAAC2C,MAAM,GAAK,QAAQ,eAC/BpE,IAAA,SAAMyG,KAAK,CAAE,CACXsB,UAAU,CAAE,MAAM,CAClBT,QAAQ,CAAE,MAAM,CAChBF,KAAK,CAAE,SAAS,CAChBG,UAAU,CAAE,QACd,CAAE,CAAAZ,QAAA,CAAC,gBAEH,CAAM,CACP,EACC,CAAC,cACL3G,IAAA,UAAOyG,KAAK,CAAE,CAAEW,KAAK,CAAE,SAAU,CAAE,CAAAT,QAAA,CAAE,EAAA7F,mBAAA,CAAAW,YAAY,CAACkH,IAAI,UAAA7H,mBAAA,iBAAjBA,mBAAA,CAAmB0I,KAAK,GAAI,EAAE,CAAQ,CAAC,EACzE,CAAC,CACL/H,YAAY,CAAC2C,MAAM,GAAK,MAAM,eAC7BpE,IAAA,WACE2H,OAAO,CAAEA,CAAA,GAAMxB,SAAS,CAAC1E,YAAY,CAACoC,GAAG,CAAE,CAC3C4C,KAAK,CAAE,CACLO,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,OAAO,CACdQ,MAAM,CAAE,MAAM,CACdlB,OAAO,CAAE,WAAW,CACpBO,YAAY,CAAE,KAAK,CACnBY,MAAM,CAAE,SAAS,CACjBN,UAAU,CAAE,KAAK,CACjBD,QAAQ,CAAE,MAAM,CAChBQ,UAAU,CAAE,UAAU,CACtBZ,SAAS,CAAE,+BACb,CAAE,CAAAP,QAAA,CACH,uBAED,CAAQ,CACT,EACE,CAAC,cAGNzG,KAAA,QAAKuG,KAAK,CAAE,CACVgD,IAAI,CAAE,CAAC,CACP/C,OAAO,CAAE,MAAM,CACfuB,SAAS,CAAE,MAAM,CACjBjB,UAAU,CAAE,SACd,CAAE,CAAAL,QAAA,EACC,EAAA5F,qBAAA,CAAAU,YAAY,CAACc,QAAQ,UAAAxB,qBAAA,iBAArBA,qBAAA,CAAuBsE,MAAM,IAAK,CAAC,cAClCnF,KAAA,QAAKuG,KAAK,CAAE,CAAE6B,SAAS,CAAE,QAAQ,CAAElB,KAAK,CAAE,SAAS,CAAEsC,SAAS,CAAE,MAAO,CAAE,CAAA/C,QAAA,eACvE3G,IAAA,QAAKyG,KAAK,CAAE,CAAEa,QAAQ,CAAE,MAAM,CAAEP,YAAY,CAAE,MAAO,CAAE,CAAAJ,QAAA,CAAC,cAAE,CAAK,CAAC,cAChE3G,IAAA,MAAA2G,QAAA,CAAG,iBAAe,CAAG,CAAC,EACnB,CAAC,EAAA3F,sBAAA,CAENS,YAAY,CAACc,QAAQ,UAAAvB,sBAAA,iBAArBA,sBAAA,CAAuByD,GAAG,CAAC,CAACkF,CAAC,CAAEC,CAAC,gBAC9B5J,IAAA,QAEEyG,KAAK,CAAE,CACLG,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE8C,CAAC,CAACE,MAAM,GAAK,OAAO,CAAG,UAAU,CAAG,YAAY,CAChE9C,YAAY,CAAE,MAChB,CAAE,CAAAJ,QAAA,cAEFzG,KAAA,QAAKuG,KAAK,CAAE,CACVO,UAAU,CAAE2C,CAAC,CAACE,MAAM,GAAK,OAAO,CAC5B,mDAAmD,CACnD,OAAO,CACXzC,KAAK,CAAEuC,CAAC,CAACE,MAAM,GAAK,OAAO,CAAG,OAAO,CAAG,SAAS,CACjDnD,OAAO,CAAE,WAAW,CACpBO,YAAY,CAAE,MAAM,CACpB6C,QAAQ,CAAE,KAAK,CACf5C,SAAS,CAAE,4BAA4B,CACvCU,MAAM,CAAE+B,CAAC,CAACE,MAAM,GAAK,OAAO,CAAG,MAAM,CAAG,mBAC1C,CAAE,CAAAlD,QAAA,eACA3G,IAAA,MAAGyG,KAAK,CAAE,CAAEU,MAAM,CAAE,WAAW,CAAE4C,QAAQ,CAAE,YAAY,CAAEC,UAAU,CAAE,KAAM,CAAE,CAAArD,QAAA,CAC1EgD,CAAC,CAACzD,IAAI,CACN,CAAC,cACJlG,IAAA,UAAOyG,KAAK,CAAE,CAAEa,QAAQ,CAAE,MAAM,CAAE2C,OAAO,CAAE,GAAI,CAAE,CAAAtD,QAAA,CAC9C,GAAI,CAAAsC,IAAI,CAACU,CAAC,CAACX,SAAS,CAAC,CAACkB,kBAAkB,CAAC,EAAE,CAAE,CAC5Cb,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SACV,CAAC,CAAC,CACG,CAAC,EACL,CAAC,EA3BDM,CA4BF,CACN,CACF,cACD5J,IAAA,QAAKmK,GAAG,CAAElI,cAAe,CAAE,CAAC,EACzB,CAAC,CAGLR,YAAY,CAAC2C,MAAM,GAAK,MAAM,cAC7BlE,KAAA,SACEkK,QAAQ,CAAEvE,WAAY,CACtBY,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACf2D,SAAS,CAAE,mBAAmB,CAC9BzD,OAAO,CAAE,MAAM,CACfS,GAAG,CAAE,MAAM,CACXL,UAAU,CAAE,OACd,CAAE,CAAAL,QAAA,eAEF3G,IAAA,UACEsK,IAAI,CAAC,MAAM,CACXC,KAAK,CAAE5I,OAAQ,CACf6I,QAAQ,CAAG1E,CAAC,EAAKlE,UAAU,CAACkE,CAAC,CAAC2E,MAAM,CAACF,KAAK,CAAE,CAC5CG,WAAW,CAAC,yBAAyB,CACrCC,QAAQ,CAAE,CAAC5I,SAAU,CACrB0E,KAAK,CAAE,CACLgD,IAAI,CAAE,CAAC,CACP/C,OAAO,CAAE,WAAW,CACpBO,YAAY,CAAE,MAAM,CACpBW,MAAM,CAAE,mBAAmB,CAC3BgD,OAAO,CAAE,MAAM,CACftD,QAAQ,CAAE,MAAM,CAChBQ,UAAU,CAAE,mBACd,CAAE,CACF+C,OAAO,CAAG/E,CAAC,EAAKA,CAAC,CAAC2E,MAAM,CAAChE,KAAK,CAACqE,WAAW,CAAG,SAAU,CACvDC,MAAM,CAAGjF,CAAC,EAAKA,CAAC,CAAC2E,MAAM,CAAChE,KAAK,CAACqE,WAAW,CAAG,SAAU,CACvD,CAAC,cACF9K,IAAA,WACEsK,IAAI,CAAC,QAAQ,CACbK,QAAQ,CAAE,CAAC5I,SAAS,EAAI,CAACJ,OAAO,CAACqE,IAAI,CAAC,CAAE,CACxCS,KAAK,CAAE,CACLO,UAAU,CAAEjF,SAAS,EAAIJ,OAAO,CAACqE,IAAI,CAAC,CAAC,CACnC,mDAAmD,CACnD,SAAS,CACboB,KAAK,CAAErF,SAAS,EAAIJ,OAAO,CAACqE,IAAI,CAAC,CAAC,CAAG,OAAO,CAAG,SAAS,CACxD4B,MAAM,CAAE,MAAM,CACdlB,OAAO,CAAE,WAAW,CACpBO,YAAY,CAAE,MAAM,CACpBY,MAAM,CAAE9F,SAAS,EAAIJ,OAAO,CAACqE,IAAI,CAAC,CAAC,CAAG,SAAS,CAAG,aAAa,CAC/DuB,UAAU,CAAE,MAAM,CAClBD,QAAQ,CAAE,MAAM,CAChBQ,UAAU,CAAE,UAAU,CACtBZ,SAAS,CAAEnF,SAAS,EAAIJ,OAAO,CAACqE,IAAI,CAAC,CAAC,CAAG,kCAAkC,CAAG,MAChF,CAAE,CAAAW,QAAA,CACH,qBAED,CAAQ,CAAC,EACL,CAAC,cAEP3G,IAAA,QAAKyG,KAAK,CAAE,CACVC,OAAO,CAAE,MAAM,CACf2D,SAAS,CAAE,mBAAmB,CAC9B/B,SAAS,CAAE,QAAQ,CACnBlB,KAAK,CAAE,SAAS,CAChBJ,UAAU,CAAE,SAAS,CACrBM,QAAQ,CAAE,MACZ,CAAE,CAAAX,QAAA,CAAC,gDAEH,CAAK,CACN,EACD,CAAC,cAEHzG,KAAA,QAAKuG,KAAK,CAAE,CACVG,OAAO,CAAE,MAAM,CACf2C,aAAa,CAAE,QAAQ,CACvBzC,UAAU,CAAE,QAAQ,CACpBD,cAAc,CAAE,QAAQ,CACxBY,MAAM,CAAE,MAAM,CACdL,KAAK,CAAE,SACT,CAAE,CAAAT,QAAA,eACA3G,IAAA,QAAKyG,KAAK,CAAE,CAAEa,QAAQ,CAAE,MAAM,CAAEP,YAAY,CAAE,MAAO,CAAE,CAAAJ,QAAA,CAAC,cAAE,CAAK,CAAC,cAChE3G,IAAA,OAAIyG,KAAK,CAAE,CAAEU,MAAM,CAAE,WAAW,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAT,QAAA,CAAC,gCAEtD,CAAI,CAAC,cACL3G,IAAA,MAAGyG,KAAK,CAAE,CAAEU,MAAM,CAAE,CAAC,CAAEG,QAAQ,CAAE,MAAO,CAAE,CAAAX,QAAA,CAAC,yCAE3C,CAAG,CAAC,EACD,CACN,CACE,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA/F,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}