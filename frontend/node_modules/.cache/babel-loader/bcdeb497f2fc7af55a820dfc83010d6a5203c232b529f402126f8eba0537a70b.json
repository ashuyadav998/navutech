{"ast":null,"code":"import _objectSpread from\"C:/Users/ashu_/Documents/ecommerce-sim/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{FaEye,FaEdit,FaPhone,FaDownload}from'react-icons/fa';import axios from'axios';import'../../styles/AdminOrders.css';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminOrders=()=>{var _selectedOrder$user,_selectedOrder$shippi,_selectedOrder$shippi2,_selectedOrder$shippi3,_selectedOrder$shippi4,_selectedOrder$tracki,_selectedOrder$items,_selectedOrder$items2;const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[refreshing,setRefreshing]=useState(false);const[selectedOrder,setSelectedOrder]=useState(null);const[showDetailModal,setShowDetailModal]=useState(false);const[statusUpdate,setStatusUpdate]=useState({orderStatus:'',paymentStatus:''});const[error,setError]=useState(null);const notifiedOrders=useRef(new Set());const isFirstLoad=useRef(true);const API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';useEffect(()=>{loadOrders(true);if(Notification.permission==='default')Notification.requestPermission();const interval=setInterval(()=>loadOrders(false),30000);return()=>clearInterval(interval);},[]);useEffect(()=>{const newOrders=orders.filter(o=>!notifiedOrders.current.has(o._id)&&o.orderStatus==='pendiente');if(newOrders.length>0&&!isFirstLoad.current){newOrders.forEach(o=>notifiedOrders.current.add(o._id));handleNewOrderNotification(newOrders);}},[orders]);const handleNewOrderNotification=newOrders=>{const audio=new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3');audio.play().catch(()=>{});newOrders.forEach(order=>{var _order$user;toast.success(\"\\uD83D\\uDD14 \\xA1NUEVO PEDIDO! #\".concat(order._id.slice(-6).toUpperCase(),\"\\nCliente: \").concat(((_order$user=order.user)===null||_order$user===void 0?void 0:_order$user.name)||'Desconocido',\"\\nTotal: \").concat(formatPrice(order.totalAmount)),{position:'top-right',autoClose:8000});});if(navigator.vibrate)navigator.vibrate([200,100,200]);if(Notification.permission==='granted'){new Notification('üõí Nuevo pedido recibido',{body:\"\".concat(newOrders.length,\" pedido(s) nuevo(s)\"),icon:'/logo192.png'});}};const loadOrders=async function(){let initial=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;try{if(initial)setLoading(true);setRefreshing(true);setError(null);const token=sessionStorage.getItem('token');if(!token){setError('No est√°s autenticado.');setLoading(false);return;}const response=await axios.get(\"\".concat(API_URL,\"/orders\"),{headers:{Authorization:\"Bearer \".concat(token)}});const ordersData=Array.isArray(response.data)?response.data:[];setOrders(ordersData);if(initial){ordersData.forEach(o=>notifiedOrders.current.add(o._id));isFirstLoad.current=false;}}catch(error){var _error$response,_error$response$data;if(initial)setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Error al cargar los pedidos');}finally{setLoading(false);setRefreshing(false);}};const downloadLabel=async order=>{try{var _order$tracking;// ‚úÖ Comprobar trackingNumber en el objeto populado o directamente\nconst trackingNumber=(_order$tracking=order.tracking)===null||_order$tracking===void 0?void 0:_order$tracking.trackingNumber;if(!trackingNumber){toast.error('Etiqueta a√∫n no disponible, pulsa Actualizar en unos segundos');return;}const token=sessionStorage.getItem('token');if(!token){toast.error('Sesi√≥n expirada');return;}const loadingToast=toast.loading('Descargando etiqueta...');const response=await axios({method:'GET',url:\"\".concat(API_URL,\"/tracking/\").concat(trackingNumber,\"/label\"),headers:{Authorization:\"Bearer \".concat(token)},responseType:'blob'});toast.update(loadingToast,{render:'‚úÖ Descargando...',type:'success',isLoading:false,autoClose:1000});const blob=new Blob([response.data],{type:'application/pdf'});const url=window.URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=\"etiqueta-\".concat(trackingNumber,\".pdf\");document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);}catch(err){var _err$response,_err$response2;const msg=((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===404?'Etiqueta a√∫n no disponible':((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status)===401?'Sesi√≥n expirada':'Error al descargar la etiqueta';toast.error(msg);}};const viewLabel=order=>{var _order$tracking2;const trackingNumber=(_order$tracking2=order.tracking)===null||_order$tracking2===void 0?void 0:_order$tracking2.trackingNumber;if(!trackingNumber){toast.error('Sin etiqueta disponible');return;}const token=sessionStorage.getItem('token');window.open(\"\".concat(API_URL,\"/tracking/\").concat(trackingNumber,\"/label/preview?token=\").concat(token),'_blank');};const formatPrice=price=>new Intl.NumberFormat('es-ES',{style:'currency',currency:'EUR'}).format(price);const getStatusBadge=status=>({pendiente:'badge-warning',procesando:'badge-info',enviado:'badge-primary',entregado:'badge-success',cancelado:'badge-danger',pagado:'badge-success',fallido:'badge-danger'})[status]||'badge-secondary';const getStatusLabel=status=>({pendiente:'Pendiente',procesando:'Procesando',enviado:'Enviado',entregado:'Entregado',cancelado:'Cancelado',pagado:'Pagado',fallido:'Fallido'})[status]||status;const openDetailModal=order=>{setSelectedOrder(order);setStatusUpdate({orderStatus:order.orderStatus,paymentStatus:order.paymentStatus});setShowDetailModal(true);};const closeDetailModal=()=>{setShowDetailModal(false);setSelectedOrder(null);};const updateOrderStatus=async()=>{try{const token=sessionStorage.getItem('token');await axios.put(\"\".concat(API_URL,\"/orders/\").concat(selectedOrder._id,\"/status\"),statusUpdate,{headers:{Authorization:\"Bearer \".concat(token)}});toast.success('‚úÖ Estado actualizado y notificaci√≥n enviada al cliente');closeDetailModal();loadOrders(false);}catch(error){var _error$response2,_error$response2$data;toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Error al actualizar');}};// ‚úÖ Funci√≥n para forzar generaci√≥n de etiqueta en pedidos viejos sin tracking\nconst forceGenerateLabel=async orderId=>{try{const token=sessionStorage.getItem('token');const loadingToast=toast.loading('Generando etiqueta...');await axios.post(\"\".concat(API_URL,\"/tracking/create\"),{orderId},{headers:{Authorization:\"Bearer \".concat(token)}});toast.update(loadingToast,{render:'‚úÖ Etiqueta generada',type:'success',isLoading:false,autoClose:2000});loadOrders(false);}catch(err){toast.error('Error al generar etiqueta');}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"admin-orders\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-large\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Cargando pedidos...\"})]})});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"admin-orders\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>loadOrders(true),children:\"\\uD83D\\uDD04 Reintentar\"})]})});return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-orders\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Gesti\\xF3n de Pedidos \",refreshing&&/*#__PURE__*/_jsx(\"small\",{style:{fontSize:'12px',marginLeft:'10px'},children:\"\\uD83D\\uDD04 Actualizando...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"orders-stats\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-item\",children:[\"Total: \",/*#__PURE__*/_jsx(\"strong\",{children:orders.length})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-item\",children:[\"Pendientes: \",/*#__PURE__*/_jsx(\"strong\",{children:orders.filter(o=>o.orderStatus==='pendiente').length})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-item\",children:[\"Con etiqueta: \",/*#__PURE__*/_jsx(\"strong\",{children:orders.filter(o=>{var _o$tracking;return(_o$tracking=o.tracking)===null||_o$tracking===void 0?void 0:_o$tracking.trackingNumber;}).length})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>loadOrders(true),children:\"\\uD83D\\uDD04 Actualizar\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID Pedido\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cliente\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Estado Pago\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Estado Pedido\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Etiqueta\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(order=>{var _order$user2,_order$tracking3;return/*#__PURE__*/_jsxs(\"tr\",{className:order.orderStatus==='pendiente'?'row-urgent':'',children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"#\",order._id.slice(-8)]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"customer-cell\",children:[/*#__PURE__*/_jsx(\"strong\",{children:((_order$user2=order.user)===null||_order$user2===void 0?void 0:_order$user2.name)||'Usuario'}),/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(FaPhone,{}),\" \",order.phone||'S/T']})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:formatPrice(order.totalAmount)})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(getStatusBadge(order.paymentStatus)),children:getStatusLabel(order.paymentStatus)})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(getStatusBadge(order.orderStatus)),children:getStatusLabel(order.orderStatus)})}),/*#__PURE__*/_jsx(\"td\",{children:(_order$tracking3=order.tracking)!==null&&_order$tracking3!==void 0&&_order$tracking3.trackingNumber?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'5px'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn-table btn-pdf\",onClick:()=>downloadLabel(order),title:\"Descargar etiqueta PDF\",children:[/*#__PURE__*/_jsx(FaDownload,{}),\" Descargar\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-table btn-view\",onClick:()=>viewLabel(order),title:\"Ver etiqueta\",style:{background:'#3498db'},children:/*#__PURE__*/_jsx(FaEye,{})})]}):/*#__PURE__*/// Pedidos viejos sin tracking ‚Äî bot√≥n para forzar generaci√≥n\n_jsx(\"button\",{className:\"btn-table\",style:{fontSize:'0.75rem',background:'#f39c12',color:'white',border:'none',borderRadius:'4px',padding:'4px 8px',cursor:'pointer'},onClick:()=>forceGenerateLabel(order._id),children:\"\\uD83D\\uDCC4 Generar\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"action-buttons\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-icon btn-view\",onClick:()=>openDetailModal(order),title:\"Ver detalles\",children:/*#__PURE__*/_jsx(FaEye,{})})})})]},order._id);})})]})}),showDetailModal&&selectedOrder&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:closeDetailModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content large\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Gesti\\xF3n de Pedido #\",selectedOrder._id.slice(-8).toUpperCase()]}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:closeDetailModal,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-detail-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-grid-top\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCCD Direcci\\xF3n de Env\\xEDo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"address-box\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:((_selectedOrder$user=selectedOrder.user)===null||_selectedOrder$user===void 0?void 0:_selectedOrder$user.name)||'Cliente'})}),/*#__PURE__*/_jsx(\"p\",{children:(_selectedOrder$shippi=selectedOrder.shippingAddress)===null||_selectedOrder$shippi===void 0?void 0:_selectedOrder$shippi.street}),/*#__PURE__*/_jsxs(\"p\",{children:[(_selectedOrder$shippi2=selectedOrder.shippingAddress)===null||_selectedOrder$shippi2===void 0?void 0:_selectedOrder$shippi2.city,\", \",(_selectedOrder$shippi3=selectedOrder.shippingAddress)===null||_selectedOrder$shippi3===void 0?void 0:_selectedOrder$shippi3.postalCode]}),/*#__PURE__*/_jsx(\"p\",{children:(_selectedOrder$shippi4=selectedOrder.shippingAddress)===null||_selectedOrder$shippi4===void 0?void 0:_selectedOrder$shippi4.country}),/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:'10px',fontSize:'0.85rem',color:'#666'},children:[\"\\uD83D\\uDCDE \",selectedOrder.phone||'Sin tel√©fono']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u2699\\uFE0F Estado del Pedido\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-update-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.8rem',color:'#7f8c8d',display:'block',marginBottom:'5px'},children:\"Cambiar Estado (se enviar\\xE1 email al cliente)\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"orderStatus\",value:statusUpdate.orderStatus,onChange:e=>setStatusUpdate(_objectSpread(_objectSpread({},statusUpdate),{},{[e.target.name]:e.target.value})),className:\"form-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"pendiente\",children:\"Pendiente\"}),/*#__PURE__*/_jsx(\"option\",{value:\"procesando\",children:\"Procesando\"}),/*#__PURE__*/_jsx(\"option\",{value:\"enviado\",children:\"Enviado\"}),/*#__PURE__*/_jsx(\"option\",{value:\"entregado\",children:\"Entregado\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelado\",children:\"Cancelado\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-update-status\",onClick:updateOrderStatus,children:[/*#__PURE__*/_jsx(FaEdit,{}),\" Guardar y Notificar\"]})]})]})]}),((_selectedOrder$tracki=selectedOrder.tracking)===null||_selectedOrder$tracki===void 0?void 0:_selectedOrder$tracki.trackingNumber)&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDE9A Informaci\\xF3n de Env\\xEDo\"}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'15px',background:'#f8f9fa',borderRadius:'8px'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tracking:\"}),\" \",selectedOrder.tracking.trackingNumber]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Transportista:\"}),\" \",selectedOrder.tracking.carrier||'Correos Express (Simulado)']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Estado:\"}),\" \",selectedOrder.tracking.currentStatus||'en_preparacion']}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'15px',display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn-update-status\",onClick:()=>downloadLabel(selectedOrder),style:{flex:1},children:[/*#__PURE__*/_jsx(FaDownload,{}),\" Descargar Etiqueta\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-update-status\",onClick:()=>viewLabel(selectedOrder),style:{flex:1,background:'#3498db'},children:[/*#__PURE__*/_jsx(FaEye,{}),\" Ver Etiqueta\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-card full-width\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\uD83D\\uDCE6 Productos (\",((_selectedOrder$items=selectedOrder.items)===null||_selectedOrder$items===void 0?void 0:_selectedOrder$items.length)||0,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"order-items-list\",children:(_selectedOrder$items2=selectedOrder.items)===null||_selectedOrder$items2===void 0?void 0:_selectedOrder$items2.map((item,index)=>{var _item$product;return/*#__PURE__*/_jsxs(\"div\",{className:\"item-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-main\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"item-qty\",children:[item.quantity,\"x\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"item-name\",children:((_item$product=item.product)===null||_item$product===void 0?void 0:_item$product.name)||'Producto'})]}),/*#__PURE__*/_jsx(\"span\",{className:\"item-subtotal\",children:formatPrice(item.price*item.quantity)})]},index);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-total-display\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Pedido:\"}),/*#__PURE__*/_jsx(\"strong\",{children:formatPrice(selectedOrder.totalAmount)})]})]})]})]})})]});};export default AdminOrders;","map":{"version":3,"names":["React","useState","useEffect","useRef","FaEye","FaEdit","FaPhone","FaDownload","axios","toast","jsx","_jsx","jsxs","_jsxs","AdminOrders","_selectedOrder$user","_selectedOrder$shippi","_selectedOrder$shippi2","_selectedOrder$shippi3","_selectedOrder$shippi4","_selectedOrder$tracki","_selectedOrder$items","_selectedOrder$items2","orders","setOrders","loading","setLoading","refreshing","setRefreshing","selectedOrder","setSelectedOrder","showDetailModal","setShowDetailModal","statusUpdate","setStatusUpdate","orderStatus","paymentStatus","error","setError","notifiedOrders","Set","isFirstLoad","API_URL","process","env","REACT_APP_API_URL","loadOrders","Notification","permission","requestPermission","interval","setInterval","clearInterval","newOrders","filter","o","current","has","_id","length","forEach","add","handleNewOrderNotification","audio","Audio","play","catch","order","_order$user","success","concat","slice","toUpperCase","user","name","formatPrice","totalAmount","position","autoClose","navigator","vibrate","body","icon","initial","arguments","undefined","token","sessionStorage","getItem","response","get","headers","Authorization","ordersData","Array","isArray","data","_error$response","_error$response$data","message","downloadLabel","_order$tracking","trackingNumber","tracking","loadingToast","method","url","responseType","update","render","type","isLoading","blob","Blob","window","URL","createObjectURL","link","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","err","_err$response","_err$response2","msg","status","viewLabel","_order$tracking2","open","price","Intl","NumberFormat","style","currency","format","getStatusBadge","pendiente","procesando","enviado","entregado","cancelado","pagado","fallido","getStatusLabel","openDetailModal","closeDetailModal","updateOrderStatus","put","_error$response2","_error$response2$data","forceGenerateLabel","orderId","post","className","children","onClick","fontSize","marginLeft","_o$tracking","map","_order$user2","_order$tracking3","phone","display","gap","title","background","color","border","borderRadius","padding","cursor","e","stopPropagation","shippingAddress","street","city","postalCode","country","marginTop","marginBottom","value","onChange","_objectSpread","target","carrier","currentStatus","flex","items","item","index","_item$product","quantity","product"],"sources":["C:/Users/ashu_/Documents/ecommerce-sim/frontend/src/pages/admin/AdminOrders.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { FaEye, FaEdit, FaPhone, FaDownload } from 'react-icons/fa';\nimport axios from 'axios';\nimport '../../styles/AdminOrders.css';\nimport { toast } from 'react-toastify';\n\nconst AdminOrders = () => {\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [selectedOrder, setSelectedOrder] = useState(null);\n  const [showDetailModal, setShowDetailModal] = useState(false);\n  const [statusUpdate, setStatusUpdate] = useState({ orderStatus: '', paymentStatus: '' });\n  const [error, setError] = useState(null);\n\n  const notifiedOrders = useRef(new Set());\n  const isFirstLoad = useRef(true);\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n  useEffect(() => {\n    loadOrders(true);\n    if (Notification.permission === 'default') Notification.requestPermission();\n    const interval = setInterval(() => loadOrders(false), 30000);\n    return () => clearInterval(interval);\n  }, []);\n\n  useEffect(() => {\n    const newOrders = orders.filter(\n      o => !notifiedOrders.current.has(o._id) && o.orderStatus === 'pendiente'\n    );\n    if (newOrders.length > 0 && !isFirstLoad.current) {\n      newOrders.forEach(o => notifiedOrders.current.add(o._id));\n      handleNewOrderNotification(newOrders);\n    }\n  }, [orders]);\n\n  const handleNewOrderNotification = (newOrders) => {\n    const audio = new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3');\n    audio.play().catch(() => {});\n    newOrders.forEach(order => {\n      toast.success(\n        `üîî ¬°NUEVO PEDIDO! #${order._id.slice(-6).toUpperCase()}\\nCliente: ${order.user?.name || 'Desconocido'}\\nTotal: ${formatPrice(order.totalAmount)}`,\n        { position: 'top-right', autoClose: 8000 }\n      );\n    });\n    if (navigator.vibrate) navigator.vibrate([200, 100, 200]);\n    if (Notification.permission === 'granted') {\n      new Notification('üõí Nuevo pedido recibido', { body: `${newOrders.length} pedido(s) nuevo(s)`, icon: '/logo192.png' });\n    }\n  };\n\n  const loadOrders = async (initial = false) => {\n    try {\n      if (initial) setLoading(true);\n      setRefreshing(true);\n      setError(null);\n      const token = sessionStorage.getItem('token');\n      if (!token) { setError('No est√°s autenticado.'); setLoading(false); return; }\n\n      const response = await axios.get(`${API_URL}/orders`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n\n      const ordersData = Array.isArray(response.data) ? response.data : [];\n      setOrders(ordersData);\n\n      if (initial) {\n        ordersData.forEach(o => notifiedOrders.current.add(o._id));\n        isFirstLoad.current = false;\n      }\n    } catch (error) {\n      if (initial) setError(error.response?.data?.message || 'Error al cargar los pedidos');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  const downloadLabel = async (order) => {\n    try {\n      // ‚úÖ Comprobar trackingNumber en el objeto populado o directamente\n      const trackingNumber = order.tracking?.trackingNumber;\n      if (!trackingNumber) {\n        toast.error('Etiqueta a√∫n no disponible, pulsa Actualizar en unos segundos');\n        return;\n      }\n\n      const token = sessionStorage.getItem('token');\n      if (!token) { toast.error('Sesi√≥n expirada'); return; }\n\n      const loadingToast = toast.loading('Descargando etiqueta...');\n\n      const response = await axios({\n        method: 'GET',\n        url: `${API_URL}/tracking/${trackingNumber}/label`,\n        headers: { Authorization: `Bearer ${token}` },\n        responseType: 'blob'\n      });\n\n      toast.update(loadingToast, { render: '‚úÖ Descargando...', type: 'success', isLoading: false, autoClose: 1000 });\n\n      const blob = new Blob([response.data], { type: 'application/pdf' });\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `etiqueta-${trackingNumber}.pdf`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (err) {\n      const msg = err.response?.status === 404 ? 'Etiqueta a√∫n no disponible'\n        : err.response?.status === 401 ? 'Sesi√≥n expirada'\n        : 'Error al descargar la etiqueta';\n      toast.error(msg);\n    }\n  };\n\n  const viewLabel = (order) => {\n    const trackingNumber = order.tracking?.trackingNumber;\n    if (!trackingNumber) { toast.error('Sin etiqueta disponible'); return; }\n    const token = sessionStorage.getItem('token');\n    window.open(`${API_URL}/tracking/${trackingNumber}/label/preview?token=${token}`, '_blank');\n  };\n\n  const formatPrice = (price) =>\n    new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR' }).format(price);\n\n  const getStatusBadge = (status) => ({\n    pendiente: 'badge-warning', procesando: 'badge-info', enviado: 'badge-primary',\n    entregado: 'badge-success', cancelado: 'badge-danger', pagado: 'badge-success', fallido: 'badge-danger'\n  }[status] || 'badge-secondary');\n\n  const getStatusLabel = (status) => ({\n    pendiente: 'Pendiente', procesando: 'Procesando', enviado: 'Enviado',\n    entregado: 'Entregado', cancelado: 'Cancelado', pagado: 'Pagado', fallido: 'Fallido'\n  }[status] || status);\n\n  const openDetailModal = (order) => {\n    setSelectedOrder(order);\n    setStatusUpdate({ orderStatus: order.orderStatus, paymentStatus: order.paymentStatus });\n    setShowDetailModal(true);\n  };\n\n  const closeDetailModal = () => { setShowDetailModal(false); setSelectedOrder(null); };\n\n  const updateOrderStatus = async () => {\n    try {\n      const token = sessionStorage.getItem('token');\n      await axios.put(`${API_URL}/orders/${selectedOrder._id}/status`, statusUpdate, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      toast.success('‚úÖ Estado actualizado y notificaci√≥n enviada al cliente');\n      closeDetailModal();\n      loadOrders(false);\n    } catch (error) {\n      toast.error(error.response?.data?.message || 'Error al actualizar');\n    }\n  };\n\n  // ‚úÖ Funci√≥n para forzar generaci√≥n de etiqueta en pedidos viejos sin tracking\n  const forceGenerateLabel = async (orderId) => {\n    try {\n      const token = sessionStorage.getItem('token');\n      const loadingToast = toast.loading('Generando etiqueta...');\n      await axios.post(`${API_URL}/tracking/create`, { orderId }, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      toast.update(loadingToast, { render: '‚úÖ Etiqueta generada', type: 'success', isLoading: false, autoClose: 2000 });\n      loadOrders(false);\n    } catch (err) {\n      toast.error('Error al generar etiqueta');\n    }\n  };\n\n  if (loading) return <div className=\"admin-orders\"><div className=\"loading-container\"><div className=\"spinner-large\"></div><p>Cargando pedidos...</p></div></div>;\n  if (error) return <div className=\"admin-orders\"><div className=\"error-container\"><h3>Error</h3><p>{error}</p><button className=\"btn btn-primary\" onClick={() => loadOrders(true)}>üîÑ Reintentar</button></div></div>;\n\n  return (\n    <div className=\"admin-orders\">\n      <div className=\"page-header\">\n        <h2>Gesti√≥n de Pedidos {refreshing && <small style={{ fontSize: '12px', marginLeft: '10px' }}>üîÑ Actualizando...</small>}</h2>\n        <div className=\"orders-stats\">\n          <span className=\"stat-item\">Total: <strong>{orders.length}</strong></span>\n          <span className=\"stat-item\">Pendientes: <strong>{orders.filter(o => o.orderStatus === 'pendiente').length}</strong></span>\n          <span className=\"stat-item\">Con etiqueta: <strong>{orders.filter(o => o.tracking?.trackingNumber).length}</strong></span>\n        </div>\n        <button className=\"btn btn-secondary\" onClick={() => loadOrders(true)}>üîÑ Actualizar</button>\n      </div>\n\n      <div className=\"table-responsive\">\n        <table className=\"admin-table\">\n          <thead>\n            <tr>\n              <th>ID Pedido</th>\n              <th>Cliente</th>\n              <th>Total</th>\n              <th>Estado Pago</th>\n              <th>Estado Pedido</th>\n              <th>Etiqueta</th>\n              <th>Acciones</th>\n            </tr>\n          </thead>\n          <tbody>\n            {orders.map(order => (\n              <tr key={order._id} className={order.orderStatus === 'pendiente' ? 'row-urgent' : ''}>\n                <td><strong>#{order._id.slice(-8)}</strong></td>\n                <td>\n                  <div className=\"customer-cell\">\n                    <strong>{order.user?.name || 'Usuario'}</strong>\n                    <small><FaPhone /> {order.phone || 'S/T'}</small>\n                  </div>\n                </td>\n                <td><strong>{formatPrice(order.totalAmount)}</strong></td>\n                <td><span className={`badge ${getStatusBadge(order.paymentStatus)}`}>{getStatusLabel(order.paymentStatus)}</span></td>\n                <td><span className={`badge ${getStatusBadge(order.orderStatus)}`}>{getStatusLabel(order.orderStatus)}</span></td>\n                <td>\n                  {/* ‚úÖ Comprueba trackingNumber espec√≠ficamente, no solo order.tracking */}\n                  {order.tracking?.trackingNumber ? (\n                    <div style={{ display: 'flex', gap: '5px' }}>\n                      <button className=\"btn-table btn-pdf\" onClick={() => downloadLabel(order)} title=\"Descargar etiqueta PDF\">\n                        <FaDownload /> Descargar\n                      </button>\n                      <button className=\"btn-table btn-view\" onClick={() => viewLabel(order)} title=\"Ver etiqueta\" style={{ background: '#3498db' }}>\n                        <FaEye />\n                      </button>\n                    </div>\n                  ) : (\n                    // Pedidos viejos sin tracking ‚Äî bot√≥n para forzar generaci√≥n\n                    <button\n                      className=\"btn-table\"\n                      style={{ fontSize: '0.75rem', background: '#f39c12', color: 'white', border: 'none', borderRadius: '4px', padding: '4px 8px', cursor: 'pointer' }}\n                      onClick={() => forceGenerateLabel(order._id)}\n                    >\n                      üìÑ Generar\n                    </button>\n                  )}\n                </td>\n                <td>\n                  <div className=\"action-buttons\">\n                    <button className=\"btn-icon btn-view\" onClick={() => openDetailModal(order)} title=\"Ver detalles\">\n                      <FaEye />\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {showDetailModal && selectedOrder && (\n        <div className=\"modal-overlay\" onClick={closeDetailModal}>\n          <div className=\"modal-content large\" onClick={e => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h3>Gesti√≥n de Pedido #{selectedOrder._id.slice(-8).toUpperCase()}</h3>\n              <button className=\"modal-close\" onClick={closeDetailModal}>&times;</button>\n            </div>\n\n            <div className=\"order-detail-container\">\n              <div className=\"detail-grid-top\">\n                <div className=\"detail-card\">\n                  <h4>üìç Direcci√≥n de Env√≠o</h4>\n                  <div className=\"address-box\">\n                    <p><strong>{selectedOrder.user?.name || 'Cliente'}</strong></p>\n                    <p>{selectedOrder.shippingAddress?.street}</p>\n                    <p>{selectedOrder.shippingAddress?.city}, {selectedOrder.shippingAddress?.postalCode}</p>\n                    <p>{selectedOrder.shippingAddress?.country}</p>\n                    <p style={{ marginTop: '10px', fontSize: '0.85rem', color: '#666' }}>\n                      üìû {selectedOrder.phone || 'Sin tel√©fono'}\n                    </p>\n                  </div>\n                </div>\n\n                <div className=\"detail-card\">\n                  <h4>‚öôÔ∏è Estado del Pedido</h4>\n                  <div className=\"status-update-form\">\n                    <div className=\"form-group\">\n                      <label style={{ fontSize: '0.8rem', color: '#7f8c8d', display: 'block', marginBottom: '5px' }}>\n                        Cambiar Estado (se enviar√° email al cliente)\n                      </label>\n                      <select name=\"orderStatus\" value={statusUpdate.orderStatus}\n                        onChange={e => setStatusUpdate({ ...statusUpdate, [e.target.name]: e.target.value })}\n                        className=\"form-select\">\n                        <option value=\"pendiente\">Pendiente</option>\n                        <option value=\"procesando\">Procesando</option>\n                        <option value=\"enviado\">Enviado</option>\n                        <option value=\"entregado\">Entregado</option>\n                        <option value=\"cancelado\">Cancelado</option>\n                      </select>\n                    </div>\n                    <button className=\"btn-update-status\" onClick={updateOrderStatus}>\n                      <FaEdit /> Guardar y Notificar\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              {selectedOrder.tracking?.trackingNumber && (\n                <div className=\"detail-card\">\n                  <h4>üöö Informaci√≥n de Env√≠o</h4>\n                  <div style={{ padding: '15px', background: '#f8f9fa', borderRadius: '8px' }}>\n                    <p><strong>Tracking:</strong> {selectedOrder.tracking.trackingNumber}</p>\n                    <p><strong>Transportista:</strong> {selectedOrder.tracking.carrier || 'Correos Express (Simulado)'}</p>\n                    <p><strong>Estado:</strong> {selectedOrder.tracking.currentStatus || 'en_preparacion'}</p>\n                    <div style={{ marginTop: '15px', display: 'flex', gap: '10px' }}>\n                      <button className=\"btn-update-status\" onClick={() => downloadLabel(selectedOrder)} style={{ flex: 1 }}>\n                        <FaDownload /> Descargar Etiqueta\n                      </button>\n                      <button className=\"btn-update-status\" onClick={() => viewLabel(selectedOrder)} style={{ flex: 1, background: '#3498db' }}>\n                        <FaEye /> Ver Etiqueta\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              <div className=\"detail-card full-width\">\n                <h4>üì¶ Productos ({selectedOrder.items?.length || 0})</h4>\n                <div className=\"order-items-list\">\n                  {selectedOrder.items?.map((item, index) => (\n                    <div key={index} className=\"item-row\">\n                      <div className=\"item-main\">\n                        <span className=\"item-qty\">{item.quantity}x</span>\n                        <span className=\"item-name\">{item.product?.name || 'Producto'}</span>\n                      </div>\n                      <span className=\"item-subtotal\">{formatPrice(item.price * item.quantity)}</span>\n                    </div>\n                  ))}\n                </div>\n                <div className=\"order-total-display\">\n                  <span>Total Pedido:</span>\n                  <strong>{formatPrice(selectedOrder.totalAmount)}</strong>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdminOrders;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}