{"ast":null,"code":"// frontend/src/services/socketService.js\nimport { io } from 'socket.io-client';\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nconst SOCKET_URL = API_URL.replace('/api', '');\nclass SocketService {\n  constructor() {\n    this.socket = null;\n    this.isInitialized = false;\n    this.eventListeners = new Map();\n  }\n  initialize() {\n    if (this.isInitialized && this.socket) {\n      console.log('‚ö†Ô∏è Socket ya inicializado');\n      return this.socket;\n    }\n    console.log('üîå Inicializando socket service...');\n    this.socket = io(SOCKET_URL, {\n      transports: ['websocket', 'polling'],\n      reconnection: true,\n      reconnectionAttempts: 10,\n      reconnectionDelay: 1000,\n      autoConnect: true\n    });\n    this.socket.on('connect', () => {\n      console.log('‚úÖ Socket conectado:', this.socket.id);\n    });\n    this.socket.on('disconnect', reason => {\n      console.log('‚ùå Socket desconectado:', reason);\n    });\n    this.isInitialized = true;\n    return this.socket;\n  }\n  authenticate(token) {\n    if (!this.socket) {\n      console.error('‚ùå Socket no inicializado');\n      return;\n    }\n    console.log('üîë Autenticando socket...');\n    this.socket.emit('authenticate', token);\n  }\n  on(event, callback) {\n    if (!this.socket) {\n      console.error('‚ùå Socket no inicializado');\n      return;\n    }\n\n    // Remover listener anterior si existe\n    if (this.eventListeners.has(event)) {\n      this.socket.off(event, this.eventListeners.get(event));\n    }\n    this.socket.on(event, callback);\n    this.eventListeners.set(event, callback);\n  }\n  emit(event, data) {\n    if (!this.socket) {\n      console.error('‚ùå Socket no inicializado');\n      return;\n    }\n    this.socket.emit(event, data);\n  }\n  removeListener(event) {\n    if (!this.socket) return;\n    const callback = this.eventListeners.get(event);\n    if (callback) {\n      this.socket.off(event, callback);\n      this.eventListeners.delete(event);\n    }\n  }\n  disconnect() {\n    if (this.socket) {\n      console.log('üîå Desconectando socket...');\n      this.socket.disconnect();\n      this.socket = null;\n      this.isInitialized = false;\n      this.eventListeners.clear();\n    }\n  }\n  getSocket() {\n    return this.socket;\n  }\n  isConnected() {\n    return this.socket && this.socket.connected;\n  }\n}\n\n// Exportar una √∫nica instancia\nconst socketService = new SocketService();\nexport default socketService;","map":{"version":3,"names":["io","API_URL","process","env","REACT_APP_API_URL","SOCKET_URL","replace","SocketService","constructor","socket","isInitialized","eventListeners","Map","initialize","console","log","transports","reconnection","reconnectionAttempts","reconnectionDelay","autoConnect","on","id","reason","authenticate","token","error","emit","event","callback","has","off","get","set","data","removeListener","delete","disconnect","clear","getSocket","isConnected","connected","socketService"],"sources":["C:/Users/ashu_/Documents/ecommerce-sim/frontend/src/services/socketService.js"],"sourcesContent":["// frontend/src/services/socketService.js\r\nimport { io } from 'socket.io-client';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\nconst SOCKET_URL = API_URL.replace('/api', '');\r\n\r\nclass SocketService {\r\n  constructor() {\r\n    this.socket = null;\r\n    this.isInitialized = false;\r\n    this.eventListeners = new Map();\r\n  }\r\n\r\n  initialize() {\r\n    if (this.isInitialized && this.socket) {\r\n      console.log('‚ö†Ô∏è Socket ya inicializado');\r\n      return this.socket;\r\n    }\r\n\r\n    console.log('üîå Inicializando socket service...');\r\n\r\n    this.socket = io(SOCKET_URL, {\r\n      transports: ['websocket', 'polling'],\r\n      reconnection: true,\r\n      reconnectionAttempts: 10,\r\n      reconnectionDelay: 1000,\r\n      autoConnect: true\r\n    });\r\n\r\n    this.socket.on('connect', () => {\r\n      console.log('‚úÖ Socket conectado:', this.socket.id);\r\n    });\r\n\r\n    this.socket.on('disconnect', (reason) => {\r\n      console.log('‚ùå Socket desconectado:', reason);\r\n    });\r\n\r\n    this.isInitialized = true;\r\n    return this.socket;\r\n  }\r\n\r\n  authenticate(token) {\r\n    if (!this.socket) {\r\n      console.error('‚ùå Socket no inicializado');\r\n      return;\r\n    }\r\n\r\n    console.log('üîë Autenticando socket...');\r\n    this.socket.emit('authenticate', token);\r\n  }\r\n\r\n  on(event, callback) {\r\n    if (!this.socket) {\r\n      console.error('‚ùå Socket no inicializado');\r\n      return;\r\n    }\r\n\r\n    // Remover listener anterior si existe\r\n    if (this.eventListeners.has(event)) {\r\n      this.socket.off(event, this.eventListeners.get(event));\r\n    }\r\n\r\n    this.socket.on(event, callback);\r\n    this.eventListeners.set(event, callback);\r\n  }\r\n\r\n  emit(event, data) {\r\n    if (!this.socket) {\r\n      console.error('‚ùå Socket no inicializado');\r\n      return;\r\n    }\r\n\r\n    this.socket.emit(event, data);\r\n  }\r\n\r\n  removeListener(event) {\r\n    if (!this.socket) return;\r\n\r\n    const callback = this.eventListeners.get(event);\r\n    if (callback) {\r\n      this.socket.off(event, callback);\r\n      this.eventListeners.delete(event);\r\n    }\r\n  }\r\n\r\n  disconnect() {\r\n    if (this.socket) {\r\n      console.log('üîå Desconectando socket...');\r\n      this.socket.disconnect();\r\n      this.socket = null;\r\n      this.isInitialized = false;\r\n      this.eventListeners.clear();\r\n    }\r\n  }\r\n\r\n  getSocket() {\r\n    return this.socket;\r\n  }\r\n\r\n  isConnected() {\r\n    return this.socket && this.socket.connected;\r\n  }\r\n}\r\n\r\n// Exportar una √∫nica instancia\r\nconst socketService = new SocketService();\r\nexport default socketService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}