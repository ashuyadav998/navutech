{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ashu_\\\\Documents\\\\ecommerce-sim\\\\frontend\\\\src\\\\components\\\\admin\\\\AdminChat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { FaEye, FaEdit, FaPhone, FaTruck, FaFilePdf, FaSync, FaPrint } from 'react-icons/fa';\nimport axios from 'axios';\nimport '../../styles/AdminOrders.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminOrders = () => {\n  _s();\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedOrder, setSelectedOrder] = useState(null);\n  const [showDetailModal, setShowDetailModal] = useState(false);\n  const [statusUpdate, setStatusUpdate] = useState({\n    orderStatus: '',\n    paymentStatus: ''\n  });\n  const [error, setError] = useState(null);\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n  // 1. Carga inicial y sistema de refresco autom√°tico (cada 30 seg)\n  useEffect(() => {\n    loadOrders();\n    const interval = setInterval(loadOrders, 30000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // 2. MONITOR DE IMPRESI√ìN: Detecta pedidos pagados que no han sido impresos\n  useEffect(() => {\n    const pendingToPrint = orders.find(o => o.needsPrinting === true && o.orderStatus === 'procesando');\n    if (pendingToPrint) {\n      handleAutoPrintNotification(pendingToPrint);\n    }\n  }, [orders]);\n  const loadOrders = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) return;\n      const response = await axios.get(`${API_URL}/orders`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const ordersData = Array.isArray(response.data) ? response.data : [];\n      setOrders(ordersData);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error al cargar pedidos:', error);\n      setError('Error de conexi√≥n');\n      setLoading(false);\n    }\n  };\n\n  // --- FUNCI√ìN DE IMPRESI√ìN AUTOM√ÅTICA ---\n  const handleAutoPrintNotification = order => {\n    // Sonido de alerta de nuevo pedido\n    const audio = new Audio('https://assets.mixkit.co/active_storage/sfx/2358/2358-preview.mp3');\n    audio.play().catch(e => console.log(\"Audio bloqueado por navegador\"));\n    if (window.confirm(`üì¶ ¬°NUEVO PEDIDO RECIBIDO! #${order._id.slice(-6)}\\n¬øDeseas abrir la etiqueta para imprimirla ahora mismo?`)) {\n      var _order$tracking;\n      const trackingId = ((_order$tracking = order.tracking) === null || _order$tracking === void 0 ? void 0 : _order$tracking._id) || order.tracking;\n      if (trackingId) {\n        downloadLabel(trackingId);\n        markAsPrinted(order._id);\n      } else {\n        alert(\"El pedido a√∫n no tiene tracking generado.\");\n      }\n    }\n  };\n  const markAsPrinted = async orderId => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.put(`${API_URL}/orders/${orderId}/printed`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      loadOrders(); // Actualizar lista para quitar el aviso\n    } catch (err) {\n      console.error(\"Error al marcar como impreso\", err);\n    }\n  };\n  const downloadLabel = trackingId => {\n    const token = localStorage.getItem('token');\n    window.open(`${API_URL}/tracking/label/${trackingId}?token=${token}`, '_blank');\n  };\n  const handleCreateTracking = async orderId => {\n    const carrier = prompt(\"Introduce el transportista:\", \"SimShip Express\");\n    if (!carrier) return;\n    try {\n      const token = localStorage.getItem('token');\n      await axios.post(`${API_URL}/tracking/create`, {\n        orderId,\n        carrier\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      alert(\"Tracking generado correctamente\");\n      loadOrders();\n    } catch (err) {\n      alert(\"Error al generar tracking\");\n    }\n  };\n  const updateOrderStatus = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.put(`${API_URL}/orders/${selectedOrder._id}/status`, statusUpdate, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      alert('Estado actualizado');\n      closeDetailModal();\n      loadOrders();\n    } catch (error) {\n      alert('Error al actualizar');\n    }\n  };\n\n  // Formateadores\n  const formatPrice = price => new Intl.NumberFormat('es-ES', {\n    style: 'currency',\n    currency: 'EUR'\n  }).format(price);\n  const formatDate = date => new Date(date).toLocaleDateString('es-ES', {\n    day: 'numeric',\n    month: 'short',\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n  const openDetailModal = order => {\n    setSelectedOrder(order);\n    setStatusUpdate({\n      orderStatus: order.orderStatus,\n      paymentStatus: order.paymentStatus\n    });\n    setShowDetailModal(true);\n  };\n  const closeDetailModal = () => {\n    setShowDetailModal(false);\n    setSelectedOrder(null);\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-orders\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spinner-large\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 53\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-orders\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDE80 Panel de Almac\\xE9n y Log\\xEDstica\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          onClick: loadOrders,\n          children: [/*#__PURE__*/_jsxDEV(FaSync, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 71\n          }, this), \" Refrescar\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-responsive\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Pedido\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Cliente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Estado Pedido\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Acci\\xF3n de Env\\xEDo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Etiqueta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Acciones\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: orders.map(order => {\n            var _order$user;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: order.needsPrinting ? 'row-new-order' : '',\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: [\"#\", order._id.slice(-6).toUpperCase()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"customer-cell\",\n                  children: [(_order$user = order.user) === null || _order$user === void 0 ? void 0 : _order$user.name, /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: [/*#__PURE__*/_jsxDEV(FaPhone, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 159,\n                      columnNumber: 28\n                    }, this), \" \", order.phone || 'S/T']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: formatPrice(order.totalAmount)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `badge badge-${order.orderStatus}`,\n                  children: order.orderStatus\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: !order.tracking ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-table btn-generate\",\n                  onClick: () => handleCreateTracking(order._id),\n                  children: [/*#__PURE__*/_jsxDEV(FaTruck, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 23\n                  }, this), \" Generar Tracking\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-success\",\n                  children: [/*#__PURE__*/_jsxDEV(FaTruck, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 52\n                  }, this), \" \", order.tracking.carrier || 'Asignado']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: order.tracking ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `btn-table ${order.needsPrinting ? 'btn-pdf-urgent' : 'btn-pdf'}`,\n                  onClick: () => downloadLabel(order.tracking._id || order.tracking),\n                  children: [/*#__PURE__*/_jsxDEV(FaPrint, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 23\n                  }, this), \" Imprimir\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 21\n                }, this) : '---'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-icon\",\n                  onClick: () => openDetailModal(order),\n                  children: /*#__PURE__*/_jsxDEV(FaEye, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 87\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 17\n              }, this)]\n            }, order._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this), showDetailModal && selectedOrder && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: closeDetailModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content large\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Detalle Pedido #\", selectedOrder._id.slice(-8)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"modal-close\",\n            onClick: closeDetailModal,\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"\\uD83D\\uDCCD Direcci\\xF3n de Env\\xEDo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [selectedOrder.shippingAddress.street, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 59\n                }, this), selectedOrder.shippingAddress.city, \", \", selectedOrder.shippingAddress.postalCode, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 101\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: [\"Tlf: \", selectedOrder.phone]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"\\u2699\\uFE0F Gesti\\xF3n de Estado\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"status-form\",\n                children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                  value: statusUpdate.orderStatus,\n                  onChange: e => setStatusUpdate({\n                    ...statusUpdate,\n                    orderStatus: e.target.value\n                  }),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"pendiente\",\n                    children: \"Pendiente\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"procesando\",\n                    children: \"Procesando\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"enviado\",\n                    children: \"Enviado\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"entregado\",\n                    children: \"Entregado\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-primary\",\n                  onClick: updateOrderStatus,\n                  children: \"Actualizar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"\\uD83D\\uDCE6 Productos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this), selectedOrder.items.map((item, idx) => {\n              var _item$product;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mini-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [(_item$product = item.product) === null || _item$product === void 0 ? void 0 : _item$product.name, \" x\", item.quantity]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: formatPrice(item.price * item.quantity)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 21\n                }, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminOrders, \"MbCDC0tmEIxZad8ylFN/gR0sSuE=\");\n_c = AdminOrders;\nexport default AdminOrders;\nvar _c;\n$RefreshReg$(_c, \"AdminOrders\");","map":{"version":3,"names":["React","useState","useEffect","FaEye","FaEdit","FaPhone","FaTruck","FaFilePdf","FaSync","FaPrint","axios","jsxDEV","_jsxDEV","AdminOrders","_s","orders","setOrders","loading","setLoading","selectedOrder","setSelectedOrder","showDetailModal","setShowDetailModal","statusUpdate","setStatusUpdate","orderStatus","paymentStatus","error","setError","API_URL","process","env","REACT_APP_API_URL","loadOrders","interval","setInterval","clearInterval","pendingToPrint","find","o","needsPrinting","handleAutoPrintNotification","token","localStorage","getItem","response","get","headers","ordersData","Array","isArray","data","console","order","audio","Audio","play","catch","e","log","window","confirm","_id","slice","_order$tracking","trackingId","tracking","downloadLabel","markAsPrinted","alert","orderId","put","Authorization","err","open","handleCreateTracking","carrier","prompt","post","updateOrderStatus","closeDetailModal","formatPrice","price","Intl","NumberFormat","style","currency","format","formatDate","date","Date","toLocaleDateString","day","month","hour","minute","openDetailModal","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","_order$user","toUpperCase","user","name","phone","totalAmount","stopPropagation","shippingAddress","street","city","postalCode","value","onChange","target","items","item","idx","_item$product","product","quantity","_c","$RefreshReg$"],"sources":["C:/Users/ashu_/Documents/ecommerce-sim/frontend/src/components/admin/AdminChat.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { FaEye, FaEdit, FaPhone, FaTruck, FaFilePdf, FaSync, FaPrint } from 'react-icons/fa';\r\nimport axios from 'axios';\r\nimport '../../styles/AdminOrders.css';\r\n\r\nconst AdminOrders = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [showDetailModal, setShowDetailModal] = useState(false);\r\n  const [statusUpdate, setStatusUpdate] = useState({\r\n    orderStatus: '',\r\n    paymentStatus: ''\r\n  });\r\n  const [error, setError] = useState(null);\r\n\r\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n  // 1. Carga inicial y sistema de refresco autom√°tico (cada 30 seg)\r\n  useEffect(() => {\r\n    loadOrders();\r\n    const interval = setInterval(loadOrders, 30000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // 2. MONITOR DE IMPRESI√ìN: Detecta pedidos pagados que no han sido impresos\r\n  useEffect(() => {\r\n    const pendingToPrint = orders.find(o => o.needsPrinting === true && o.orderStatus === 'procesando');\r\n    if (pendingToPrint) {\r\n      handleAutoPrintNotification(pendingToPrint);\r\n    }\r\n  }, [orders]);\r\n\r\n  const loadOrders = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) return;\r\n\r\n      const response = await axios.get(`${API_URL}/orders`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      const ordersData = Array.isArray(response.data) ? response.data : [];\r\n      setOrders(ordersData);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Error al cargar pedidos:', error);\r\n      setError('Error de conexi√≥n');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- FUNCI√ìN DE IMPRESI√ìN AUTOM√ÅTICA ---\r\n  const handleAutoPrintNotification = (order) => {\r\n    // Sonido de alerta de nuevo pedido\r\n    const audio = new Audio('https://assets.mixkit.co/active_storage/sfx/2358/2358-preview.mp3');\r\n    audio.play().catch(e => console.log(\"Audio bloqueado por navegador\"));\r\n\r\n    if (window.confirm(`üì¶ ¬°NUEVO PEDIDO RECIBIDO! #${order._id.slice(-6)}\\n¬øDeseas abrir la etiqueta para imprimirla ahora mismo?`)) {\r\n      const trackingId = order.tracking?._id || order.tracking;\r\n      if (trackingId) {\r\n        downloadLabel(trackingId);\r\n        markAsPrinted(order._id);\r\n      } else {\r\n        alert(\"El pedido a√∫n no tiene tracking generado.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const markAsPrinted = async (orderId) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.put(`${API_URL}/orders/${orderId}/printed`, {}, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      loadOrders(); // Actualizar lista para quitar el aviso\r\n    } catch (err) {\r\n      console.error(\"Error al marcar como impreso\", err);\r\n    }\r\n  };\r\n\r\n  const downloadLabel = (trackingId) => {\r\n    const token = localStorage.getItem('token');\r\n    window.open(`${API_URL}/tracking/label/${trackingId}?token=${token}`, '_blank');\r\n  };\r\n\r\n  const handleCreateTracking = async (orderId) => {\r\n    const carrier = prompt(\"Introduce el transportista:\", \"SimShip Express\");\r\n    if (!carrier) return;\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.post(`${API_URL}/tracking/create`, { orderId, carrier }, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      alert(\"Tracking generado correctamente\");\r\n      loadOrders();\r\n    } catch (err) {\r\n      alert(\"Error al generar tracking\");\r\n    }\r\n  };\r\n\r\n  const updateOrderStatus = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.put(`${API_URL}/orders/${selectedOrder._id}/status`, statusUpdate, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      alert('Estado actualizado');\r\n      closeDetailModal();\r\n      loadOrders();\r\n    } catch (error) {\r\n      alert('Error al actualizar');\r\n    }\r\n  };\r\n\r\n  // Formateadores\r\n  const formatPrice = (price) => new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR' }).format(price);\r\n  const formatDate = (date) => new Date(date).toLocaleDateString('es-ES', { day: 'numeric', month: 'short', hour: '2-digit', minute: '2-digit' });\r\n\r\n  const openDetailModal = (order) => {\r\n    setSelectedOrder(order);\r\n    setStatusUpdate({ orderStatus: order.orderStatus, paymentStatus: order.paymentStatus });\r\n    setShowDetailModal(true);\r\n  };\r\n\r\n  const closeDetailModal = () => { setShowDetailModal(false); setSelectedOrder(null); };\r\n\r\n  if (loading) return <div className=\"admin-orders\"><div className=\"spinner-large\"></div></div>;\r\n\r\n  return (\r\n    <div className=\"admin-orders\">\r\n      <div className=\"page-header\">\r\n        <h2>üöÄ Panel de Almac√©n y Log√≠stica</h2>\r\n        <div className=\"header-actions\">\r\n           <button className=\"btn btn-secondary\" onClick={loadOrders}><FaSync /> Refrescar</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"table-responsive\">\r\n        <table className=\"admin-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Pedido</th>\r\n              <th>Cliente</th>\r\n              <th>Total</th>\r\n              <th>Estado Pedido</th>\r\n              <th>Acci√≥n de Env√≠o</th>\r\n              <th>Etiqueta</th>\r\n              <th>Acciones</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {orders.map(order => (\r\n              <tr key={order._id} className={order.needsPrinting ? 'row-new-order' : ''}>\r\n                <td><strong>#{order._id.slice(-6).toUpperCase()}</strong></td>\r\n                <td>\r\n                  <div className=\"customer-cell\">\r\n                    {order.user?.name}\r\n                    <small><FaPhone /> {order.phone || 'S/T'}</small>\r\n                  </div>\r\n                </td>\r\n                <td>{formatPrice(order.totalAmount)}</td>\r\n                <td>\r\n                  <span className={`badge badge-${order.orderStatus}`}>\r\n                    {order.orderStatus}\r\n                  </span>\r\n                </td>\r\n                <td>\r\n                  {!order.tracking ? (\r\n                    <button className=\"btn-table btn-generate\" onClick={() => handleCreateTracking(order._id)}>\r\n                      <FaTruck /> Generar Tracking\r\n                    </button>\r\n                  ) : (\r\n                    <span className=\"text-success\"><FaTruck /> {order.tracking.carrier || 'Asignado'}</span>\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  {order.tracking ? (\r\n                    <button \r\n                      className={`btn-table ${order.needsPrinting ? 'btn-pdf-urgent' : 'btn-pdf'}`} \r\n                      onClick={() => downloadLabel(order.tracking._id || order.tracking)}\r\n                    >\r\n                      <FaPrint /> Imprimir\r\n                    </button>\r\n                  ) : '---'}\r\n                </td>\r\n                <td>\r\n                  <button className=\"btn-icon\" onClick={() => openDetailModal(order)}><FaEye /></button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Modal de Detalle */}\r\n      {showDetailModal && selectedOrder && (\r\n        <div className=\"modal-overlay\" onClick={closeDetailModal}>\r\n          <div className=\"modal-content large\" onClick={e => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h3>Detalle Pedido #{selectedOrder._id.slice(-8)}</h3>\r\n              <button className=\"modal-close\" onClick={closeDetailModal}>√ó</button>\r\n            </div>\r\n            \r\n            <div className=\"modal-body\">\r\n              <div className=\"detail-grid\">\r\n                <div className=\"section\">\r\n                  <h4>üìç Direcci√≥n de Env√≠o</h4>\r\n                  <p>\r\n                    {selectedOrder.shippingAddress.street}<br/>\r\n                    {selectedOrder.shippingAddress.city}, {selectedOrder.shippingAddress.postalCode}<br/>\r\n                    <strong>Tlf: {selectedOrder.phone}</strong>\r\n                  </p>\r\n                </div>\r\n                \r\n                <div className=\"section\">\r\n                  <h4>‚öôÔ∏è Gesti√≥n de Estado</h4>\r\n                  <div className=\"status-form\">\r\n                    <select \r\n                      value={statusUpdate.orderStatus} \r\n                      onChange={(e) => setStatusUpdate({...statusUpdate, orderStatus: e.target.value})}\r\n                    >\r\n                      <option value=\"pendiente\">Pendiente</option>\r\n                      <option value=\"procesando\">Procesando</option>\r\n                      <option value=\"enviado\">Enviado</option>\r\n                      <option value=\"entregado\">Entregado</option>\r\n                    </select>\r\n                    <button className=\"btn-primary\" onClick={updateOrderStatus}>Actualizar</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"section\">\r\n                <h4>üì¶ Productos</h4>\r\n                {selectedOrder.items.map((item, idx) => (\r\n                  <div key={idx} className=\"mini-item\">\r\n                    <span>{item.product?.name} x{item.quantity}</span>\r\n                    <strong>{formatPrice(item.price * item.quantity)}</strong>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminOrders;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}