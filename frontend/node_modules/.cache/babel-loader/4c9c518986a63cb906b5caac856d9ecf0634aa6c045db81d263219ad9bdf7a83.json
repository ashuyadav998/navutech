{"ast":null,"code":"import React,{useState,useEffect}from'react';import{FaUserShield,FaUser}from'react-icons/fa';import axios from'axios';import'../../styles/AdminUsers.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminUsers=()=>{const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';useEffect(()=>{loadUsers();},[]);const loadUsers=async()=>{try{setLoading(true);// Nota: Necesitarás crear este endpoint en el backend\nconst response=await axios.get(\"\".concat(API_URL,\"/users\")).catch(()=>({data:[]}));setUsers(response.data);}catch(error){console.error('Error al cargar usuarios:',error);}finally{setLoading(false);}};const formatDate=date=>{return new Date(date).toLocaleDateString('es-ES',{year:'numeric',month:'long',day:'numeric'});};const toggleUserRole=async(userId,currentRole)=>{const newRole=currentRole==='admin'?'user':'admin';if(window.confirm(\"\\xBFCambiar rol de usuario a \".concat(newRole,\"?\"))){try{await axios.put(\"\".concat(API_URL,\"/users/\").concat(userId),{role:newRole});alert('Rol actualizado correctamente');loadUsers();}catch(error){console.error('Error al actualizar rol:',error);alert('Error al actualizar el rol');}}};const toggleUserStatus=async(userId,currentStatus)=>{const newStatus=!currentStatus;if(window.confirm(\"\\xBF\".concat(newStatus?'Activar':'Desactivar',\" este usuario?\"))){try{await axios.put(\"\".concat(API_URL,\"/users/\").concat(userId),{active:newStatus});alert('Estado actualizado correctamente');loadUsers();}catch(error){console.error('Error al actualizar estado:',error);alert('Error al actualizar el estado');}}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Cargando usuarios...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-users\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gesti\\xF3n de Usuarios\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"users-stats\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-item\",children:[\"Total: \",/*#__PURE__*/_jsx(\"strong\",{children:users.length})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-item\",children:[\"Admins: \",/*#__PURE__*/_jsx(\"strong\",{children:users.filter(u=>u.role==='admin').length})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-item\",children:[\"Usuarios: \",/*#__PURE__*/_jsx(\"strong\",{children:users.filter(u=>u.role==='user').length})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-responsive\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Usuario\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Rol\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Estado\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Registro\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-cell\",children:[user.role==='admin'?/*#__PURE__*/_jsx(FaUserShield,{}):/*#__PURE__*/_jsx(FaUser,{}),/*#__PURE__*/_jsx(\"strong\",{children:user.name})]})}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.phone||'-'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(user.role==='admin'?'badge-primary':'badge-secondary'),children:user.role})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(user.active?'active':'inactive'),children:user.active?'Activo':'Inactivo'})}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(user.createdAt)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-small btn-secondary\",onClick:()=>toggleUserRole(user._id,user.role),children:\"Cambiar rol\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-small \".concat(user.active?'btn-danger':'btn-success'),onClick:()=>toggleUserStatus(user._id,user.active),children:user.active?'Desactivar':'Activar'})]})})]},user._id))})]}),users.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No hay usuarios registrados\"})]})]});};export default AdminUsers;","map":{"version":3,"names":["React","useState","useEffect","FaUserShield","FaUser","axios","jsx","_jsx","jsxs","_jsxs","AdminUsers","users","setUsers","loading","setLoading","API_URL","process","env","REACT_APP_API_URL","loadUsers","response","get","concat","catch","data","error","console","formatDate","date","Date","toLocaleDateString","year","month","day","toggleUserRole","userId","currentRole","newRole","window","confirm","put","role","alert","toggleUserStatus","currentStatus","newStatus","active","className","children","length","filter","u","map","user","name","email","phone","createdAt","onClick","_id"],"sources":["C:/Users/ashu_/Documents/ecommerce-sim/frontend/src/pages/admin/AdminUsers.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { FaUserShield, FaUser } from 'react-icons/fa';\nimport axios from 'axios';\nimport '../../styles/AdminUsers.css';\n\nconst AdminUsers = () => {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n  useEffect(() => {\n    loadUsers();\n  }, []);\n\n  const loadUsers = async () => {\n    try {\n      setLoading(true);\n      // Nota: Necesitarás crear este endpoint en el backend\n      const response = await axios.get(`${API_URL}/users`).catch(() => ({ data: [] }));\n      setUsers(response.data);\n    } catch (error) {\n      console.error('Error al cargar usuarios:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const formatDate = (date) => {\n    return new Date(date).toLocaleDateString('es-ES', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  const toggleUserRole = async (userId, currentRole) => {\n    const newRole = currentRole === 'admin' ? 'user' : 'admin';\n    \n    if (window.confirm(`¿Cambiar rol de usuario a ${newRole}?`)) {\n      try {\n        await axios.put(`${API_URL}/users/${userId}`, { role: newRole });\n        alert('Rol actualizado correctamente');\n        loadUsers();\n      } catch (error) {\n        console.error('Error al actualizar rol:', error);\n        alert('Error al actualizar el rol');\n      }\n    }\n  };\n\n  const toggleUserStatus = async (userId, currentStatus) => {\n    const newStatus = !currentStatus;\n    \n    if (window.confirm(`¿${newStatus ? 'Activar' : 'Desactivar'} este usuario?`)) {\n      try {\n        await axios.put(`${API_URL}/users/${userId}`, { active: newStatus });\n        alert('Estado actualizado correctamente');\n        loadUsers();\n      } catch (error) {\n        console.error('Error al actualizar estado:', error);\n        alert('Error al actualizar el estado');\n      }\n    }\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Cargando usuarios...</div>;\n  }\n\n  return (\n    <div className=\"admin-users\">\n      <div className=\"page-header\">\n        <h2>Gestión de Usuarios</h2>\n        <div className=\"users-stats\">\n          <span className=\"stat-item\">\n            Total: <strong>{users.length}</strong>\n          </span>\n          <span className=\"stat-item\">\n            Admins: <strong>{users.filter(u => u.role === 'admin').length}</strong>\n          </span>\n          <span className=\"stat-item\">\n            Usuarios: <strong>{users.filter(u => u.role === 'user').length}</strong>\n          </span>\n        </div>\n      </div>\n\n      <div className=\"table-responsive\">\n        <table className=\"admin-table\">\n          <thead>\n            <tr>\n              <th>Usuario</th>\n              <th>Email</th>\n              <th>Teléfono</th>\n              <th>Rol</th>\n              <th>Estado</th>\n              <th>Registro</th>\n              <th>Acciones</th>\n            </tr>\n          </thead>\n          <tbody>\n            {users.map(user => (\n              <tr key={user._id}>\n                <td>\n                  <div className=\"user-cell\">\n                    {user.role === 'admin' ? <FaUserShield /> : <FaUser />}\n                    <strong>{user.name}</strong>\n                  </div>\n                </td>\n                <td>{user.email}</td>\n                <td>{user.phone || '-'}</td>\n                <td>\n                  <span className={`badge ${user.role === 'admin' ? 'badge-primary' : 'badge-secondary'}`}>\n                    {user.role}\n                  </span>\n                </td>\n                <td>\n                  <span className={`status-badge ${user.active ? 'active' : 'inactive'}`}>\n                    {user.active ? 'Activo' : 'Inactivo'}\n                  </span>\n                </td>\n                <td>{formatDate(user.createdAt)}</td>\n                <td>\n                  <div className=\"action-buttons\">\n                    <button \n                      className=\"btn btn-small btn-secondary\"\n                      onClick={() => toggleUserRole(user._id, user.role)}\n                    >\n                      Cambiar rol\n                    </button>\n                    <button \n                      className={`btn btn-small ${user.active ? 'btn-danger' : 'btn-success'}`}\n                      onClick={() => toggleUserStatus(user._id, user.active)}\n                    >\n                      {user.active ? 'Desactivar' : 'Activar'}\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n\n        {users.length === 0 && (\n          <div className=\"no-data\">No hay usuarios registrados</div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminUsers;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}