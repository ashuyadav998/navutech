{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{FaBox,FaTruck,FaExternalLinkAlt}from'react-icons/fa';import TrackingView from'../TrackingView';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';const OrdersTab=()=>{const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const loadOrders=async()=>{try{const token=localStorage.getItem('token');const response=await axios.get(\"\".concat(API_URL,\"/orders/my-orders\"),{headers:{Authorization:\"Bearer \".concat(token)}});setOrders(response.data);}catch(error){console.error('Error al cargar pedidos:',error);}finally{setLoading(false);}};loadOrders();},[]);const formatPrice=price=>new Intl.NumberFormat('es-ES',{style:'currency',currency:'EUR'}).format(price);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"tab-loading\",children:\"Cargando tus pedidos...\"});if(orders.length===0)return/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(FaBox,{size:48}),/*#__PURE__*/_jsx(\"h3\",{children:\"A\\xFAn no tienes pedidos\"})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"orders-tab\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Historial de Pedidos\"}),/*#__PURE__*/_jsx(\"div\",{className:\"orders-list\",children:orders.map(order=>/*#__PURE__*/_jsxs(\"div\",{className:\"order-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"order-id\",children:[\"#\",order._id.slice(-8).toUpperCase()]}),/*#__PURE__*/_jsx(\"span\",{className:\"order-date\",children:new Date(order.createdAt).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(order.orderStatus),children:order.orderStatus})]}),order.tracking&&/*#__PURE__*/_jsxs(\"div\",{className:\"tracking-realtime-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tracking-header\",children:[/*#__PURE__*/_jsx(FaTruck,{}),\" Seguimiento\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tracking-body\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Carrier:\"}),\" \",order.tracking.carrier]}),order.tracking.trackingUrl&&/*#__PURE__*/_jsxs(\"a\",{href:order.tracking.trackingUrl,target:\"_blank\",rel:\"noopener noreferrer\",className:\"tracking-external-btn\",children:[\"VER EN TIEMPO REAL \",/*#__PURE__*/_jsx(FaExternalLinkAlt,{size:12})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"order-items\",children:order.items.map((item,i)=>{var _item$product,_item$product$images,_item$product2;return/*#__PURE__*/_jsxs(\"div\",{className:\"order-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:((_item$product=item.product)===null||_item$product===void 0?void 0:(_item$product$images=_item$product.images)===null||_item$product$images===void 0?void 0:_item$product$images[0])||'https://via.placeholder.com/50',alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-details\",children:[/*#__PURE__*/_jsx(\"p\",{children:(_item$product2=item.product)===null||_item$product2===void 0?void 0:_item$product2.name}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Cant: \",item.quantity]})]}),/*#__PURE__*/_jsx(\"span\",{children:formatPrice(item.price*item.quantity)})]},i);})})]},order._id))})]});};export default OrdersTab;","map":{"version":3,"names":["React","useState","useEffect","axios","FaBox","FaTruck","FaExternalLinkAlt","TrackingView","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","OrdersTab","orders","setOrders","loading","setLoading","loadOrders","token","localStorage","getItem","response","get","concat","headers","Authorization","data","error","console","formatPrice","price","Intl","NumberFormat","style","currency","format","className","children","length","size","map","order","_id","slice","toUpperCase","Date","createdAt","toLocaleDateString","orderStatus","tracking","carrier","trackingUrl","href","target","rel","items","item","i","_item$product","_item$product$images","_item$product2","src","product","images","alt","name","quantity"],"sources":["C:/Users/ashu_/Documents/ecommerce-sim/frontend/src/components/profile/OrdersTab.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { FaBox, FaTruck, FaExternalLinkAlt } from 'react-icons/fa';\r\nimport TrackingView from '../TrackingView';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nconst OrdersTab = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const loadOrders = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const response = await axios.get(`${API_URL}/orders/my-orders`, {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        setOrders(response.data);\r\n      } catch (error) {\r\n        console.error('Error al cargar pedidos:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    loadOrders();\r\n  }, []);\r\n\r\n  const formatPrice = (price) => new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR' }).format(price);\r\n\r\n  if (loading) return <div className=\"tab-loading\">Cargando tus pedidos...</div>;\r\n\r\n  if (orders.length === 0) return (\r\n    <div className=\"empty-state\">\r\n      <FaBox size={48} />\r\n      <h3>AÃºn no tienes pedidos</h3>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"orders-tab\">\r\n      <h2>Historial de Pedidos</h2>\r\n      <div className=\"orders-list\">\r\n        {orders.map(order => (\r\n          <div key={order._id} className=\"order-card\">\r\n            <div className=\"order-header\">\r\n              <div className=\"order-meta\">\r\n                <span className=\"order-id\">#{order._id.slice(-8).toUpperCase()}</span>\r\n                <span className=\"order-date\">{new Date(order.createdAt).toLocaleDateString()}</span>\r\n              </div>\r\n              <span className={`status-badge ${order.orderStatus}`}>{order.orderStatus}</span>\r\n            </div>\r\n\r\n            {order.tracking && (\r\n              <div className=\"tracking-realtime-card\">\r\n                <div className=\"tracking-header\"><FaTruck /> Seguimiento</div>\r\n                <div className=\"tracking-body\">\r\n                  <p><strong>Carrier:</strong> {order.tracking.carrier}</p>\r\n                  {order.tracking.trackingUrl && (\r\n                    <a href={order.tracking.trackingUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"tracking-external-btn\">\r\n                      VER EN TIEMPO REAL <FaExternalLinkAlt size={12} />\r\n                    </a>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"order-items\">\r\n              {order.items.map((item, i) => (\r\n                <div key={i} className=\"order-item\">\r\n                  <img src={item.product?.images?.[0] || 'https://via.placeholder.com/50'} alt=\"\" />\r\n                  <div className=\"item-details\">\r\n                    <p>{item.product?.name}</p>\r\n                    <small>Cant: {item.quantity}</small>\r\n                  </div>\r\n                  <span>{formatPrice(item.price * item.quantity)}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrdersTab;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}