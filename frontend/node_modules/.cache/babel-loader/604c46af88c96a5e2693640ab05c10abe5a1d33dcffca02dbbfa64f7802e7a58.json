{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{FaShoppingCart,FaMinus,FaPlus}from'react-icons/fa';import{useCart}from'../context/CartContext';import{getProduct}from'../services/api';import'../styles/ProductDetail.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductDetail=()=>{const{slug}=useParams();const navigate=useNavigate();const{addToCart}=useCart();const[product,setProduct]=useState(null);const[quantity,setQuantity]=useState(1);const[loading,setLoading]=useState(true);const[selectedImage,setSelectedImage]=useState(0);useEffect(()=>{loadProduct();},[slug]);const loadProduct=async()=>{try{setLoading(true);const response=await getProduct(slug);setProduct(response.data);}catch(error){console.error('Error al cargar producto:',error);}finally{setLoading(false);}};const handleAddToCart=()=>{addToCart(product,quantity);alert('Producto añadido al carrito');};const handleBuyNow=()=>{addToCart(product,quantity);navigate('/carrito');};const formatPrice=price=>{return new Intl.NumberFormat('es-ES',{style:'currency',currency:'EUR'}).format(price);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Cargando producto...\"});}if(!product){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"Producto no encontrado\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"product-detail\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"product-layout\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-gallery\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main-image\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.images[selectedImage]||'https://via.placeholder.com/500',alt:product.name}),product.isOffer&&/*#__PURE__*/_jsxs(\"span\",{className:\"discount-badge\",children:[\"-\",product.discount,\"%\"]})]}),product.images.length>1&&/*#__PURE__*/_jsx(\"div\",{className:\"thumbnail-list\",children:product.images.map((image,index)=>/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"\".concat(product.name,\" \").concat(index+1),className:selectedImage===index?'active':'',onClick:()=>setSelectedImage(index)},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info-detail\",children:[product.brand&&/*#__PURE__*/_jsx(\"p\",{className:\"product-brand\",children:product.brand}),/*#__PURE__*/_jsx(\"h1\",{children:product.name}),product.category&&/*#__PURE__*/_jsxs(\"p\",{className:\"product-category\",children:[\"Categor\\xEDa: \",product.category.name]}),/*#__PURE__*/_jsx(\"div\",{className:\"product-price-detail\",children:product.originalPrice>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"price-original\",children:formatPrice(product.originalPrice)}),/*#__PURE__*/_jsx(\"span\",{className:\"price-current\",children:formatPrice(product.price)}),/*#__PURE__*/_jsxs(\"span\",{className:\"savings\",children:[\"Ahorras \",formatPrice(product.originalPrice-product.price)]})]}):/*#__PURE__*/_jsx(\"span\",{className:\"price-current\",children:formatPrice(product.price)})}),/*#__PURE__*/_jsx(\"div\",{className:\"product-stock-detail\",children:product.stock>0?/*#__PURE__*/_jsxs(\"span\",{className:\"in-stock\",children:[\"\\u2713 En stock (\",product.stock,\" disponibles)\"]}):/*#__PURE__*/_jsx(\"span\",{className:\"out-stock\",children:\"\\u2717 Agotado\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-description\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"p\",{children:product.description})]}),product.specifications&&product.specifications.size>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"product-specs\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Especificaciones\"}),/*#__PURE__*/_jsx(\"ul\",{children:Array.from(product.specifications).map(_ref=>{let[key,value]=_ref;return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[key,\":\"]}),\" \",value]},key);})})]}),product.stock>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"product-actions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-selector\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuantity(Math.max(1,quantity-1)),disabled:quantity<=1,children:/*#__PURE__*/_jsx(FaMinus,{})}),/*#__PURE__*/_jsx(\"span\",{children:quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuantity(Math.min(product.stock,quantity+1)),disabled:quantity>=product.stock,children:/*#__PURE__*/_jsx(FaPlus,{})})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"add-to-cart-btn\",onClick:handleAddToCart,children:[/*#__PURE__*/_jsx(FaShoppingCart,{}),\"A\\xF1adir al carrito\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"buy-now-btn\",onClick:handleBuyNow,children:\"Comprar ahora\"})]})]})]})})});};export default ProductDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","FaShoppingCart","FaMinus","FaPlus","useCart","getProduct","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductDetail","slug","navigate","addToCart","product","setProduct","quantity","setQuantity","loading","setLoading","selectedImage","setSelectedImage","loadProduct","response","data","error","console","handleAddToCart","alert","handleBuyNow","formatPrice","price","Intl","NumberFormat","style","currency","format","className","children","src","images","alt","name","isOffer","discount","length","map","image","index","concat","onClick","brand","category","originalPrice","stock","description","specifications","size","Array","from","_ref","key","value","Math","max","disabled","min"],"sources":["C:/Users/ashu_/Documents/ecommerce-sim/frontend/src/pages/ProductDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { FaShoppingCart, FaMinus, FaPlus } from 'react-icons/fa';\nimport { useCart } from '../context/CartContext';\nimport { getProduct } from '../services/api';\nimport '../styles/ProductDetail.css';\n\nconst ProductDetail = () => {\n  const { slug } = useParams();\n  const navigate = useNavigate();\n  const { addToCart } = useCart();\n  const [product, setProduct] = useState(null);\n  const [quantity, setQuantity] = useState(1);\n  const [loading, setLoading] = useState(true);\n  const [selectedImage, setSelectedImage] = useState(0);\n\n  useEffect(() => {\n    loadProduct();\n  }, [slug]);\n\n  const loadProduct = async () => {\n    try {\n      setLoading(true);\n      const response = await getProduct(slug);\n      setProduct(response.data);\n    } catch (error) {\n      console.error('Error al cargar producto:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddToCart = () => {\n    addToCart(product, quantity);\n    alert('Producto añadido al carrito');\n  };\n\n  const handleBuyNow = () => {\n    addToCart(product, quantity);\n    navigate('/carrito');\n  };\n\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('es-ES', {\n      style: 'currency',\n      currency: 'EUR'\n    }).format(price);\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Cargando producto...</div>;\n  }\n\n  if (!product) {\n    return <div className=\"error\">Producto no encontrado</div>;\n  }\n\n  return (\n    <div className=\"product-detail\">\n      <div className=\"container\">\n        <div className=\"product-layout\">\n          {/* Galería de imágenes */}\n          <div className=\"product-gallery\">\n            <div className=\"main-image\">\n              <img \n                src={product.images[selectedImage] || 'https://via.placeholder.com/500'} \n                alt={product.name} \n              />\n              {product.isOffer && (\n                <span className=\"discount-badge\">-{product.discount}%</span>\n              )}\n            </div>\n            {product.images.length > 1 && (\n              <div className=\"thumbnail-list\">\n                {product.images.map((image, index) => (\n                  <img\n                    key={index}\n                    src={image}\n                    alt={`${product.name} ${index + 1}`}\n                    className={selectedImage === index ? 'active' : ''}\n                    onClick={() => setSelectedImage(index)}\n                  />\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Información del producto */}\n          <div className=\"product-info-detail\">\n            {product.brand && <p className=\"product-brand\">{product.brand}</p>}\n            <h1>{product.name}</h1>\n            \n            {product.category && (\n              <p className=\"product-category\">\n                Categoría: {product.category.name}\n              </p>\n            )}\n\n            <div className=\"product-price-detail\">\n              {product.originalPrice > 0 ? (\n                <>\n                  <span className=\"price-original\">{formatPrice(product.originalPrice)}</span>\n                  <span className=\"price-current\">{formatPrice(product.price)}</span>\n                  <span className=\"savings\">\n                    Ahorras {formatPrice(product.originalPrice - product.price)}\n                  </span>\n                </>\n              ) : (\n                <span className=\"price-current\">{formatPrice(product.price)}</span>\n              )}\n            </div>\n\n            <div className=\"product-stock-detail\">\n              {product.stock > 0 ? (\n                <span className=\"in-stock\">✓ En stock ({product.stock} disponibles)</span>\n              ) : (\n                <span className=\"out-stock\">✗ Agotado</span>\n              )}\n            </div>\n\n            <div className=\"product-description\">\n              <h3>Descripción</h3>\n              <p>{product.description}</p>\n            </div>\n\n            {product.specifications && product.specifications.size > 0 && (\n              <div className=\"product-specs\">\n                <h3>Especificaciones</h3>\n                <ul>\n                  {Array.from(product.specifications).map(([key, value]) => (\n                    <li key={key}>\n                      <strong>{key}:</strong> {value}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n\n            {product.stock > 0 && (\n              <div className=\"product-actions\">\n                <div className=\"quantity-selector\">\n                  <button \n                    onClick={() => setQuantity(Math.max(1, quantity - 1))}\n                    disabled={quantity <= 1}\n                  >\n                    <FaMinus />\n                  </button>\n                  <span>{quantity}</span>\n                  <button \n                    onClick={() => setQuantity(Math.min(product.stock, quantity + 1))}\n                    disabled={quantity >= product.stock}\n                  >\n                    <FaPlus />\n                  </button>\n                </div>\n\n                <button className=\"add-to-cart-btn\" onClick={handleAddToCart}>\n                  <FaShoppingCart />\n                  Añadir al carrito\n                </button>\n\n                <button className=\"buy-now-btn\" onClick={handleBuyNow}>\n                  Comprar ahora\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}