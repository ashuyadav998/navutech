{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ashu_\\\\Documents\\\\ecommerce-sim\\\\frontend\\\\src\\\\pages\\\\admin\\\\AdminOrders.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { FaEye, FaEdit, FaPhone, FaTruck, FaFilePdf, FaSync, FaPrint, FaCheckCircle, FaDownload } from 'react-icons/fa';\nimport axios from 'axios';\nimport '../../styles/AdminOrders.css';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminOrders = () => {\n  _s();\n  var _selectedOrder$user, _selectedOrder$shippi, _selectedOrder$shippi2, _selectedOrder$shippi3, _selectedOrder$shippi4, _selectedOrder$items, _selectedOrder$items2;\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [selectedOrder, setSelectedOrder] = useState(null);\n  const [showDetailModal, setShowDetailModal] = useState(false);\n  const [statusUpdate, setStatusUpdate] = useState({\n    orderStatus: '',\n    paymentStatus: ''\n  });\n  const [error, setError] = useState(null);\n  const notifiedOrders = useRef(new Set());\n  const isFirstLoad = useRef(true);\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n  useEffect(() => {\n    loadOrders(true);\n\n    // Solicitar permiso para notificaciones del navegador\n    if (Notification.permission === \"default\") {\n      Notification.requestPermission();\n    }\n    const interval = setInterval(() => loadOrders(false), 30000);\n    return () => clearInterval(interval);\n  }, []);\n  useEffect(() => {\n    // Detectar nuevos pedidos (que no hayan sido notificados antes)\n    const newOrders = orders.filter(o => !notifiedOrders.current.has(o._id) && o.orderStatus === 'pendiente' // Solo notificar pedidos pendientes\n    );\n    if (newOrders.length > 0 && !isFirstLoad.current) {\n      // Marcar como notificados\n      newOrders.forEach(order => notifiedOrders.current.add(order._id));\n\n      // Mostrar notificaciÃ³n\n      handleNewOrderNotification(newOrders);\n    }\n  }, [orders]);\n  const handleNewOrderNotification = newOrders => {\n    // Sonido de alerta\n    const audio = new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3');\n    audio.play().catch(() => console.log('No se pudo reproducir el sonido'));\n\n    // NotificaciÃ³n visual con Toast\n    newOrders.forEach(order => {\n      var _order$user;\n      toast.success(`ðŸ”” Â¡NUEVO PEDIDO! #${order._id.slice(-6).toUpperCase()}\\n` + `Cliente: ${((_order$user = order.user) === null || _order$user === void 0 ? void 0 : _order$user.name) || 'Desconocido'}\\n` + `Total: ${formatPrice(order.totalAmount)}`, {\n        position: \"top-right\",\n        autoClose: 8000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    });\n\n    // VibraciÃ³n (si estÃ¡ disponible en el dispositivo)\n    if (navigator.vibrate) {\n      navigator.vibrate([200, 100, 200]);\n    }\n\n    // NotificaciÃ³n del navegador (si estÃ¡ permitido)\n    if (Notification.permission === \"granted\") {\n      new Notification(\"ðŸ›’ Nuevo pedido recibido\", {\n        body: `${newOrders.length} pedido(s) nuevo(s). Total: ${formatPrice(newOrders.reduce((sum, o) => sum + o.totalAmount, 0))}`,\n        icon: \"/logo192.png\",\n        badge: \"/logo192.png\"\n      });\n    }\n  };\n  const loadOrders = async (initial = false) => {\n    try {\n      if (initial) setLoading(true);\n      setRefreshing(true);\n      setError(null);\n      const token = sessionStorage.getItem('token');\n      if (!token) {\n        setError('No estÃ¡s autenticado. Por favor, inicia sesiÃ³n.');\n        setLoading(false);\n        return;\n      }\n      const response = await axios.get(`${API_URL}/orders`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const ordersData = Array.isArray(response.data) ? response.data : [];\n      setOrders(ordersData);\n      if (initial) {\n        ordersData.forEach(o => notifiedOrders.current.add(o._id));\n        isFirstLoad.current = false;\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('âŒ Error al cargar pedidos:', error);\n      if (initial) setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Error al cargar los pedidos');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  // Descargar etiqueta PDF directamente desde el tracking\n  const downloadLabel = async order => {\n    try {\n      var _order$tracking;\n      const trackingNumber = ((_order$tracking = order.tracking) === null || _order$tracking === void 0 ? void 0 : _order$tracking.trackingNumber) || order.trackingNumber;\n      if (!trackingNumber) {\n        toast.error('No hay nÃºmero de tracking disponible');\n        return;\n      }\n      const token = sessionStorage.getItem('token');\n\n      // Hacer peticiÃ³n al endpoint de descarga\n      const response = await axios.get(`${API_URL}/tracking/${trackingNumber}/label`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        responseType: 'blob' // Importante para recibir el PDF\n      });\n\n      // Crear blob y descargar\n      const blob = new Blob([response.data], {\n        type: 'application/pdf'\n      });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `etiqueta-${trackingNumber}.pdf`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n      toast.success('âœ… Etiqueta descargada correctamente');\n    } catch (err) {\n      console.error('Error descargando etiqueta:', err);\n      toast.error('Error al descargar la etiqueta');\n    }\n  };\n\n  // Ver etiqueta en nueva pestaÃ±a\n  const viewLabel = order => {\n    var _order$tracking2;\n    const trackingNumber = ((_order$tracking2 = order.tracking) === null || _order$tracking2 === void 0 ? void 0 : _order$tracking2.trackingNumber) || order.trackingNumber;\n    if (trackingNumber) {\n      window.open(`${API_URL}/tracking/${trackingNumber}/label/preview`, '_blank');\n    }\n  };\n  const handleShipping = async order => {\n    try {\n      const token = sessionStorage.getItem('token');\n      const response = await axios.post(`${API_URL}/orders/${order._id}/shipping`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      if (response.data.trackingId) {\n        toast.success(`âœ… Pre-registro completado. CÃ³digo: ${response.data.trackingId}`);\n        loadOrders(false);\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(\"Error al realizar pre-registro\", err);\n      toast.error(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Error al realizar el pre-registro de envÃ­o\");\n    }\n  };\n\n  // Crear tracking con Mock Service\n  const handleCreateTracking = async orderId => {\n    const token = sessionStorage.getItem('token');\n    if (!token) {\n      toast.error(\"SesiÃ³n expirada. Vuelve a iniciar sesiÃ³n.\");\n      return;\n    }\n    try {\n      const loadingToast = toast.loading(\"â³ Generando etiqueta simulada...\");\n      const response = await axios.post(`${API_URL}/tracking/create`, {\n        orderId\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      toast.update(loadingToast, {\n        render: \"âœ… Etiqueta generada con Ã©xito\",\n        type: \"success\",\n        isLoading: false,\n        autoClose: 3000\n      });\n      loadOrders(false);\n    } catch (error) {\n      var _error$response2, _error$response3, _error$response3$data;\n      console.error(\"Error detallado:\", (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n      toast.error(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || \"Error al generar la etiqueta\");\n    }\n  };\n  const formatPrice = price => {\n    return new Intl.NumberFormat('es-ES', {\n      style: 'currency',\n      currency: 'EUR'\n    }).format(price);\n  };\n  const getStatusBadge = status => {\n    const statusMap = {\n      pendiente: 'badge-warning',\n      procesando: 'badge-info',\n      enviado: 'badge-primary',\n      entregado: 'badge-success',\n      cancelado: 'badge-danger',\n      pagado: 'badge-success',\n      fallido: 'badge-danger'\n    };\n    return statusMap[status] || 'badge-secondary';\n  };\n  const getStatusLabel = status => {\n    const labels = {\n      pendiente: 'Pendiente',\n      procesando: 'Procesando',\n      enviado: 'Enviado',\n      entregado: 'Entregado',\n      cancelado: 'Cancelado',\n      pagado: 'Pagado',\n      fallido: 'Fallido'\n    };\n    return labels[status] || status;\n  };\n  const openDetailModal = order => {\n    setSelectedOrder(order);\n    setStatusUpdate({\n      orderStatus: order.orderStatus,\n      paymentStatus: order.paymentStatus\n    });\n    setShowDetailModal(true);\n  };\n  const closeDetailModal = () => {\n    setShowDetailModal(false);\n    setSelectedOrder(null);\n  };\n  const handleStatusChange = e => {\n    setStatusUpdate({\n      ...statusUpdate,\n      [e.target.name]: e.target.value\n    });\n  };\n  const updateOrderStatus = async () => {\n    try {\n      const token = sessionStorage.getItem('token');\n      await axios.put(`${API_URL}/orders/${selectedOrder._id}/status`, statusUpdate, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      toast.success('Estado actualizado correctamente');\n      closeDetailModal();\n      loadOrders(false);\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      toast.error(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || 'Error al actualizar');\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-orders\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 88\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Cargando pedidos...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 125\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 53\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-orders\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 84\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 98\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => loadOrders(true),\n        children: \"\\uD83D\\uDD04 Reintentar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 112\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 51\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 267,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-orders\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Gesti\\xF3n de Pedidos \", refreshing && /*#__PURE__*/_jsxDEV(\"small\", {\n          style: {\n            fontSize: '12px',\n            marginLeft: '10px'\n          },\n          children: \"\\uD83D\\uDD04 Actualizando...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 47\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"orders-stats\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-item\",\n          children: [\"Total: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: orders.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 46\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-item\",\n          children: [\"Pendientes: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: orders.filter(o => o.orderStatus === 'pendiente').length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 51\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-item\",\n          children: [\"Con etiqueta: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: orders.filter(o => o.tracking).length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 53\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary\",\n        onClick: () => loadOrders(true),\n        children: \"\\uD83D\\uDD04 Actualizar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-responsive\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"ID Pedido\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Cliente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Estado Pago\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Estado Pedido\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Etiqueta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Acciones\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: orders.map(order => {\n            var _order$user2;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: order.orderStatus === 'pendiente' ? 'row-urgent' : '',\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: [\"#\", order._id.slice(-8)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"customer-cell\",\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: ((_order$user2 = order.user) === null || _order$user2 === void 0 ? void 0 : _order$user2.name) || 'Usuario'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 300,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: [/*#__PURE__*/_jsxDEV(FaPhone, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 301,\n                      columnNumber: 28\n                    }, this), \" \", order.phone || 'S/T']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 301,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: formatPrice(order.totalAmount)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `badge ${getStatusBadge(order.paymentStatus)}`,\n                  children: getStatusLabel(order.paymentStatus)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `badge ${getStatusBadge(order.orderStatus)}`,\n                  children: getStatusLabel(order.orderStatus)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: !order.tracking ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-table btn-generate\",\n                  onClick: () => handleCreateTracking(order._id),\n                  children: [/*#__PURE__*/_jsxDEV(FaFilePdf, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 310,\n                    columnNumber: 23\n                  }, this), \" Generar Etiqueta\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    gap: '5px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-table btn-pdf\",\n                    onClick: () => downloadLabel(order),\n                    title: \"Descargar etiqueta PDF\",\n                    children: [/*#__PURE__*/_jsxDEV(FaDownload, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 319,\n                      columnNumber: 25\n                    }, this), \" Descargar\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 314,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-table btn-view\",\n                    onClick: () => viewLabel(order),\n                    title: \"Ver etiqueta\",\n                    style: {\n                      background: '#3498db'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(FaEye, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 327,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 321,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"action-buttons\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-icon btn-view\",\n                    onClick: () => openDetailModal(order),\n                    title: \"Ver detalles\",\n                    children: /*#__PURE__*/_jsxDEV(FaEye, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 335,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 334,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 17\n              }, this)]\n            }, order._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this), showDetailModal && selectedOrder && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: closeDetailModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content large\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Gesti\\xF3n de Pedido #\", selectedOrder._id.slice(-8).toUpperCase()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"modal-close\",\n            onClick: closeDetailModal,\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"order-detail-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-grid-top\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"\\uD83D\\uDCCD Direcci\\xF3n de Env\\xEDo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"address-box\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: ((_selectedOrder$user = selectedOrder.user) === null || _selectedOrder$user === void 0 ? void 0 : _selectedOrder$user.name) || 'Cliente'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 359,\n                    columnNumber: 24\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: (_selectedOrder$shippi = selectedOrder.shippingAddress) === null || _selectedOrder$shippi === void 0 ? void 0 : _selectedOrder$shippi.street\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [(_selectedOrder$shippi2 = selectedOrder.shippingAddress) === null || _selectedOrder$shippi2 === void 0 ? void 0 : _selectedOrder$shippi2.city, \", \", (_selectedOrder$shippi3 = selectedOrder.shippingAddress) === null || _selectedOrder$shippi3 === void 0 ? void 0 : _selectedOrder$shippi3.postalCode]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: (_selectedOrder$shippi4 = selectedOrder.shippingAddress) === null || _selectedOrder$shippi4 === void 0 ? void 0 : _selectedOrder$shippi4.country\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    marginTop: '10px',\n                    fontSize: '0.85rem',\n                    color: '#666'\n                  },\n                  children: [\"\\uD83D\\uDCDE \", selectedOrder.phone || 'Sin telÃ©fono']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"\\u2699\\uFE0F Estado del Pedido\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"status-update-form\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    style: {\n                      fontSize: '0.8rem',\n                      color: '#7f8c8d',\n                      display: 'block',\n                      marginBottom: '5px'\n                    },\n                    children: \"Cambiar Estado\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 373,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    name: \"orderStatus\",\n                    value: statusUpdate.orderStatus,\n                    onChange: handleStatusChange,\n                    className: \"form-select\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"pendiente\",\n                      children: \"Pendiente\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 380,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"procesando\",\n                      children: \"Procesando\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 381,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"enviado\",\n                      children: \"Enviado\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 382,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"entregado\",\n                      children: \"Entregado\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 383,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"cancelado\",\n                      children: \"Cancelado\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 384,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 374,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 372,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-update-status\",\n                  onClick: updateOrderStatus,\n                  children: [/*#__PURE__*/_jsxDEV(FaEdit, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 388,\n                    columnNumber: 23\n                  }, this), \" Guardar Cambios\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 15\n          }, this), selectedOrder.tracking && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"\\uD83D\\uDE9A Informaci\\xF3n de Env\\xEDo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '15px',\n                background: '#f8f9fa',\n                borderRadius: '8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Tracking:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 24\n                }, this), \" \", selectedOrder.tracking.trackingNumber]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Transportista:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 24\n                }, this), \" \", selectedOrder.tracking.carrier || 'Correos Express (Simulado)']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Estado:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 401,\n                  columnNumber: 24\n                }, this), \" \", selectedOrder.tracking.currentStatus || 'pendiente']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: '15px',\n                  display: 'flex',\n                  gap: '10px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-update-status\",\n                  onClick: () => downloadLabel(selectedOrder),\n                  style: {\n                    flex: 1\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(FaDownload, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 409,\n                    columnNumber: 25\n                  }, this), \" Descargar Etiqueta\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-update-status\",\n                  onClick: () => viewLabel(selectedOrder),\n                  style: {\n                    flex: 1,\n                    background: '#3498db'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(FaEye, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 416,\n                    columnNumber: 25\n                  }, this), \" Ver Etiqueta\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-card full-width\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"\\uD83D\\uDCE6 Productos (\", ((_selectedOrder$items = selectedOrder.items) === null || _selectedOrder$items === void 0 ? void 0 : _selectedOrder$items.length) || 0, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"order-items-list\",\n              children: (_selectedOrder$items2 = selectedOrder.items) === null || _selectedOrder$items2 === void 0 ? void 0 : _selectedOrder$items2.map((item, index) => {\n                var _item$product;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item-main\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"item-qty\",\n                      children: [item.quantity, \"x\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 430,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"item-name\",\n                      children: ((_item$product = item.product) === null || _item$product === void 0 ? void 0 : _item$product.name) || 'Producto'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 431,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 429,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"item-subtotal\",\n                    children: formatPrice(item.price * item.quantity)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 433,\n                    columnNumber: 23\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 428,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"order-total-display\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Total Pedido:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: formatPrice(selectedOrder.totalAmount)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 270,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminOrders, \"e5tbbB2B0coqEu88kvpB1FFpjKw=\");\n_c = AdminOrders;\nexport default AdminOrders;\nvar _c;\n$RefreshReg$(_c, \"AdminOrders\");","map":{"version":3,"names":["React","useState","useEffect","useRef","FaEye","FaEdit","FaPhone","FaTruck","FaFilePdf","FaSync","FaPrint","FaCheckCircle","FaDownload","axios","toast","jsxDEV","_jsxDEV","AdminOrders","_s","_selectedOrder$user","_selectedOrder$shippi","_selectedOrder$shippi2","_selectedOrder$shippi3","_selectedOrder$shippi4","_selectedOrder$items","_selectedOrder$items2","orders","setOrders","loading","setLoading","refreshing","setRefreshing","selectedOrder","setSelectedOrder","showDetailModal","setShowDetailModal","statusUpdate","setStatusUpdate","orderStatus","paymentStatus","error","setError","notifiedOrders","Set","isFirstLoad","API_URL","process","env","REACT_APP_API_URL","loadOrders","Notification","permission","requestPermission","interval","setInterval","clearInterval","newOrders","filter","o","current","has","_id","length","forEach","order","add","handleNewOrderNotification","audio","Audio","play","catch","console","log","_order$user","success","slice","toUpperCase","user","name","formatPrice","totalAmount","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","navigator","vibrate","body","reduce","sum","icon","badge","initial","token","sessionStorage","getItem","response","get","headers","ordersData","Array","isArray","data","_error$response","_error$response$data","message","downloadLabel","_order$tracking","trackingNumber","tracking","Authorization","responseType","blob","Blob","type","url","window","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","err","viewLabel","_order$tracking2","open","handleShipping","post","trackingId","_err$response","_err$response$data","handleCreateTracking","orderId","loadingToast","update","render","isLoading","_error$response2","_error$response3","_error$response3$data","price","Intl","NumberFormat","style","currency","format","getStatusBadge","status","statusMap","pendiente","procesando","enviado","entregado","cancelado","pagado","fallido","getStatusLabel","labels","openDetailModal","closeDetailModal","handleStatusChange","e","target","value","updateOrderStatus","put","_error$response4","_error$response4$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","fontSize","marginLeft","map","_order$user2","phone","display","gap","title","background","stopPropagation","shippingAddress","street","city","postalCode","country","marginTop","color","marginBottom","onChange","padding","borderRadius","carrier","currentStatus","flex","items","item","index","_item$product","quantity","product","_c","$RefreshReg$"],"sources":["C:/Users/ashu_/Documents/ecommerce-sim/frontend/src/pages/admin/AdminOrders.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { FaEye, FaEdit, FaPhone, FaTruck, FaFilePdf, FaSync, FaPrint, FaCheckCircle, FaDownload } from 'react-icons/fa';\nimport axios from 'axios';\nimport '../../styles/AdminOrders.css';\nimport { toast } from 'react-toastify';\n\nconst AdminOrders = () => {\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [selectedOrder, setSelectedOrder] = useState(null);\n  const [showDetailModal, setShowDetailModal] = useState(false);\n  const [statusUpdate, setStatusUpdate] = useState({\n    orderStatus: '',\n    paymentStatus: ''\n  });\n  const [error, setError] = useState(null);\n\n  const notifiedOrders = useRef(new Set());\n  const isFirstLoad = useRef(true);\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n  useEffect(() => {\n    loadOrders(true);\n    \n    // Solicitar permiso para notificaciones del navegador\n    if (Notification.permission === \"default\") {\n      Notification.requestPermission();\n    }\n    \n    const interval = setInterval(() => loadOrders(false), 30000);\n    return () => clearInterval(interval);\n  }, []);\n\n  useEffect(() => {\n    // Detectar nuevos pedidos (que no hayan sido notificados antes)\n    const newOrders = orders.filter(o => \n      !notifiedOrders.current.has(o._id) &&\n      o.orderStatus === 'pendiente' // Solo notificar pedidos pendientes\n    );\n\n    if (newOrders.length > 0 && !isFirstLoad.current) {\n      // Marcar como notificados\n      newOrders.forEach(order => notifiedOrders.current.add(order._id));\n      \n      // Mostrar notificaciÃ³n\n      handleNewOrderNotification(newOrders);\n    }\n  }, [orders]);\n\n  const handleNewOrderNotification = (newOrders) => {\n    // Sonido de alerta\n    const audio = new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3');\n    audio.play().catch(() => console.log('No se pudo reproducir el sonido'));\n\n    // NotificaciÃ³n visual con Toast\n    newOrders.forEach(order => {\n      toast.success(\n        `ðŸ”” Â¡NUEVO PEDIDO! #${order._id.slice(-6).toUpperCase()}\\n` +\n        `Cliente: ${order.user?.name || 'Desconocido'}\\n` +\n        `Total: ${formatPrice(order.totalAmount)}`,\n        {\n          position: \"top-right\",\n          autoClose: 8000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n        }\n      );\n    });\n\n    // VibraciÃ³n (si estÃ¡ disponible en el dispositivo)\n    if (navigator.vibrate) {\n      navigator.vibrate([200, 100, 200]);\n    }\n\n    // NotificaciÃ³n del navegador (si estÃ¡ permitido)\n    if (Notification.permission === \"granted\") {\n      new Notification(\"ðŸ›’ Nuevo pedido recibido\", {\n        body: `${newOrders.length} pedido(s) nuevo(s). Total: ${formatPrice(newOrders.reduce((sum, o) => sum + o.totalAmount, 0))}`,\n        icon: \"/logo192.png\",\n        badge: \"/logo192.png\"\n      });\n    }\n  };\n\n  const loadOrders = async (initial = false) => {\n    try {\n      if (initial) setLoading(true);\n      setRefreshing(true);\n      setError(null);\n      const token = sessionStorage.getItem('token');\n      \n      if (!token) {\n        setError('No estÃ¡s autenticado. Por favor, inicia sesiÃ³n.');\n        setLoading(false);\n        return;\n      }\n\n      const response = await axios.get(`${API_URL}/orders`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      const ordersData = Array.isArray(response.data) ? response.data : [];\n      setOrders(ordersData);\n\n      if (initial) {\n        ordersData.forEach(o => notifiedOrders.current.add(o._id));\n        isFirstLoad.current = false;\n      }\n    } catch (error) {\n      console.error('âŒ Error al cargar pedidos:', error);\n      if (initial) setError(error.response?.data?.message || 'Error al cargar los pedidos');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  // Descargar etiqueta PDF directamente desde el tracking\n  const downloadLabel = async (order) => {\n    try {\n      const trackingNumber = order.tracking?.trackingNumber || order.trackingNumber;\n      \n      if (!trackingNumber) {\n        toast.error('No hay nÃºmero de tracking disponible');\n        return;\n      }\n\n      const token = sessionStorage.getItem('token');\n      \n      // Hacer peticiÃ³n al endpoint de descarga\n      const response = await axios.get(\n        `${API_URL}/tracking/${trackingNumber}/label`,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n          responseType: 'blob' // Importante para recibir el PDF\n        }\n      );\n\n      // Crear blob y descargar\n      const blob = new Blob([response.data], { type: 'application/pdf' });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `etiqueta-${trackingNumber}.pdf`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n\n      toast.success('âœ… Etiqueta descargada correctamente');\n    } catch (err) {\n      console.error('Error descargando etiqueta:', err);\n      toast.error('Error al descargar la etiqueta');\n    }\n  };\n\n  // Ver etiqueta en nueva pestaÃ±a\n  const viewLabel = (order) => {\n    const trackingNumber = order.tracking?.trackingNumber || order.trackingNumber;\n    if (trackingNumber) {\n      window.open(`${API_URL}/tracking/${trackingNumber}/label/preview`, '_blank');\n    }\n  };\n\n  const handleShipping = async (order) => {\n    try {\n      const token = sessionStorage.getItem('token');\n      const response = await axios.post(`${API_URL}/orders/${order._id}/shipping`, {}, {\n        headers: { Authorization: `Bearer ${token}`, 'Content-Type': 'application/json' }\n      });\n      \n      if (response.data.trackingId) {\n        toast.success(`âœ… Pre-registro completado. CÃ³digo: ${response.data.trackingId}`);\n        loadOrders(false);\n      }\n    } catch (err) {\n      console.error(\"Error al realizar pre-registro\", err);\n      toast.error(err.response?.data?.message || \"Error al realizar el pre-registro de envÃ­o\");\n    }\n  };\n\n  // Crear tracking con Mock Service\n  const handleCreateTracking = async (orderId) => {\n    const token = sessionStorage.getItem('token');\n    \n    if (!token) {\n      toast.error(\"SesiÃ³n expirada. Vuelve a iniciar sesiÃ³n.\");\n      return;\n    }\n\n    try {\n      const loadingToast = toast.loading(\"â³ Generando etiqueta simulada...\");\n      \n      const response = await axios.post(`${API_URL}/tracking/create`, \n        { orderId },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      \n      toast.update(loadingToast, { \n        render: \"âœ… Etiqueta generada con Ã©xito\", \n        type: \"success\", \n        isLoading: false,\n        autoClose: 3000 \n      });\n      \n      loadOrders(false);\n    } catch (error) {\n      console.error(\"Error detallado:\", error.response?.data);\n      toast.error(error.response?.data?.message || \"Error al generar la etiqueta\");\n    }\n  };\n\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR' }).format(price);\n  };\n\n  const getStatusBadge = (status) => {\n    const statusMap = {\n      pendiente: 'badge-warning', procesando: 'badge-info', enviado: 'badge-primary',\n      entregado: 'badge-success', cancelado: 'badge-danger', pagado: 'badge-success', fallido: 'badge-danger'\n    };\n    return statusMap[status] || 'badge-secondary';\n  };\n\n  const getStatusLabel = (status) => {\n    const labels = { pendiente: 'Pendiente', procesando: 'Procesando', enviado: 'Enviado', entregado: 'Entregado', cancelado: 'Cancelado', pagado: 'Pagado', fallido: 'Fallido' };\n    return labels[status] || status;\n  };\n\n  const openDetailModal = (order) => {\n    setSelectedOrder(order);\n    setStatusUpdate({ orderStatus: order.orderStatus, paymentStatus: order.paymentStatus });\n    setShowDetailModal(true);\n  };\n\n  const closeDetailModal = () => {\n    setShowDetailModal(false);\n    setSelectedOrder(null);\n  };\n\n  const handleStatusChange = (e) => {\n    setStatusUpdate({ ...statusUpdate, [e.target.name]: e.target.value });\n  };\n\n  const updateOrderStatus = async () => {\n    try {\n      const token = sessionStorage.getItem('token');\n      await axios.put(`${API_URL}/orders/${selectedOrder._id}/status`, statusUpdate, {\n        headers: { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json' }\n      });\n      toast.success('Estado actualizado correctamente');\n      closeDetailModal();\n      loadOrders(false);\n    } catch (error) {\n      toast.error(error.response?.data?.message || 'Error al actualizar');\n    }\n  };\n\n  if (loading) return <div className=\"admin-orders\"><div className=\"loading-container\"><div className=\"spinner-large\"></div><p>Cargando pedidos...</p></div></div>;\n\n  if (error) return <div className=\"admin-orders\"><div className=\"error-container\"><h3>Error</h3><p>{error}</p><button className=\"btn btn-primary\" onClick={() => loadOrders(true)}>ðŸ”„ Reintentar</button></div></div>;\n\n  return (\n    <div className=\"admin-orders\">\n      <div className=\"page-header\">\n        <h2>GestiÃ³n de Pedidos {refreshing && <small style={{fontSize: '12px', marginLeft: '10px'}}>ðŸ”„ Actualizando...</small>}</h2>\n        <div className=\"orders-stats\">\n          <span className=\"stat-item\">Total: <strong>{orders.length}</strong></span>\n          <span className=\"stat-item\">Pendientes: <strong>{orders.filter(o => o.orderStatus === 'pendiente').length}</strong></span>\n          <span className=\"stat-item\">Con etiqueta: <strong>{orders.filter(o => o.tracking).length}</strong></span>\n        </div>\n        <button className=\"btn btn-secondary\" onClick={() => loadOrders(true)}>ðŸ”„ Actualizar</button>\n      </div>\n\n      <div className=\"table-responsive\">\n        <table className=\"admin-table\">\n          <thead>\n            <tr>\n              <th>ID Pedido</th>\n              <th>Cliente</th>\n              <th>Total</th>\n              <th>Estado Pago</th>\n              <th>Estado Pedido</th>\n              <th>Etiqueta</th>\n              <th>Acciones</th>\n            </tr>\n          </thead>\n          <tbody>\n            {orders.map(order => (\n              <tr key={order._id} className={order.orderStatus === 'pendiente' ? 'row-urgent' : ''}>\n                <td><strong>#{order._id.slice(-8)}</strong></td>\n                <td>\n                  <div className=\"customer-cell\">\n                    <strong>{order.user?.name || 'Usuario'}</strong>\n                    <small><FaPhone /> {order.phone || 'S/T'}</small>\n                  </div>\n                </td>\n                <td><strong>{formatPrice(order.totalAmount)}</strong></td>\n                <td><span className={`badge ${getStatusBadge(order.paymentStatus)}`}>{getStatusLabel(order.paymentStatus)}</span></td>\n                <td><span className={`badge ${getStatusBadge(order.orderStatus)}`}>{getStatusLabel(order.orderStatus)}</span></td>\n                <td>\n                  {!order.tracking ? (\n                    <button className=\"btn-table btn-generate\" onClick={() => handleCreateTracking(order._id)}>\n                      <FaFilePdf /> Generar Etiqueta\n                    </button>\n                  ) : (\n                    <div style={{ display: 'flex', gap: '5px' }}>\n                      <button \n                        className=\"btn-table btn-pdf\" \n                        onClick={() => downloadLabel(order)}\n                        title=\"Descargar etiqueta PDF\"\n                      >\n                        <FaDownload /> Descargar\n                      </button>\n                      <button \n                        className=\"btn-table btn-view\" \n                        onClick={() => viewLabel(order)}\n                        title=\"Ver etiqueta\"\n                        style={{ background: '#3498db' }}\n                      >\n                        <FaEye />\n                      </button>\n                    </div>\n                  )}\n                </td>\n                <td>\n                  <div className=\"action-buttons\">\n                    <button className=\"btn-icon btn-view\" onClick={() => openDetailModal(order)} title=\"Ver detalles\">\n                      <FaEye />\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {showDetailModal && selectedOrder && (\n        <div className=\"modal-overlay\" onClick={closeDetailModal}>\n          <div className=\"modal-content large\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h3>GestiÃ³n de Pedido #{selectedOrder._id.slice(-8).toUpperCase()}</h3>\n              <button className=\"modal-close\" onClick={closeDetailModal}>&times;</button>\n            </div>\n\n            <div className=\"order-detail-container\">\n              {/* FILA SUPERIOR: DIRECCIÃ“N Y ESTADO */}\n              <div className=\"detail-grid-top\">\n                <div className=\"detail-card\">\n                  <h4>ðŸ“ DirecciÃ³n de EnvÃ­o</h4>\n                  <div className=\"address-box\">\n                    <p><strong>{selectedOrder.user?.name || 'Cliente'}</strong></p>\n                    <p>{selectedOrder.shippingAddress?.street}</p>\n                    <p>{selectedOrder.shippingAddress?.city}, {selectedOrder.shippingAddress?.postalCode}</p>\n                    <p>{selectedOrder.shippingAddress?.country}</p>\n                    <p style={{marginTop: '10px', fontSize: '0.85rem', color: '#666'}}>\n                      ðŸ“ž {selectedOrder.phone || 'Sin telÃ©fono'}\n                    </p>\n                  </div>\n                </div>\n\n                <div className=\"detail-card\">\n                  <h4>âš™ï¸ Estado del Pedido</h4>\n                  <div className=\"status-update-form\">\n                    <div className=\"form-group\">\n                      <label style={{fontSize: '0.8rem', color: '#7f8c8d', display: 'block', marginBottom: '5px'}}>Cambiar Estado</label>\n                      <select \n                        name=\"orderStatus\" \n                        value={statusUpdate.orderStatus} \n                        onChange={handleStatusChange}\n                        className=\"form-select\"\n                      >\n                        <option value=\"pendiente\">Pendiente</option>\n                        <option value=\"procesando\">Procesando</option>\n                        <option value=\"enviado\">Enviado</option>\n                        <option value=\"entregado\">Entregado</option>\n                        <option value=\"cancelado\">Cancelado</option>\n                      </select>\n                    </div>\n                    <button className=\"btn-update-status\" onClick={updateOrderStatus}>\n                      <FaEdit /> Guardar Cambios\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              {/* SECCIÃ“N TRACKING */}\n              {selectedOrder.tracking && (\n                <div className=\"detail-card\">\n                  <h4>ðŸšš InformaciÃ³n de EnvÃ­o</h4>\n                  <div style={{ padding: '15px', background: '#f8f9fa', borderRadius: '8px' }}>\n                    <p><strong>Tracking:</strong> {selectedOrder.tracking.trackingNumber}</p>\n                    <p><strong>Transportista:</strong> {selectedOrder.tracking.carrier || 'Correos Express (Simulado)'}</p>\n                    <p><strong>Estado:</strong> {selectedOrder.tracking.currentStatus || 'pendiente'}</p>\n                    \n                    <div style={{ marginTop: '15px', display: 'flex', gap: '10px' }}>\n                      <button \n                        className=\"btn-update-status\" \n                        onClick={() => downloadLabel(selectedOrder)}\n                        style={{ flex: 1 }}\n                      >\n                        <FaDownload /> Descargar Etiqueta\n                      </button>\n                      <button \n                        className=\"btn-update-status\" \n                        onClick={() => viewLabel(selectedOrder)}\n                        style={{ flex: 1, background: '#3498db' }}\n                      >\n                        <FaEye /> Ver Etiqueta\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* SECCIÃ“N PRODUCTOS */}\n              <div className=\"detail-card full-width\">\n                <h4>ðŸ“¦ Productos ({selectedOrder.items?.length || 0})</h4>\n                <div className=\"order-items-list\">\n                  {selectedOrder.items?.map((item, index) => (\n                    <div key={index} className=\"item-row\">\n                      <div className=\"item-main\">\n                        <span className=\"item-qty\">{item.quantity}x</span>\n                        <span className=\"item-name\">{item.product?.name || 'Producto'}</span>\n                      </div>\n                      <span className=\"item-subtotal\">{formatPrice(item.price * item.quantity)}</span>\n                    </div>\n                  ))}\n                </div>\n                <div className=\"order-total-display\">\n                  <span>Total Pedido:</span>\n                  <strong>{formatPrice(selectedOrder.totalAmount)}</strong>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdminOrders;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}