{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'../../styles/AdminChat.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';const AdminChat=()=>{var _selectedChat$user,_selectedChat$user2;const[chats,setChats]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedChat,setSelectedChat]=useState(null);const[message,setMessage]=useState('');const[view,setView]=useState('open');// 'open' para activos, 'closed' para cerrados\nuseEffect(()=>{loadChats();const interval=setInterval(loadChats,3000);return()=>clearInterval(interval);},[view]);const loadChats=async()=>{try{const token=localStorage.getItem('token');if(!token)return;const response=await axios.get(\"\".concat(API_URL,\"/chat/admin/chats?status=\").concat(view),{headers:{Authorization:\"Bearer \".concat(token)}});setChats(response.data||[]);if(selectedChat){const updated=response.data.find(c=>c._id===selectedChat._id);if(updated)setSelectedChat(updated);}setError(null);}catch(err){console.error('Error al cargar chats:',err);setError('Error al conectar con el servidor');}finally{setLoading(false);}};// ‚úÖ FUNCI√ìN CORREGIDA: ENVIAR MENSAJE\nconst sendMessage=async e=>{e.preventDefault();if(!message.trim()||!selectedChat)return;try{const token=localStorage.getItem('token');await axios.post(\"\".concat(API_URL,\"/chat/admin/send-message/\").concat(selectedChat._id),{text:message},{headers:{Authorization:\"Bearer \".concat(token)}});setMessage('');loadChats();// Recargar para ver el mensaje enviado\n}catch(err){console.error('Error enviando mensaje:',err);alert('No se pudo enviar el mensaje');}};// ‚úÖ FUNCI√ìN CORREGIDA: CERRAR CHAT\nconst closeChat=async chatId=>{if(!window.confirm('¬øDeseas finalizar este chat y moverlo a la secci√≥n de Cerrados?'))return;try{const token=localStorage.getItem('token');await axios.put(\"\".concat(API_URL,\"/chat/admin/close-chat/\").concat(chatId),{},{headers:{Authorization:\"Bearer \".concat(token)}});setSelectedChat(null);loadChats();alert('Chat finalizado con √©xito');}catch(err){console.error('Error al cerrar chat:',err);alert('Error al cerrar la conversaci√≥n');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-chat-container\",style:{padding:'20px'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDCAC Panel de Soporte\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setView('open');setSelectedChat(null);},style:{padding:'10px 20px',borderRadius:'20px',border:'none',background:view==='open'?'#667eea':'#ddd',color:'white',cursor:'pointer',fontWeight:'bold'},children:\"\\uD83D\\uDD25 Chats Activos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setView('closed');setSelectedChat(null);},style:{padding:'10px 20px',borderRadius:'20px',border:'none',background:view==='closed'?'#2c3e50':'#ddd',color:'white',cursor:'pointer',fontWeight:'bold'},children:\"\\uD83D\\uDCC1 Historial (Cerrados)\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'350px 1fr',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'8px',border:'1px solid #ddd',height:'70vh',overflowY:'auto'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'15px',borderBottom:'1px solid #eee',background:'#fcfcfc'},children:/*#__PURE__*/_jsxs(\"strong\",{children:[view==='open'?'Conversaciones en curso':'Chats finalizados',\" (\",chats.length,\")\"]})}),chats.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'40px',color:'#999'},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'30px'},children:\"\\uD83D\\uDCED\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"No hay chats \",view==='open'?'activos':'cerrados']})]}):chats.map(chat=>{var _chat$user,_chat$messages;return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setSelectedChat(chat),style:{padding:'15px',borderBottom:'1px solid #f5f5f5',cursor:'pointer',background:(selectedChat===null||selectedChat===void 0?void 0:selectedChat._id)===chat._id?'#f0f4ff':'transparent',borderLeft:(selectedChat===null||selectedChat===void 0?void 0:selectedChat._id)===chat._id?'4px solid #667eea':'none'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold',color:'#333'},children:((_chat$user=chat.user)===null||_chat$user===void 0?void 0:_chat$user.name)||'Cliente'}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#666',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis'},children:((_chat$messages=chat.messages[chat.messages.length-1])===null||_chat$messages===void 0?void 0:_chat$messages.text)||'Sin mensajes'})]},chat._id);})]}),/*#__PURE__*/_jsx(\"div\",{style:{background:'white',borderRadius:'8px',border:'1px solid #ddd',display:'flex',flexDirection:'column',height:'70vh'},children:selectedChat?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'15px',borderBottom:'1px solid #eee',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0},children:(_selectedChat$user=selectedChat.user)===null||_selectedChat$user===void 0?void 0:_selectedChat$user.name}),/*#__PURE__*/_jsx(\"small\",{style:{color:'#888'},children:(_selectedChat$user2=selectedChat.user)===null||_selectedChat$user2===void 0?void 0:_selectedChat$user2.email})]}),view==='open'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>closeChat(selectedChat._id),style:{background:'#ff4757',color:'white',border:'none',padding:'8px 15px',borderRadius:'5px',cursor:'pointer',fontWeight:'600'},children:\"Finalizar Caso\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,padding:'20px',overflowY:'auto',background:'#f8f9fa'},children:selectedChat.messages.map((m,i)=>/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:m.sender==='admin'?'flex-end':'flex-start',marginBottom:'15px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:m.sender==='admin'?'#667eea':'white',color:m.sender==='admin'?'white':'#333',padding:'10px 15px',borderRadius:'12px',maxWidth:'75%',boxShadow:'0 2px 5px rgba(0,0,0,0.05)',border:m.sender==='admin'?'none':'1px solid #eee'},children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:0},children:m.text}),/*#__PURE__*/_jsx(\"small\",{style:{display:'block',marginTop:'5px',fontSize:'10px',opacity:0.7},children:new Date(m.timestamp).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})})]})},i))}),view==='open'&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendMessage,style:{padding:'15px',borderTop:'1px solid #eee',display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:e=>setMessage(e.target.value),placeholder:\"Escribe tu respuesta...\",style:{flex:1,padding:'12px',borderRadius:'8px',border:'1px solid #ddd',outline:'none'}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!message.trim(),style:{background:message.trim()?'#667eea':'#ccc',color:'white',border:'none',padding:'10px 25px',borderRadius:'8px',cursor:'pointer',fontWeight:'bold'},children:\"Enviar\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',height:'100%',color:'#aaa'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'50px'},children:\"\\uD83D\\uDCAC\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Selecciona una conversaci\\xF3n para ver los detalles\"})]})})]})]});};export default AdminChat;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","process","env","REACT_APP_API_URL","AdminChat","_selectedChat$user","_selectedChat$user2","chats","setChats","loading","setLoading","error","setError","selectedChat","setSelectedChat","message","setMessage","view","setView","loadChats","interval","setInterval","clearInterval","token","localStorage","getItem","response","get","concat","headers","Authorization","data","updated","find","c","_id","err","console","sendMessage","e","preventDefault","trim","post","text","alert","closeChat","chatId","window","confirm","put","className","style","padding","children","display","gap","marginBottom","onClick","borderRadius","border","background","color","cursor","fontWeight","gridTemplateColumns","height","overflowY","borderBottom","length","textAlign","fontSize","map","chat","_chat$user","_chat$messages","borderLeft","user","name","whiteSpace","overflow","textOverflow","messages","flexDirection","justifyContent","alignItems","margin","email","flex","m","i","sender","maxWidth","boxShadow","marginTop","opacity","Date","timestamp","toLocaleTimeString","hour","minute","onSubmit","borderTop","type","value","onChange","target","placeholder","outline","disabled"],"sources":["C:/Users/ashu_/Documents/ecommerce-sim/frontend/src/components/admin/AdminChat.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport '../../styles/AdminChat.css';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nconst AdminChat = () => {\r\n  const [chats, setChats] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [selectedChat, setSelectedChat] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n  const [view, setView] = useState('open'); // 'open' para activos, 'closed' para cerrados\r\n\r\n  useEffect(() => {\r\n    loadChats();\r\n    const interval = setInterval(loadChats, 3000);\r\n    return () => clearInterval(interval);\r\n  }, [view]);\r\n\r\n  const loadChats = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) return;\r\n\r\n      const response = await axios.get(`${API_URL}/chat/admin/chats?status=${view}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      setChats(response.data || []);\r\n      \r\n      if (selectedChat) {\r\n        const updated = response.data.find(c => c._id === selectedChat._id);\r\n        if (updated) setSelectedChat(updated);\r\n      }\r\n      setError(null);\r\n    } catch (err) {\r\n      console.error('Error al cargar chats:', err);\r\n      setError('Error al conectar con el servidor');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ FUNCI√ìN CORREGIDA: ENVIAR MENSAJE\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n    if (!message.trim() || !selectedChat) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.post(\r\n        `${API_URL}/chat/admin/send-message/${selectedChat._id}`,\r\n        { text: message },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n\r\n      setMessage('');\r\n      loadChats(); // Recargar para ver el mensaje enviado\r\n    } catch (err) {\r\n      console.error('Error enviando mensaje:', err);\r\n      alert('No se pudo enviar el mensaje');\r\n    }\r\n  };\r\n\r\n  // ‚úÖ FUNCI√ìN CORREGIDA: CERRAR CHAT\r\n  const closeChat = async (chatId) => {\r\n    if (!window.confirm('¬øDeseas finalizar este chat y moverlo a la secci√≥n de Cerrados?')) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.put(\r\n        `${API_URL}/chat/admin/close-chat/${chatId}`,\r\n        {},\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n\r\n      setSelectedChat(null);\r\n      loadChats();\r\n      alert('Chat finalizado con √©xito');\r\n    } catch (err) {\r\n      console.error('Error al cerrar chat:', err);\r\n      alert('Error al cerrar la conversaci√≥n');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-chat-container\" style={{ padding: '20px' }}>\r\n      <h1>üí¨ Panel de Soporte</h1>\r\n\r\n      {/* SELECTOR DE PESTA√ëAS */}\r\n      <div style={{ display: 'flex', gap: '10px', marginBottom: '20px' }}>\r\n        <button \r\n          onClick={() => { setView('open'); setSelectedChat(null); }}\r\n          style={{\r\n            padding: '10px 20px', borderRadius: '20px', border: 'none',\r\n            background: view === 'open' ? '#667eea' : '#ddd',\r\n            color: 'white', cursor: 'pointer', fontWeight: 'bold'\r\n          }}\r\n        >\r\n          üî• Chats Activos\r\n        </button>\r\n        <button \r\n          onClick={() => { setView('closed'); setSelectedChat(null); }}\r\n          style={{\r\n            padding: '10px 20px', borderRadius: '20px', border: 'none',\r\n            background: view === 'closed' ? '#2c3e50' : '#ddd',\r\n            color: 'white', cursor: 'pointer', fontWeight: 'bold'\r\n          }}\r\n        >\r\n          üìÅ Historial (Cerrados)\r\n        </button>\r\n      </div>\r\n\r\n      <div style={{ display: 'grid', gridTemplateColumns: '350px 1fr', gap: '20px' }}>\r\n        \r\n        {/* COLUMNA IZQUIERDA: LISTA */}\r\n        <div style={{ background: 'white', borderRadius: '8px', border: '1px solid #ddd', height: '70vh', overflowY: 'auto' }}>\r\n          <div style={{ padding: '15px', borderBottom: '1px solid #eee', background: '#fcfcfc' }}>\r\n            <strong>{view === 'open' ? 'Conversaciones en curso' : 'Chats finalizados'} ({chats.length})</strong>\r\n          </div>\r\n          \r\n          {chats.length === 0 ? (\r\n            <div style={{ textAlign: 'center', padding: '40px', color: '#999' }}>\r\n               <p style={{ fontSize: '30px' }}>üì≠</p>\r\n               <p>No hay chats {view === 'open' ? 'activos' : 'cerrados'}</p>\r\n            </div>\r\n          ) : (\r\n            chats.map(chat => (\r\n              <div \r\n                key={chat._id}\r\n                onClick={() => setSelectedChat(chat)}\r\n                style={{\r\n                  padding: '15px', borderBottom: '1px solid #f5f5f5', cursor: 'pointer',\r\n                  background: selectedChat?._id === chat._id ? '#f0f4ff' : 'transparent',\r\n                  borderLeft: selectedChat?._id === chat._id ? '4px solid #667eea' : 'none'\r\n                }}\r\n              >\r\n                <div style={{ fontWeight: 'bold', color: '#333' }}>{chat.user?.name || 'Cliente'}</div>\r\n                <div style={{ fontSize: '12px', color: '#666', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>\r\n                  {chat.messages[chat.messages.length - 1]?.text || 'Sin mensajes'}\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n\r\n        {/* COLUMNA DERECHA: CONVERSACI√ìN */}\r\n        <div style={{ background: 'white', borderRadius: '8px', border: '1px solid #ddd', display: 'flex', flexDirection: 'column', height: '70vh' }}>\r\n          {selectedChat ? (\r\n            <>\r\n              <div style={{ padding: '15px', borderBottom: '1px solid #eee', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div>\r\n                  <h3 style={{ margin: 0 }}>{selectedChat.user?.name}</h3>\r\n                  <small style={{ color: '#888' }}>{selectedChat.user?.email}</small>\r\n                </div>\r\n                {view === 'open' && (\r\n                  <button onClick={() => closeChat(selectedChat._id)} style={{ background: '#ff4757', color: 'white', border: 'none', padding: '8px 15px', borderRadius: '5px', cursor: 'pointer', fontWeight: '600' }}>\r\n                    Finalizar Caso\r\n                  </button>\r\n                )}\r\n              </div>\r\n              \r\n              <div style={{ flex: 1, padding: '20px', overflowY: 'auto', background: '#f8f9fa' }}>\r\n                {selectedChat.messages.map((m, i) => (\r\n                  <div key={i} style={{ display: 'flex', justifyContent: m.sender === 'admin' ? 'flex-end' : 'flex-start', marginBottom: '15px' }}>\r\n                    <div style={{ \r\n                      background: m.sender === 'admin' ? '#667eea' : 'white', \r\n                      color: m.sender === 'admin' ? 'white' : '#333',\r\n                      padding: '10px 15px', borderRadius: '12px', maxWidth: '75%',\r\n                      boxShadow: '0 2px 5px rgba(0,0,0,0.05)',\r\n                      border: m.sender === 'admin' ? 'none' : '1px solid #eee'\r\n                    }}>\r\n                      <p style={{ margin: 0 }}>{m.text}</p>\r\n                      <small style={{ display: 'block', marginTop: '5px', fontSize: '10px', opacity: 0.7 }}>\r\n                         {new Date(m.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                      </small>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {view === 'open' && (\r\n                <form onSubmit={sendMessage} style={{ padding: '15px', borderTop: '1px solid #eee', display: 'flex', gap: '10px' }}>\r\n                  <input \r\n                    type=\"text\" \r\n                    value={message} \r\n                    onChange={(e) => setMessage(e.target.value)}\r\n                    placeholder=\"Escribe tu respuesta...\"\r\n                    style={{ flex: 1, padding: '12px', borderRadius: '8px', border: '1px solid #ddd', outline: 'none' }}\r\n                  />\r\n                  <button type=\"submit\" disabled={!message.trim()} style={{ background: message.trim() ? '#667eea' : '#ccc', color: 'white', border: 'none', padding: '10px 25px', borderRadius: '8px', cursor: 'pointer', fontWeight: 'bold' }}>\r\n                    Enviar\r\n                  </button>\r\n                </form>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', height: '100%', color: '#aaa' }}>\r\n              <span style={{ fontSize: '50px' }}>üí¨</span>\r\n              <p>Selecciona una conversaci√≥n para ver los detalles</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminChat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}