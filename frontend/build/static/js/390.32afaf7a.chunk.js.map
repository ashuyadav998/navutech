{"version":3,"file":"static/js/390.32afaf7a.chunk.js","mappings":"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","sources":["pages/Register.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport axios from 'axios';\nimport '../styles/Auth.css';\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\nconst Register = () => {\n  const navigate = useNavigate();\n  const { login } = useAuth();\n  \n  const [step, setStep] = useState(1); // 1: formulario, 2: verificaci√≥n, 3: √©xito\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    confirmPassword: ''\n  });\n  const [verificationCode, setVerificationCode] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  // Paso 1: Enviar c√≥digo\n  const handleSendCode = async (e) => {\n    e.preventDefault();\n    setError('');\n    setMessage('');\n\n    if (formData.password !== formData.confirmPassword) {\n      setError('Las contrase√±as no coinciden');\n      return;\n    }\n\n    if (formData.password.length < 6) {\n      setError('La contrase√±a debe tener al menos 6 caracteres');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      await axios.post(`${API_URL}/auth/register/send-code`, {\n        email: formData.email,\n        name: formData.name\n      });\n\n      setMessage('‚úÖ C√≥digo enviado a tu email');\n      setStep(2);\n    } catch (err) {\n      setError(err.response?.data?.message || 'Error al enviar c√≥digo');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Paso 2: Verificar c√≥digo y registrar\n  const handleVerifyCode = async (e) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    try {\n      const response = await axios.post(`${API_URL}/auth/register/verify-code`, {\n        email: formData.email,\n        code: verificationCode,\n        name: formData.name,\n        password: formData.password\n      });\n\n      // ‚úÖ CAMBIO: Mostrar paso de √©xito primero\n      setStep(3);\n      \n      // ‚úÖ Guardar sesi√≥n\n      login(response.data.user, response.data.token);\n      \n      // ‚úÖ Redirigir despu√©s de 3 segundos\n      setTimeout(() => {\n        navigate('/');\n      }, 3000);\n      \n    } catch (err) {\n      setError(err.response?.data?.message || 'C√≥digo inv√°lido');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleResendCode = async () => {\n    setLoading(true);\n    setError('');\n    setMessage('');\n\n    try {\n      await axios.post(`${API_URL}/auth/register/send-code`, {\n        email: formData.email,\n        name: formData.name\n      });\n\n      setMessage('‚úÖ Nuevo c√≥digo enviado');\n    } catch (err) {\n      setError('Error al reenviar c√≥digo');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"auth-page\">\n      <div className=\"container\">\n        <div className=\"auth-card\">\n          <h1>Crear Cuenta</h1>\n\n          {step === 1 && (\n            /* PASO 1: Formulario de registro */\n            <>\n              {error && <div className=\"error-message\">{error}</div>}\n              {message && <div className=\"success-message\">{message}</div>}\n\n              <form onSubmit={handleSendCode}>\n                <div className=\"form-group\">\n                  <label htmlFor=\"name\">Nombre completo</label>\n                  <input\n                    type=\"text\"\n                    id=\"name\"\n                    name=\"name\"\n                    value={formData.name}\n                    onChange={handleChange}\n                    required\n                  />\n                </div>\n\n                <div className=\"form-group\">\n                  <label htmlFor=\"email\">Email</label>\n                  <input\n                    type=\"email\"\n                    id=\"email\"\n                    name=\"email\"\n                    value={formData.email}\n                    onChange={handleChange}\n                    required\n                  />\n                </div>\n\n                <div className=\"form-group\">\n                  <label htmlFor=\"password\">Contrase√±a</label>\n                  <input\n                    type=\"password\"\n                    id=\"password\"\n                    name=\"password\"\n                    value={formData.password}\n                    onChange={handleChange}\n                    required\n                    minLength=\"6\"\n                  />\n                </div>\n\n                <div className=\"form-group\">\n                  <label htmlFor=\"confirmPassword\">Confirmar contrase√±a</label>\n                  <input\n                    type=\"password\"\n                    id=\"confirmPassword\"\n                    name=\"confirmPassword\"\n                    value={formData.confirmPassword}\n                    onChange={handleChange}\n                    required\n                  />\n                </div>\n\n                <button type=\"submit\" className=\"submit-btn\" disabled={loading}>\n                  {loading ? 'Enviando...' : 'Continuar'}\n                </button>\n              </form>\n            </>\n          )}\n\n          {step === 2 && (\n            /* PASO 2: Verificaci√≥n de c√≥digo */\n            <>\n              <div className=\"verification-step\">\n                <div className=\"verification-icon\">üìß</div>\n                <p>Hemos enviado un c√≥digo de verificaci√≥n a:</p>\n                <strong>{formData.email}</strong>\n                <p className=\"small-text\">El c√≥digo expira en 10 minutos</p>\n              </div>\n\n              {error && <div className=\"error-message\">{error}</div>}\n              {message && <div className=\"success-message\">{message}</div>}\n\n              <form onSubmit={handleVerifyCode}>\n                <div className=\"form-group\">\n                  <label htmlFor=\"code\">C√≥digo de verificaci√≥n</label>\n                  <input\n                    type=\"text\"\n                    id=\"code\"\n                    value={verificationCode}\n                    onChange={(e) => setVerificationCode(e.target.value)}\n                    placeholder=\"Ingresa el c√≥digo de 6 d√≠gitos\"\n                    maxLength=\"6\"\n                    required\n                    className=\"code-input\"\n                  />\n                </div>\n\n                <button type=\"submit\" className=\"submit-btn\" disabled={loading}>\n                  {loading ? 'Verificando...' : 'Verificar y Registrarse'}\n                </button>\n              </form>\n\n              <div className=\"resend-code\">\n                <p>¬øNo recibiste el c√≥digo?</p>\n                <button \n                  type=\"button\" \n                  className=\"link-button\" \n                  onClick={handleResendCode}\n                  disabled={loading}\n                >\n                  Reenviar c√≥digo\n                </button>\n              </div>\n\n              <button \n                type=\"button\" \n                className=\"back-button\" \n                onClick={() => setStep(1)}\n              >\n                ‚Üê Volver\n              </button>\n            </>\n          )}\n\n          {step === 3 && (\n            /* PASO 3: √âxito - ‚úÖ NUEVO */\n            <div className=\"success-container\">\n              <div className=\"success-icon\">üéâ</div>\n              <h2>¬°Cuenta creada con √©xito!</h2>\n              <p>Bienvenido/a, <strong>{formData.name}</strong></p>\n              <p className=\"success-message\">\n                Tu cuenta ha sido verificada correctamente.\n              </p>\n              <div className=\"redirect-message\">\n                <div className=\"spinner-small\"></div>\n                <p>Redirigiendo a la tienda en 3 segundos...</p>\n              </div>\n              <button \n                className=\"submit-btn\"\n                onClick={() => navigate('/')}\n              >\n                Ir a la tienda ahora\n              </button>\n            </div>\n          )}\n\n          {step !== 3 && (\n            <p className=\"auth-link\">\n              ¬øYa tienes cuenta? <Link to=\"/login\">Inicia sesi√≥n aqu√≠</Link>\n            </p>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;"],"names":["API_URL","process","REACT_APP_API_URL","Register","navigate","useNavigate","login","useAuth","step","setStep","useState","formData","setFormData","name","email","password","confirmPassword","verificationCode","setVerificationCode","error","setError","loading","setLoading","message","setMessage","handleChange","e","_objectSpread","target","value","_jsx","className","children","_jsxs","_Fragment","onSubmit","async","preventDefault","length","axios","post","concat","err","_err$response","_err$response$data","response","data","htmlFor","type","id","onChange","required","minLength","disabled","code","user","token","setTimeout","_err$response2","_err$response2$data","placeholder","maxLength","onClick","Link","to"],"sourceRoot":""}