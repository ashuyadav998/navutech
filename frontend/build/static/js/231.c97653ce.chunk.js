"use strict";(self.webpackChunksimshop_frontend=self.webpackChunksimshop_frontend||[]).push([[231],{205(s,e,a){a.d(e,{A:()=>o});a(43);var c=a(475),r=a(774),t=a(169),n=a(579);const o=s=>{let{product:e}=s;const{addToCart:a}=(0,t._)(),o=s=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(s);return(0,n.jsxs)(c.N_,{to:"/productos/".concat(e.slug),className:"product-card",children:[(0,n.jsxs)("div",{className:"product-image",children:[e.isOffer&&(0,n.jsxs)("span",{className:"discount-badge",children:["-",e.discount,"%"]}),(0,n.jsx)("img",{src:e.images[0]||"https://via.placeholder.com/300",alt:e.name})]}),(0,n.jsxs)("div",{className:"product-info",children:[(0,n.jsx)("h3",{className:"product-name",children:e.name}),e.brand&&(0,n.jsx)("p",{className:"product-brand",children:e.brand}),(0,n.jsx)("div",{className:"product-price",children:e.originalPrice>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"price-original",children:o(e.originalPrice)}),(0,n.jsx)("span",{className:"price-current",children:o(e.price)})]}):(0,n.jsx)("span",{className:"price-current",children:o(e.price)})}),(0,n.jsx)("div",{className:"product-stock",children:e.stock>0?(0,n.jsx)("span",{className:"in-stock",children:"En stock"}):(0,n.jsx)("span",{className:"out-stock",children:"Agotado"})}),(0,n.jsxs)("button",{className:"add-to-cart-btn",onClick:s=>{s.preventDefault(),a(e)},disabled:0===e.stock,children:[(0,n.jsx)(r.AsH,{}),"A\xf1adir al carrito"]})]})]})}},231(s,e,a){a.r(e),a.d(e,{default:()=>d});var c=a(555),r=a(43),t=a(216),n=a(475),o=a(205),i=a(505),l=a(579);const d=()=>{const{categorySlug:s}=(0,t.g)(),[e]=(0,n.ok)(),a=(0,t.Zp)(),[d,u]=(0,r.useState)([]),[h,p]=(0,r.useState)([]),[m,x]=(0,r.useState)(null),[j,g]=(0,r.useState)(!0),N=e.get("search")||"",[f,v]=(0,r.useState)({category:"",search:N,isOffer:"true"===e.get("ofertas"),sort:"newest"});(0,r.useEffect)(()=>{v(s=>(0,c.A)((0,c.A)({},s),{},{search:N,isOffer:"true"===e.get("ofertas")}))},[N,e]),(0,r.useEffect)(()=>{b()},[]),(0,r.useEffect)(()=>{s?k():y()},[s,f,N]);const b=async()=>{try{const s=await(0,i.bW)();p(s.data)}catch(s){console.error("Error al cargar categor\xedas:",s)}},k=async()=>{try{g(!0);const e=await(0,i.p7)(s);x(e.data);const a=await(0,i.d$)((0,c.A)({category:e.data._id},f));u(a.data)}catch(e){console.error("Error al cargar productos:",e)}finally{g(!1)}},y=async()=>{try{g(!0);const s=await(0,i.d$)(f);u(s.data)}catch(s){console.error("Error al cargar productos:",s)}finally{g(!1)}},C=(s,e)=>{v(a=>(0,c.A)((0,c.A)({},a),{},{[s]:e}))};return j?(0,l.jsx)("div",{className:"loading",children:"Cargando productos..."}):(0,l.jsx)("div",{className:"products-page",children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsxs)("div",{className:"page-header",children:[(0,l.jsx)("h1",{children:N?'Resultados para "'.concat(N,'"'):m?m.name:"Todos los Productos"}),m&&m.description&&!N&&(0,l.jsx)("p",{children:m.description})]}),(0,l.jsxs)("div",{className:"products-layout",children:[(0,l.jsxs)("aside",{className:"filters-sidebar",children:[(0,l.jsxs)("div",{className:"filter-group",children:[(0,l.jsx)("h3",{children:"Categor\xedas"}),(0,l.jsxs)("ul",{className:"category-list",children:[(0,l.jsx)("li",{children:(0,l.jsx)("button",{className:s?"":"active",onClick:()=>a("/products"),children:"Todas"})}),h.map(e=>(0,l.jsx)("li",{children:(0,l.jsx)("button",{className:s===e.slug?"active":"",onClick:()=>a("/categoria/".concat(e.slug)),children:e.name})},e._id))]})]}),(0,l.jsxs)("div",{className:"filter-group",children:[(0,l.jsx)("h3",{children:"Filtros"}),(0,l.jsxs)("label",{className:"checkbox-label",children:[(0,l.jsx)("input",{type:"checkbox",checked:f.isOffer,onChange:s=>C("isOffer",s.target.checked)}),"Solo ofertas"]})]}),(0,l.jsxs)("div",{className:"filter-group",children:[(0,l.jsx)("h3",{children:"Ordenar por"}),(0,l.jsxs)("select",{value:f.sort,onChange:s=>C("sort",s.target.value),children:[(0,l.jsx)("option",{value:"newest",children:"M\xe1s recientes"}),(0,l.jsx)("option",{value:"price-asc",children:"Precio: menor a mayor"}),(0,l.jsx)("option",{value:"price-desc",children:"Precio: mayor a menor"})]})]})]}),(0,l.jsxs)("div",{className:"products-content",children:[(0,l.jsxs)("div",{className:"products-info",children:[(0,l.jsxs)("p",{children:[d.length," productos encontrados"]}),N&&(0,l.jsx)("button",{className:"clear-search",onClick:()=>a("/products"),children:"Limpiar b\xfasqueda"})]}),d.length>0?(0,l.jsx)("div",{className:"products-grid",children:d.map(s=>(0,l.jsx)(o.A,{product:s},s._id))}):(0,l.jsx)("div",{className:"no-products",children:(0,l.jsx)("p",{children:"No se encontraron productos que coincidan con tu b\xfasqueda."})})]})]})]})})}}}]);
//# sourceMappingURL=231.c97653ce.chunk.js.map