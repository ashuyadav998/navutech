"use strict";(self.webpackChunksimshop_frontend=self.webpackChunksimshop_frontend||[]).push([[66],{66(e,s,a){a.r(s),a.d(s,{default:()=>d});var i=a(555),n=a(43),o=a(475),r=a(216),l=a(729),t=(a(492),a(579));const d=()=>{const e=(0,r.Zp)(),s=(0,r.zy)(),{login:a,isAuthenticated:d,user:c}=(0,l.A)(),[u,m]=(0,n.useState)({email:"",password:""}),[h,p]=(0,n.useState)(""),[N,g]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(d()){var a,i;console.log("\u2705 Ya autenticado, redirigiendo...");const n=(null===(a=s.state)||void 0===a||null===(i=a.from)||void 0===i?void 0:i.pathname)||"/";e(n,{replace:!0})}},[d,e,s]);const v=e=>{m((0,i.A)((0,i.A)({},u),{},{[e.target.name]:e.target.value}))};return(0,t.jsx)("div",{className:"auth-page",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"auth-card",children:[(0,t.jsx)("h1",{children:"Iniciar Sesi\xf3n"}),h&&(0,t.jsx)("div",{className:"error-message",children:h}),(0,t.jsxs)("form",{onSubmit:async i=>{i.preventDefault(),p(""),g(!0),console.log("\ud83d\udd35 [LOGIN COMPONENT] Iniciando login...");try{const i=await a(u.email,u.password);console.log("\ud83d\udd35 [LOGIN COMPONENT] Resultado:",i),i.success?(console.log("\u2705 [LOGIN COMPONENT] Login exitoso"),setTimeout(()=>{var a;if("admin"===(null===(a=i.user)||void 0===a?void 0:a.role))console.log("\ud83d\udd35 [LOGIN COMPONENT] Redirigiendo a /admin"),e("/admin",{replace:!0});else{var n,o;const a=(null===(n=s.state)||void 0===n||null===(o=n.from)||void 0===o?void 0:o.pathname)||"/";console.log("\ud83d\udd35 [LOGIN COMPONENT] Redirigiendo a:",a),e(a,{replace:!0})}},100)):p(i.message||"Error al iniciar sesi\xf3n")}catch(n){console.error("\u274c [LOGIN COMPONENT] Error:",n),p("Error inesperado al iniciar sesi\xf3n")}finally{g(!1)}},children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"email",children:"Email"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",value:u.email,onChange:v,required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"password",children:"Contrase\xf1a"}),(0,t.jsx)("input",{type:"password",id:"password",name:"password",value:u.password,onChange:v,required:!0})]}),(0,t.jsx)("button",{type:"submit",className:"submit-btn",disabled:N,children:N?"Iniciando sesi\xf3n...":"Iniciar Sesi\xf3n"})]}),(0,t.jsxs)("p",{className:"auth-link",children:["\xbfNo tienes cuenta? ",(0,t.jsx)(o.N_,{to:"/register",children:"Reg\xedstrate aqu\xed"})]}),(0,t.jsx)("div",{className:"forgot-password-link",children:(0,t.jsx)(o.N_,{to:"/forgot-password",children:"\xbfOlvidaste tu contrase\xf1a?"})})]})})})}},492(){}}]);
//# sourceMappingURL=66.6693f11f.chunk.js.map