"use strict";(self.webpackChunksimshop_frontend=self.webpackChunksimshop_frontend||[]).push([[119],{119(a,e,s){s.r(e),s.d(e,{default:()=>l});var c=s(555),r=s(43),t=s(774),i=s(722),n=s(579);const l=()=>{const[a,e]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[o,d]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),[h,u]=(0,r.useState)({name:"",slug:"",description:"",image:"",active:!0}),p={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api";(0,r.useEffect)(()=>{x()},[]);const x=async()=>{try{l(!0);const a=await i.A.get("".concat(p,"/categories"));e(a.data)}catch(a){console.error("Error al cargar categor\xedas:",a),alert("Error al cargar las categor\xedas")}finally{l(!1)}},j=a=>{const{name:e,value:s,type:r,checked:t}=a.target;if(u((0,c.A)((0,c.A)({},h),{},{[e]:"checkbox"===r?t:s})),"name"===e){const a=s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");u(e=>(0,c.A)((0,c.A)({},e),{},{slug:a}))}},v=function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a?(g(a),u({name:a.name,slug:a.slug,description:a.description||"",image:a.image||"",active:a.active})):(g(null),u({name:"",slug:"",description:"",image:"",active:!0})),d(!0)},N=()=>{d(!1),g(null)};return s?(0,n.jsx)("div",{className:"loading",children:"Cargando categor\xedas..."}):(0,n.jsxs)("div",{className:"admin-categories",children:[(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsx)("h2",{children:"Gesti\xf3n de Categor\xedas"}),(0,n.jsxs)("button",{className:"btn btn-primary",onClick:()=>v(),children:[(0,n.jsx)(t.OiG,{})," Nueva Categor\xeda"]})]}),(0,n.jsx)("div",{className:"categories-grid",children:a.map(a=>(0,n.jsxs)("div",{className:"category-card-admin",children:[(0,n.jsx)("div",{className:"category-image",children:a.image?(0,n.jsx)("img",{src:a.image,alt:a.name}):(0,n.jsx)("div",{className:"category-placeholder",children:a.name.charAt(0)})}),(0,n.jsxs)("div",{className:"category-info",children:[(0,n.jsx)("h3",{children:a.name}),(0,n.jsx)("p",{className:"category-slug",children:a.slug}),a.description&&(0,n.jsx)("p",{className:"category-description",children:a.description}),(0,n.jsx)("span",{className:"status-badge ".concat(a.active?"active":"inactive"),children:a.active?"Activa":"Inactiva"})]}),(0,n.jsxs)("div",{className:"category-actions",children:[(0,n.jsx)("button",{className:"btn-icon btn-edit",onClick:()=>v(a),title:"Editar",children:(0,n.jsx)(t.uO9,{})}),(0,n.jsx)("button",{className:"btn-icon btn-delete",onClick:()=>(async a=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar esta categor\xeda? Esto podr\xeda afectar a los productos asociados."))try{await i.A.delete("".concat(p,"/categories/").concat(a)),alert("Categor\xeda eliminada correctamente"),x()}catch(e){console.error("Error al eliminar categor\xeda:",e),alert("Error al eliminar la categor\xeda")}})(a._id),title:"Eliminar",children:(0,n.jsx)(t.qbC,{})})]})]},a._id))}),0===a.length&&(0,n.jsx)("div",{className:"no-data",children:"No hay categor\xedas registradas"}),o&&(0,n.jsx)("div",{className:"modal-overlay",onClick:N,children:(0,n.jsxs)("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h3",{children:m?"Editar Categor\xeda":"Nueva Categor\xeda"}),(0,n.jsx)("button",{className:"modal-close",onClick:N,children:(0,n.jsx)(t.QCr,{})})]}),(0,n.jsxs)("form",{onSubmit:async a=>{a.preventDefault();try{m?(await i.A.put("".concat(p,"/categories/").concat(m._id),h),alert("Categor\xeda actualizada correctamente")):(await i.A.post("".concat(p,"/categories"),h),alert("Categor\xeda creada correctamente")),N(),x()}catch(c){var e,s;console.error("Error al guardar categor\xeda:",c),alert("Error al guardar la categor\xeda: "+((null===(e=c.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||c.message))}},className:"category-form",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Nombre *"}),(0,n.jsx)("input",{type:"text",name:"name",value:h.name,onChange:j,required:!0})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Slug *"}),(0,n.jsx)("input",{type:"text",name:"slug",value:h.slug,onChange:j,required:!0}),(0,n.jsx)("small",{children:"URL amigable (generado autom\xe1ticamente)"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Descripci\xf3n"}),(0,n.jsx)("textarea",{name:"description",value:h.description,onChange:j,rows:"3"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Imagen (URL)"}),(0,n.jsx)("input",{type:"url",name:"image",value:h.image,onChange:j,placeholder:"https://ejemplo.com/imagen.jpg"})]}),(0,n.jsx)("div",{className:"form-checkboxes",children:(0,n.jsxs)("label",{className:"checkbox-label",children:[(0,n.jsx)("input",{type:"checkbox",name:"active",checked:h.active,onChange:j}),(0,n.jsx)("span",{children:"Categor\xeda activa"})]})}),(0,n.jsxs)("div",{className:"form-actions",children:[(0,n.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:N,children:"Cancelar"}),(0,n.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[m?"Actualizar":"Crear"," Categor\xeda"]})]})]})]})})]})}}}]);
//# sourceMappingURL=119.07e683bb.chunk.js.map