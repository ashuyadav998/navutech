"use strict";(self.webpackChunksimshop_frontend=self.webpackChunksimshop_frontend||[]).push([[546],{546(a,s,e){e.r(s),e.d(s,{default:()=>i});var r=e(43),t=e(774),c=e(722),n=e(579);const i=()=>{const[a,s]=(0,r.useState)([]),[e,i]=(0,r.useState)(!0),l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api";(0,r.useEffect)(()=>{o()},[]);const o=async()=>{try{i(!0);const a=await c.A.get("".concat(l,"/users")).catch(()=>({data:[]}));s(a.data)}catch(a){console.error("Error al cargar usuarios:",a)}finally{i(!1)}};return e?(0,n.jsx)("div",{className:"loading",children:"Cargando usuarios..."}):(0,n.jsxs)("div",{className:"admin-users",children:[(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsx)("h2",{children:"Gesti\xf3n de Usuarios"}),(0,n.jsxs)("div",{className:"users-stats",children:[(0,n.jsxs)("span",{className:"stat-item",children:["Total: ",(0,n.jsx)("strong",{children:a.length})]}),(0,n.jsxs)("span",{className:"stat-item",children:["Admins: ",(0,n.jsx)("strong",{children:a.filter(a=>"admin"===a.role).length})]}),(0,n.jsxs)("span",{className:"stat-item",children:["Usuarios: ",(0,n.jsx)("strong",{children:a.filter(a=>"user"===a.role).length})]})]})]}),(0,n.jsxs)("div",{className:"table-responsive",children:[(0,n.jsxs)("table",{className:"admin-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Usuario"}),(0,n.jsx)("th",{children:"Email"}),(0,n.jsx)("th",{children:"Tel\xe9fono"}),(0,n.jsx)("th",{children:"Rol"}),(0,n.jsx)("th",{children:"Estado"}),(0,n.jsx)("th",{children:"Registro"}),(0,n.jsx)("th",{children:"Acciones"})]})}),(0,n.jsx)("tbody",{children:a.map(a=>{return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsxs)("div",{className:"user-cell",children:["admin"===a.role?(0,n.jsx)(t.e7y,{}):(0,n.jsx)(t.x$1,{}),(0,n.jsx)("strong",{children:a.name})]})}),(0,n.jsx)("td",{children:a.email}),(0,n.jsx)("td",{children:a.phone||"-"}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"badge ".concat("admin"===a.role?"badge-primary":"badge-secondary"),children:a.role})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"status-badge ".concat(a.active?"active":"inactive"),children:a.active?"Activo":"Inactivo"})}),(0,n.jsx)("td",{children:(s=a.createdAt,new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}))}),(0,n.jsx)("td",{children:(0,n.jsxs)("div",{className:"action-buttons",children:[(0,n.jsx)("button",{className:"btn btn-small btn-secondary",onClick:()=>(async(a,s)=>{const e="admin"===s?"user":"admin";if(window.confirm("\xbfCambiar rol de usuario a ".concat(e,"?")))try{await c.A.put("".concat(l,"/users/").concat(a),{role:e}),alert("Rol actualizado correctamente"),o()}catch(r){console.error("Error al actualizar rol:",r),alert("Error al actualizar el rol")}})(a._id,a.role),children:"Cambiar rol"}),(0,n.jsx)("button",{className:"btn btn-small ".concat(a.active?"btn-danger":"btn-success"),onClick:()=>(async(a,s)=>{const e=!s;if(window.confirm("\xbf".concat(e?"Activar":"Desactivar"," este usuario?")))try{await c.A.put("".concat(l,"/users/").concat(a),{active:e}),alert("Estado actualizado correctamente"),o()}catch(r){console.error("Error al actualizar estado:",r),alert("Error al actualizar el estado")}})(a._id,a.active),children:a.active?"Desactivar":"Activar"})]})})]},a._id);var s})})]}),0===a.length&&(0,n.jsx)("div",{className:"no-data",children:"No hay usuarios registrados"})]})]})}}}]);
//# sourceMappingURL=546.f90ae794.chunk.js.map