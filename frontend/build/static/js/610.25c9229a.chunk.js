"use strict";(self.webpackChunksimshop_frontend=self.webpackChunksimshop_frontend||[]).push([[610],{610(e,a,s){s.r(a),s.d(a,{default:()=>h});var n=s(43),r=s(216),i=s(774),l=s(729),t=s(555),o=s(722),c=(s(463),s(579));const d={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api",u=e=>{let{user:a,login:s}=e;const[r,l]=(0,n.useState)(!1),[u,m]=(0,n.useState)({name:"",email:"",phone:"",street:"",city:"",postalCode:"",country:"Espa\xf1a"});(0,n.useEffect)(()=>{var e,s,n,r;a&&m({name:a.name||"",email:a.email||"",phone:a.phone||"",street:(null===(e=a.address)||void 0===e?void 0:e.street)||"",city:(null===(s=a.address)||void 0===s?void 0:s.city)||"",postalCode:(null===(n=a.address)||void 0===n?void 0:n.postalCode)||"",country:(null===(r=a.address)||void 0===r?void 0:r.country)||"Espa\xf1a"})},[a]);return a?(0,c.jsxs)("div",{className:"profile-tab",children:[(0,c.jsxs)("div",{className:"tab-header",children:[(0,c.jsx)("h2",{children:"Mis Datos"}),r?(0,c.jsxs)("div",{className:"edit-actions",children:[(0,c.jsx)("button",{className:"btn-save",onClick:async()=>{try{const e=localStorage.getItem("token"),n=await o.A.put("".concat(d,"/auth/profile"),{name:u.name,phone:u.phone,address:{street:u.street,city:u.city,postalCode:u.postalCode,country:u.country}},{headers:{Authorization:"Bearer ".concat(e)}});s((0,t.A)((0,t.A)({},a),n.data),e),l(!1),alert("Perfil actualizado correctamente")}catch(e){alert("Error al guardar los cambios")}},children:"Guardar"}),(0,c.jsx)("button",{className:"btn-cancel",onClick:()=>l(!1),children:"Cancelar"})]}):(0,c.jsxs)("button",{className:"btn-edit",onClick:()=>l(!0),children:[(0,c.jsx)(i.uO9,{})," Editar Perfil"]})]}),(0,c.jsx)("div",{className:"profile-form",children:(0,c.jsxs)("div",{className:"form-grid",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Correo Electr\xf3nico"}),(0,c.jsx)("input",{name:"email",value:u.email,disabled:!0,className:"input-readonly"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Nombre Completo"}),(0,c.jsx)("input",{name:"name",value:u.name,onChange:e=>m((0,t.A)((0,t.A)({},u),{},{name:e.target.value})),disabled:!r})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Tel\xe9fono"}),(0,c.jsx)("input",{name:"phone",value:u.phone,onChange:e=>m((0,t.A)((0,t.A)({},u),{},{phone:e.target.value})),disabled:!r})]})]})})]}):(0,c.jsx)("div",{className:"loading",children:"Cargando datos de usuario..."})},m={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api",h=()=>{const e=(0,r.Zp)(),{user:a,isAuthenticated:s,logout:t,login:d,loading:h}=(0,l.A)();(0,n.useEffect)(()=>{h||s()||e("/login")},[s,e,h]);return h?(0,c.jsxs)("div",{className:"loading-screen",children:[(0,c.jsx)("div",{className:"spinner"}),(0,c.jsx)("p",{children:"Cargando tu cuenta..."})]}):a?(0,c.jsxs)("div",{className:"profile-page-luxury",children:[(0,c.jsx)("div",{className:"profile-bg-accent"}),(0,c.jsx)("div",{className:"container profile-container",children:(0,c.jsxs)("div",{className:"profile-card-main",children:[(0,c.jsxs)("div",{className:"profile-card-header",children:[(0,c.jsx)("div",{className:"user-avatar-wrapper",children:(0,c.jsx)(i.NBi,{className:"user-avatar-icon"})}),(0,c.jsxs)("div",{className:"user-welcome-text",children:[(0,c.jsxs)("h1",{children:["Hola, ",a.name.split(" ")[0]]}),(0,c.jsx)("p",{children:"Bienvenido a tu panel de control"})]})]}),(0,c.jsxs)("div",{className:"profile-card-body",children:[(0,c.jsxs)("div",{className:"section-title",children:[(0,c.jsx)("h3",{children:"Informaci\xf3n Personal"}),(0,c.jsx)("div",{className:"title-underline"})]}),(0,c.jsx)(u,{user:a,login:d})]}),(0,c.jsxs)("div",{className:"profile-card-footer",children:[(0,c.jsxs)("button",{className:"btn-logout-luxury",onClick:t,children:[(0,c.jsx)(i.axc,{})," ",(0,c.jsx)("span",{children:"Cerrar sesi\xf3n"})]}),(0,c.jsx)("div",{className:"danger-zone-separator",children:(0,c.jsx)("span",{children:"Zona de Peligro"})}),(0,c.jsxs)("button",{className:"btn-delete-account",onClick:async()=>{if(window.confirm("\xbfEst\xe1s completamente seguro? Esta acci\xf3n eliminar\xe1 todos tus datos permanentemente y no se puede deshacer."))try{const e=sessionStorage.getItem("token");if(!e)return void alert("No se encontr\xf3 token de autenticaci\xf3n");await o.A.delete("".concat(m,"/auth/profile"),{headers:{Authorization:"Bearer ".concat(e)}}),alert("Cuenta eliminada con \xe9xito."),t()}catch(e){console.error("Error al eliminar cuenta:",e),alert("Error al intentar eliminar la cuenta. Int\xe9ntalo de nuevo m\xe1s tarde.")}},children:[(0,c.jsx)(i.RCe,{})," ",(0,c.jsx)("span",{children:"Eliminar mi cuenta permanentemente"})]})]})]})})]}):null}},463(){}}]);
//# sourceMappingURL=610.25c9229a.chunk.js.map