"use strict";(self.webpackChunksimshop_frontend=self.webpackChunksimshop_frontend||[]).push([[390],{390(e,s,a){a.r(s),a.d(s,{default:()=>m});var i=a(555),n=a(43),r=a(475),c=a(216),d=a(729),l=a(722),t=(a(492),a(579));const o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api",m=()=>{const e=(0,c.Zp)(),{login:s}=(0,d.A)(),[a,m]=(0,n.useState)(1),[u,h]=(0,n.useState)({name:"",email:"",password:"",confirmPassword:""}),[p,v]=(0,n.useState)(""),[x,g]=(0,n.useState)(""),[j,f]=(0,n.useState)(!1),[N,b]=(0,n.useState)(""),C=e=>{h((0,i.A)((0,i.A)({},u),{},{[e.target.name]:e.target.value}))};return(0,t.jsx)("div",{className:"auth-page",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"auth-card",children:[(0,t.jsx)("h1",{children:"Crear Cuenta"}),1===a&&(0,t.jsxs)(t.Fragment,{children:[x&&(0,t.jsx)("div",{className:"error-message",children:x}),N&&(0,t.jsx)("div",{className:"success-message",children:N}),(0,t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g(""),b(""),u.password===u.confirmPassword)if(u.password.length<6)g("La contrase\xf1a debe tener al menos 6 caracteres");else{f(!0);try{await l.A.post("".concat(o,"/auth/register/send-code"),{email:u.email,name:u.name}),b("\u2705 C\xf3digo enviado a tu email"),m(2)}catch(i){var s,a;g((null===(s=i.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Error al enviar c\xf3digo")}finally{f(!1)}}else g("Las contrase\xf1as no coinciden")},children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"name",children:"Nombre completo"}),(0,t.jsx)("input",{type:"text",id:"name",name:"name",value:u.name,onChange:C,required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"email",children:"Email"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",value:u.email,onChange:C,required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"password",children:"Contrase\xf1a"}),(0,t.jsx)("input",{type:"password",id:"password",name:"password",value:u.password,onChange:C,required:!0,minLength:"6"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",children:"Confirmar contrase\xf1a"}),(0,t.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:u.confirmPassword,onChange:C,required:!0})]}),(0,t.jsx)("button",{type:"submit",className:"submit-btn",disabled:j,children:j?"Enviando...":"Continuar"})]})]}),2===a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"verification-step",children:[(0,t.jsx)("div",{className:"verification-icon",children:"\ud83d\udce7"}),(0,t.jsx)("p",{children:"Hemos enviado un c\xf3digo de verificaci\xf3n a:"}),(0,t.jsx)("strong",{children:u.email}),(0,t.jsx)("p",{className:"small-text",children:"El c\xf3digo expira en 10 minutos"})]}),x&&(0,t.jsx)("div",{className:"error-message",children:x}),N&&(0,t.jsx)("div",{className:"success-message",children:N}),(0,t.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),g(""),f(!0);try{const a=await l.A.post("".concat(o,"/auth/register/verify-code"),{email:u.email,code:p,name:u.name,password:u.password});m(3),s(a.data.user,a.data.token),setTimeout(()=>{e("/")},3e3)}catch(r){var i,n;g((null===(i=r.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)||"C\xf3digo inv\xe1lido")}finally{f(!1)}},children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"code",children:"C\xf3digo de verificaci\xf3n"}),(0,t.jsx)("input",{type:"text",id:"code",value:p,onChange:e=>v(e.target.value),placeholder:"Ingresa el c\xf3digo de 6 d\xedgitos",maxLength:"6",required:!0,className:"code-input"})]}),(0,t.jsx)("button",{type:"submit",className:"submit-btn",disabled:j,children:j?"Verificando...":"Verificar y Registrarse"})]}),(0,t.jsxs)("div",{className:"resend-code",children:[(0,t.jsx)("p",{children:"\xbfNo recibiste el c\xf3digo?"}),(0,t.jsx)("button",{type:"button",className:"link-button",onClick:async()=>{f(!0),g(""),b("");try{await l.A.post("".concat(o,"/auth/register/send-code"),{email:u.email,name:u.name}),b("\u2705 Nuevo c\xf3digo enviado")}catch(e){g("Error al reenviar c\xf3digo")}finally{f(!1)}},disabled:j,children:"Reenviar c\xf3digo"})]}),(0,t.jsx)("button",{type:"button",className:"back-button",onClick:()=>m(1),children:"\u2190 Volver"})]}),3===a&&(0,t.jsxs)("div",{className:"success-container",children:[(0,t.jsx)("div",{className:"success-icon",children:"\ud83c\udf89"}),(0,t.jsx)("h2",{children:"\xa1Cuenta creada con \xe9xito!"}),(0,t.jsxs)("p",{children:["Bienvenido/a, ",(0,t.jsx)("strong",{children:u.name})]}),(0,t.jsx)("p",{className:"success-message",children:"Tu cuenta ha sido verificada correctamente."}),(0,t.jsxs)("div",{className:"redirect-message",children:[(0,t.jsx)("div",{className:"spinner-small"}),(0,t.jsx)("p",{children:"Redirigiendo a la tienda en 3 segundos..."})]}),(0,t.jsx)("button",{className:"submit-btn",onClick:()=>e("/"),children:"Ir a la tienda ahora"})]}),3!==a&&(0,t.jsxs)("p",{className:"auth-link",children:["\xbfYa tienes cuenta? ",(0,t.jsx)(r.N_,{to:"/login",children:"Inicia sesi\xf3n aqu\xed"})]})]})})})}},492(){}}]);
//# sourceMappingURL=390.32afaf7a.chunk.js.map