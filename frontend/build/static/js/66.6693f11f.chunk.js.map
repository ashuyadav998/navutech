{"version":3,"file":"static/js/66.6693f11f.chunk.js","mappings":"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","sources":["pages/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport '../styles/Auth.css';\n\nconst Login = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { login, isAuthenticated, user } = useAuth(); // ‚úÖ A√±adir user\n  \n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  // Si ya est√° autenticado, redirigir\n  useEffect(() => {\n    if (isAuthenticated()) {\n      console.log('‚úÖ Ya autenticado, redirigiendo...'); // ‚úÖ DEBUG\n      const from = location.state?.from?.pathname || '/';\n      navigate(from, { replace: true });\n    }\n  }, [isAuthenticated, navigate, location]);\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    console.log('üîµ [LOGIN COMPONENT] Iniciando login...'); // ‚úÖ DEBUG\n\n    try {\n      // ‚úÖ USAR LA FUNCI√ìN LOGIN DEL AUTHCONTEXT\n      const result = await login(formData.email, formData.password);\n      \n      console.log('üîµ [LOGIN COMPONENT] Resultado:', result); // ‚úÖ DEBUG\n\n      if (result.success) {\n        console.log('‚úÖ [LOGIN COMPONENT] Login exitoso'); // ‚úÖ DEBUG\n        \n        // Esperar un momento para que el estado se actualice\n        setTimeout(() => {\n          // Redirigir seg√∫n el rol\n          if (result.user?.role === 'admin') {\n            console.log('üîµ [LOGIN COMPONENT] Redirigiendo a /admin'); // ‚úÖ DEBUG\n            navigate('/admin', { replace: true });\n          } else {\n            const from = location.state?.from?.pathname || '/';\n            console.log('üîµ [LOGIN COMPONENT] Redirigiendo a:', from); // ‚úÖ DEBUG\n            navigate(from, { replace: true });\n          }\n        }, 100);\n      } else {\n        setError(result.message || 'Error al iniciar sesi√≥n');\n      }\n    } catch (err) {\n      console.error('‚ùå [LOGIN COMPONENT] Error:', err); // ‚úÖ DEBUG\n      setError('Error inesperado al iniciar sesi√≥n');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"auth-page\">\n      <div className=\"container\">\n        <div className=\"auth-card\">\n          <h1>Iniciar Sesi√≥n</h1>\n\n          {error && <div className=\"error-message\">{error}</div>}\n\n          <form onSubmit={handleSubmit}>\n            <div className=\"form-group\">\n              <label htmlFor=\"email\">Email</label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                value={formData.email}\n                onChange={handleChange}\n                required\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"password\">Contrase√±a</label>\n              <input\n                type=\"password\"\n                id=\"password\"\n                name=\"password\"\n                value={formData.password}\n                onChange={handleChange}\n                required\n              />\n            </div>\n\n            <button type=\"submit\" className=\"submit-btn\" disabled={loading}>\n              {loading ? 'Iniciando sesi√≥n...' : 'Iniciar Sesi√≥n'}\n            </button>\n          </form>\n\n          <p className=\"auth-link\">\n            ¬øNo tienes cuenta? <Link to=\"/register\">Reg√≠strate aqu√≠</Link>\n          </p>\n          <div className=\"forgot-password-link\">\n       <Link to=\"/forgot-password\">¬øOlvidaste tu contrase√±a?</Link>\n  </div>\n          \n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;"],"names":["Login","navigate","useNavigate","location","useLocation","login","isAuthenticated","user","useAuth","formData","setFormData","useState","email","password","error","setError","loading","setLoading","useEffect","_location$state","_location$state$from","console","log","from","state","pathname","replace","handleChange","e","_objectSpread","target","name","value","_jsx","className","children","_jsxs","onSubmit","async","preventDefault","result","success","setTimeout","_result$user","role","_location$state2","_location$state2$from","message","err","htmlFor","type","id","onChange","required","disabled","Link","to"],"sourceRoot":""}