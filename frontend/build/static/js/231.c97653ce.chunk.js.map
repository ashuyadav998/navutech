{"version":3,"file":"static/js/231.c97653ce.chunk.js","mappings":"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","sources":["components/ProductCard.js","pages/Products.js"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { FaShoppingCart } from 'react-icons/fa';\nimport { useCart } from '../context/CartContext';\nimport '../styles/ProductCard.css';\n\nconst ProductCard = ({ product }) => {\n  const { addToCart } = useCart();\n\n  const handleAddToCart = (e) => {\n    e.preventDefault();\n    addToCart(product);\n  };\n\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('es-ES', {\n      style: 'currency',\n      currency: 'EUR'\n    }).format(price);\n  };\n\n  return (\n    <Link to={`/productos/${product.slug}`} className=\"product-card\">\n      <div className=\"product-image\">\n        {product.isOffer && (\n          <span className=\"discount-badge\">-{product.discount}%</span>\n        )}\n        <img \n          src={product.images[0] || 'https://via.placeholder.com/300'} \n          alt={product.name} \n        />\n      </div>\n\n      <div className=\"product-info\">\n        <h3 className=\"product-name\">{product.name}</h3>\n        \n        {product.brand && (\n          <p className=\"product-brand\">{product.brand}</p>\n        )}\n\n        <div className=\"product-price\">\n          {product.originalPrice > 0 ? (\n            <>\n              <span className=\"price-original\">{formatPrice(product.originalPrice)}</span>\n              <span className=\"price-current\">{formatPrice(product.price)}</span>\n            </>\n          ) : (\n            <span className=\"price-current\">{formatPrice(product.price)}</span>\n          )}\n        </div>\n\n        <div className=\"product-stock\">\n          {product.stock > 0 ? (\n            <span className=\"in-stock\">En stock</span>\n          ) : (\n            <span className=\"out-stock\">Agotado</span>\n          )}\n        </div>\n\n        <button \n          className=\"add-to-cart-btn\"\n          onClick={handleAddToCart}\n          disabled={product.stock === 0}\n        >\n          <FaShoppingCart />\n          Añadir al carrito\n        </button>\n      </div>\n    </Link>\n  );\n};\n\nexport default ProductCard;\n","import React, { useState, useEffect } from 'react';\nimport { useParams, useSearchParams, useNavigate } from 'react-router-dom';\nimport ProductCard from '../components/ProductCard';\nimport { getProducts, getCategories, getCategory } from '../services/api';\nimport '../styles/Products.css';\n\nconst Products = () => {\n  const { categorySlug } = useParams();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate(); // Para navegar sin recargar la página completa\n  \n  const [products, setProducts] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [currentCategory, setCurrentCategory] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  // Extraemos el término de búsqueda de la URL (?search=...)\n  const searchQuery = searchParams.get('search') || '';\n\n  const [filters, setFilters] = useState({\n    category: '',\n    search: searchQuery, // Inicializamos con lo que venga en la URL\n    isOffer: searchParams.get('ofertas') === 'true',\n    sort: 'newest'\n  });\n\n  // Sincronizar el estado de filtros cuando cambie la búsqueda en la URL\n  useEffect(() => {\n    setFilters(prev => ({ \n      ...prev, \n      search: searchQuery,\n      isOffer: searchParams.get('ofertas') === 'true'\n    }));\n  }, [searchQuery, searchParams]);\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  useEffect(() => {\n    if (categorySlug) {\n      loadCategoryAndProducts();\n    } else {\n      loadProducts();\n    }\n    // Añadimos searchQuery a las dependencias para que recargue al buscar\n  }, [categorySlug, filters, searchQuery]);\n\n  const loadCategories = async () => {\n    try {\n      const response = await getCategories();\n      setCategories(response.data);\n    } catch (error) {\n      console.error('Error al cargar categorías:', error);\n    }\n  };\n\n  const loadCategoryAndProducts = async () => {\n    try {\n      setLoading(true);\n      const categoryRes = await getCategory(categorySlug);\n      setCurrentCategory(categoryRes.data);\n      \n      const productsRes = await getProducts({ \n        category: categoryRes.data._id,\n        ...filters \n      });\n      setProducts(productsRes.data);\n    } catch (error) {\n      console.error('Error al cargar productos:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadProducts = async () => {\n    try {\n      setLoading(true);\n      // Enviamos los filtros (incluyendo search) a la API\n      const response = await getProducts(filters);\n      setProducts(response.data);\n    } catch (error) {\n      console.error('Error al cargar productos:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFilterChange = (filterName, value) => {\n    setFilters(prev => ({ ...prev, [filterName]: value }));\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Cargando productos...</div>;\n  }\n\n  return (\n    <div className=\"products-page\">\n      <div className=\"container\">\n        <div className=\"page-header\">\n          <h1>\n            {searchQuery \n              ? `Resultados para \"${searchQuery}\"` \n              : (currentCategory ? currentCategory.name : 'Todos los Productos')}\n          </h1>\n          {currentCategory && currentCategory.description && !searchQuery && (\n            <p>{currentCategory.description}</p>\n          )}\n        </div>\n\n        <div className=\"products-layout\">\n          <aside className=\"filters-sidebar\">\n            <div className=\"filter-group\">\n              <h3>Categorías</h3>\n              <ul className=\"category-list\">\n                <li>\n                  <button \n                    className={!categorySlug ? 'active' : ''}\n                    onClick={() => navigate('/products')} // Usar navigate en lugar de href\n                  >\n                    Todas\n                  </button>\n                </li>\n                {categories.map(cat => (\n                  <li key={cat._id}>\n                    <button\n                      className={categorySlug === cat.slug ? 'active' : ''}\n                      onClick={() => navigate(`/categoria/${cat.slug}`)} // Usar navigate\n                    >\n                      {cat.name}\n                    </button>\n                  </li>\n                ))}\n              </ul>\n            </div>\n\n            <div className=\"filter-group\">\n              <h3>Filtros</h3>\n              <label className=\"checkbox-label\">\n                <input\n                  type=\"checkbox\"\n                  checked={filters.isOffer}\n                  onChange={(e) => handleFilterChange('isOffer', e.target.checked)}\n                />\n                Solo ofertas\n              </label>\n            </div>\n\n            <div className=\"filter-group\">\n              <h3>Ordenar por</h3>\n              <select\n                value={filters.sort}\n                onChange={(e) => handleFilterChange('sort', e.target.value)}\n              >\n                <option value=\"newest\">Más recientes</option>\n                <option value=\"price-asc\">Precio: menor a mayor</option>\n                <option value=\"price-desc\">Precio: mayor a menor</option>\n              </select>\n            </div>\n          </aside>\n\n          <div className=\"products-content\">\n            <div className=\"products-info\">\n              <p>{products.length} productos encontrados</p>\n              {searchQuery && (\n                <button className=\"clear-search\" onClick={() => navigate('/products')}>\n                  Limpiar búsqueda\n                </button>\n              )}\n            </div>\n\n            {products.length > 0 ? (\n              <div className=\"products-grid\">\n                {products.map(product => (\n                  <ProductCard key={product._id} product={product} />\n                ))}\n              </div>\n            ) : (\n              <div className=\"no-products\">\n                <p>No se encontraron productos que coincidan con tu búsqueda.</p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Products;"],"names":["_ref","product","addToCart","useCart","formatPrice","price","Intl","NumberFormat","style","currency","format","_jsxs","Link","to","concat","slug","className","children","isOffer","discount","_jsx","src","images","alt","name","brand","originalPrice","_Fragment","stock","onClick","e","preventDefault","disabled","FaShoppingCart","Products","categorySlug","useParams","searchParams","useSearchParams","navigate","useNavigate","products","setProducts","useState","categories","setCategories","currentCategory","setCurrentCategory","loading","setLoading","searchQuery","get","filters","setFilters","category","search","sort","useEffect","prev","_objectSpread","loadCategories","loadCategoryAndProducts","loadProducts","async","response","getCategories","data","error","console","categoryRes","getCategory","productsRes","getProducts","_id","handleFilterChange","filterName","value","description","map","cat","type","checked","onChange","target","length","ProductCard"],"sourceRoot":""}